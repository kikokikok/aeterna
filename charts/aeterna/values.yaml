## Aeterna Helm Chart Values
## Universal Memory & Knowledge Framework for Enterprise AI Agent Systems

## Deployment mode configuration
## @param deploymentMode Deployment mode: local (all components), hybrid (local cache + remote), remote (thin client)
deploymentMode: local

## Central server configuration (required for hybrid/remote modes)
central:
  ## @param central.url Central Aeterna server URL
  url: ""
  ## @param central.auth Authentication method: apiKey, oauth2, serviceAccount
  auth: apiKey
  ## @param central.apiKey API key for central server (use existingSecret in production)
  apiKey: ""
  ## @param central.existingSecret Name of existing secret containing central server credentials
  existingSecret: ""
  ## @param central.secretKey Key in the secret containing the API key
  secretKey: "api-key"

## Aeterna server configuration
aeterna:
  ## @param aeterna.enabled Enable Aeterna server deployment
  enabled: true

  ## @param aeterna.replicaCount Number of replicas
  replicaCount: 1

  image:
    ## @param aeterna.image.repository Image repository
    repository: ghcr.io/kikokikok/aeterna
    ## @param aeterna.image.tag Image tag (defaults to chart appVersion)
    tag: ""
    ## @param aeterna.image.pullPolicy Image pull policy
    pullPolicy: IfNotPresent

  ## @param aeterna.imagePullSecrets Docker registry secrets
  imagePullSecrets: []

  ## @param aeterna.nameOverride Override chart name
  nameOverride: ""
  ## @param aeterna.fullnameOverride Override full name
  fullnameOverride: ""

  ## Service account configuration
  serviceAccount:
    ## @param aeterna.serviceAccount.create Create service account
    create: true
    ## @param aeterna.serviceAccount.automount Automount service account token
    automount: true
    ## @param aeterna.serviceAccount.annotations Service account annotations
    annotations: {}
    ## @param aeterna.serviceAccount.name Service account name
    name: ""

  ## @param aeterna.podAnnotations Pod annotations
  podAnnotations: {}

  ## @param aeterna.podLabels Additional pod labels
  podLabels: {}

  ## Pod security context
  podSecurityContext:
    runAsNonRoot: true
    runAsUser: 1000
    runAsGroup: 1000
    fsGroup: 1000
    seccompProfile:
      type: RuntimeDefault

  ## Container security context
  securityContext:
    allowPrivilegeEscalation: false
    readOnlyRootFilesystem: true
    capabilities:
      drop:
        - ALL

  ## Service configuration
  service:
    ## @param aeterna.service.type Service type
    type: ClusterIP
    ## @param aeterna.service.port Service port
    port: 8080
    ## @param aeterna.service.metricsPort Metrics port for Prometheus
    metricsPort: 9090

  ## Ingress configuration
  ingress:
    ## @param aeterna.ingress.enabled Enable ingress
    enabled: false
    ## @param aeterna.ingress.className Ingress class name
    className: ""
    ## @param aeterna.ingress.annotations Ingress annotations
    annotations: {}
    ## @param aeterna.ingress.hosts Ingress hosts
    hosts:
      - host: aeterna.local
        paths:
          - path: /
            pathType: Prefix
    ## @param aeterna.ingress.tls Ingress TLS configuration
    tls: []

  ## Resource limits and requests
  resources:
    limits:
      cpu: 1000m
      memory: 1Gi
    requests:
      cpu: 100m
      memory: 256Mi

  ## Probes configuration
  livenessProbe:
    httpGet:
      path: /health/live
      port: http
    initialDelaySeconds: 30
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3

  readinessProbe:
    httpGet:
      path: /health/ready
      port: http
    initialDelaySeconds: 5
    periodSeconds: 5
    timeoutSeconds: 3
    failureThreshold: 3

  startupProbe:
    httpGet:
      path: /health/startup
      port: http
    initialDelaySeconds: 10
    periodSeconds: 5
    timeoutSeconds: 3
    failureThreshold: 30

  ## Autoscaling configuration
  autoscaling:
    ## @param aeterna.autoscaling.enabled Enable HPA
    enabled: false
    ## @param aeterna.autoscaling.minReplicas Minimum replicas
    minReplicas: 1
    ## @param aeterna.autoscaling.maxReplicas Maximum replicas
    maxReplicas: 10
    ## @param aeterna.autoscaling.targetCPUUtilizationPercentage Target CPU utilization
    targetCPUUtilizationPercentage: 80
    ## @param aeterna.autoscaling.targetMemoryUtilizationPercentage Target memory utilization
    targetMemoryUtilizationPercentage: 80

  ## Vertical Pod Autoscaler (VPA) configuration
  ## Requires VPA controller to be installed in the cluster
    vpa:
      ## @param aeterna.autoscaling.vpa.enabled Enable VPA
      enabled: false
      ## @param aeterna.autoscaling.vpa.updateMode VPA update mode: Auto, Recreate, Initial, Off
      updateMode: "Auto"
      ## @param aeterna.autoscaling.vpa.minAllowed Minimum allowed resources
      minAllowed:
        cpu: "50m"
        memory: "128Mi"
      ## @param aeterna.autoscaling.vpa.maxAllowed Maximum allowed resources
      maxAllowed:
        cpu: "4000m"
        memory: "8Gi"

  ## Pod disruption budget
  pdb:
    ## @param aeterna.pdb.enabled Enable PDB
    enabled: false
    ## @param aeterna.pdb.minAvailable Minimum available pods
    minAvailable: 1

  ## @param aeterna.nodeSelector Node selector
  nodeSelector: {}

  ## @param aeterna.tolerations Tolerations
  tolerations: []

  ## @param aeterna.affinity Affinity rules
  affinity: {}

  ## @param aeterna.topologySpreadConstraints Topology spread constraints
  topologySpreadConstraints: []

  ## Metrics configuration
  metrics:
    ## @param aeterna.metrics.enabled Enable Prometheus metrics endpoint
    enabled: true
    ## @param aeterna.metrics.port Metrics port
    port: 9090
    ## @param aeterna.metrics.path Metrics endpoint path
    path: /metrics
    ## @param aeterna.metrics.scrapeInterval Prometheus scrape interval
    scrapeInterval: "30s"
    ## @param aeterna.metrics.scrapeTimeout Prometheus scrape timeout
    scrapeTimeout: "10s"

  ## OpenTelemetry tracing configuration
  otel:
    ## @param aeterna.otel.enabled Enable OpenTelemetry tracing
    enabled: false
    ## @param aeterna.otel.endpoint OTLP exporter endpoint (e.g. http://jaeger-collector:4317)
    endpoint: ""
    ## @param aeterna.otel.samplingRate Trace sampling rate (0.0–1.0)
    samplingRate: "0.1"

  ## Logging configuration
  logging:
    ## @param aeterna.logging.format Log output format: json or text
    format: json
    ## @param aeterna.logging.level Log level: debug, info, warn, error
    level: info

  ## Feature flags
  features:
    ## @param aeterna.features.cca Enable CCA capabilities
    cca: true
    ## @param aeterna.features.radkit Enable Radkit A2A integration
    radkit: false
    ## @param aeterna.features.rlm Enable RLM graph memory
    rlm: true
    ## @param aeterna.features.reflective Enable reflective reasoning
    reflective: true

## Vector backend configuration
vectorBackend:
  ## @param vectorBackend.type Vector backend type: qdrant, pgvector, pinecone, weaviate, mongodb, vertexai, databricks
  type: qdrant

  ## Qdrant configuration
  qdrant:
    ## @param vectorBackend.qdrant.bundled Use bundled Qdrant (subchart)
    bundled: true
    ## External Qdrant configuration (when bundled=false)
    external:
      ## @param vectorBackend.qdrant.external.host External Qdrant host
      host: ""
      ## @param vectorBackend.qdrant.external.port External Qdrant port
      port: 6333
      ## @param vectorBackend.qdrant.external.apiKey External Qdrant API key
      apiKey: ""
      ## @param vectorBackend.qdrant.external.existingSecret Secret containing Qdrant API key
      existingSecret: ""

  ## pgvector configuration (uses PostgreSQL)
  pgvector:
    ## @param vectorBackend.pgvector.enabled Enable pgvector (requires PostgreSQL with pgvector extension)
    enabled: false

  ## Pinecone configuration
  pinecone:
    ## @param vectorBackend.pinecone.enabled Enable Pinecone
    enabled: false
    ## @param vectorBackend.pinecone.apiKey Pinecone API key
    apiKey: ""
    ## @param vectorBackend.pinecone.environment Pinecone environment
    environment: ""
    ## @param vectorBackend.pinecone.indexName Pinecone index name
    indexName: "aeterna"
    ## @param vectorBackend.pinecone.existingSecret Secret containing Pinecone API key
    existingSecret: ""

  ## Weaviate configuration
  weaviate:
    ## @param vectorBackend.weaviate.enabled Enable Weaviate (bundled subchart)
    enabled: false
    ## External Weaviate configuration
    external:
      ## @param vectorBackend.weaviate.external.host External Weaviate host
      host: ""
      ## @param vectorBackend.weaviate.external.apiKey External Weaviate API key
      apiKey: ""
      ## @param vectorBackend.weaviate.external.existingSecret Secret containing Weaviate API key
      existingSecret: ""

  ## MongoDB Atlas Vector Search configuration
  mongodb:
    ## @param vectorBackend.mongodb.enabled Enable MongoDB (bundled Percona operator)
    enabled: false
    ## External MongoDB configuration
    external:
      ## @param vectorBackend.mongodb.external.uri MongoDB connection URI
      uri: ""
      ## @param vectorBackend.mongodb.external.existingSecret Secret containing MongoDB URI
      existingSecret: ""

  ## Vertex AI Vector Search configuration
  vertexai:
    ## @param vectorBackend.vertexai.enabled Enable Vertex AI
    enabled: false
    ## @param vectorBackend.vertexai.project GCP project ID
    project: ""
    ## @param vectorBackend.vertexai.region GCP region
    region: "us-central1"
    ## @param vectorBackend.vertexai.endpoint Vertex AI endpoint ID
    endpoint: ""
    ## @param vectorBackend.vertexai.serviceAccountKey GCP service account key JSON
    serviceAccountKey: ""
    ## @param vectorBackend.vertexai.existingSecret Secret containing service account key
    existingSecret: ""

  ## Databricks Vector Search configuration
  databricks:
    ## @param vectorBackend.databricks.enabled Enable Databricks
    enabled: false
    ## @param vectorBackend.databricks.workspaceUrl Databricks workspace URL
    workspaceUrl: ""
    ## @param vectorBackend.databricks.token Databricks access token
    token: ""
    ## @param vectorBackend.databricks.catalog Unity Catalog name
    catalog: ""
    ## @param vectorBackend.databricks.existingSecret Secret containing Databricks token
    existingSecret: ""

## Database migration configuration
migration:
  ## @param migration.ttlSecondsAfterFinished TTL for completed migration jobs (seconds)
  ttlSecondsAfterFinished: 300

## Cache configuration
cache:
  ## @param cache.type Cache type: dragonfly, valkey, external
  type: dragonfly

  ## Dragonfly configuration (Redis-compatible)
  dragonfly:
    ## @param cache.dragonfly.enabled Enable bundled Dragonfly
    enabled: true
    ## @param cache.dragonfly.replicas Number of Dragonfly replicas (1 standalone, 3+ for HA)
    replicas: 1
    ## @param cache.dragonfly.args Additional Dragonfly arguments
    args: []
    #  - --cache_mode=true
    #  - --memcache_port=11211

  ## Valkey configuration (Redis fork)
  valkey:
    ## @param cache.valkey.enabled Enable bundled Valkey
    enabled: false
    ## @param cache.valkey.maxmemory Maximum memory for Valkey (e.g., "256mb")
    maxmemory: "256mb"
    ## @param cache.valkey.maxmemoryPolicy Eviction policy: allkeys-lru, volatile-lru, noeviction, etc.
    maxmemoryPolicy: "allkeys-lru"

  ## External Redis configuration
  external:
    ## @param cache.external.enabled Use external Redis
    enabled: false
    ## @param cache.external.host External Redis host
    host: ""
    ## @param cache.external.port External Redis port
    port: 6379
    ## @param cache.external.password External Redis password
    password: ""
    ## @param cache.external.existingSecret Secret containing Redis password
    existingSecret: ""
    ## @param cache.external.secretKey Key in secret containing password
    secretKey: "redis-password"

## PostgreSQL configuration
postgresql:
  ## @param postgresql.bundled Use bundled CloudNativePG
  bundled: true

  ## CloudNativePG cluster configuration (when bundled=true)
  cloudnativepg:
    ## @param postgresql.cloudnativepg.enabled Enable CloudNativePG cluster creation
    enabled: true
    ## @param postgresql.cloudnativepg.instances Number of PostgreSQL instances
    instances: 1
    ## @param postgresql.cloudnativepg.imageName PostgreSQL image (leave empty for operator default)
    imageName: ""
    storage:
      ## @param postgresql.cloudnativepg.storage.size Storage size per instance
      size: 10Gi
      ## @param postgresql.cloudnativepg.storage.storageClass Storage class (empty = cluster default)
      storageClass: ""
    resources:
      limits:
        cpu: 1000m
        memory: 1Gi
      requests:
        cpu: 100m
        memory: 256Mi
    ## PostgreSQL engine parameters
    postgresql:
      ## @param postgresql.cloudnativepg.postgresql.parameters Extra PostgreSQL parameters
      parameters:
        shared_preload_libraries: "vector"
      ## @param postgresql.cloudnativepg.postgresql.pg_hba Custom pg_hba entries
      pg_hba: []
    ## Bootstrap configuration
    bootstrap:
      initdb:
        database: "aeterna"
        owner: "aeterna"
    ## pgvector extension support
    pgvector:
      ## @param postgresql.cloudnativepg.pgvector.enabled Install pgvector extension on bootstrap
      enabled: true
    ## Backup configuration (CloudNativePG native)
    backup:
      ## @param postgresql.cloudnativepg.backup.enabled Enable CNPG native backup
      enabled: false
      ## @param postgresql.cloudnativepg.backup.schedule Backup cron schedule
      schedule: "0 2 * * *"
      ## @param postgresql.cloudnativepg.backup.retentionPolicy Backup retention policy
      retentionPolicy: "30d"
      ## @param postgresql.cloudnativepg.backup.provider Backup provider: s3, gcs, azure
      provider: "s3"
      ## @param postgresql.cloudnativepg.backup.destinationPath Full backup destination path (e.g., s3://bucket/path)
      destinationPath: ""
      ## @param postgresql.cloudnativepg.backup.endpointURL Custom S3-compatible endpoint URL
      endpointURL: ""
      s3Credentials:
        ## @param postgresql.cloudnativepg.backup.s3Credentials.accessKeyId S3 access key secret reference
        accessKeyId:
          name: ""
          key: "ACCESS_KEY_ID"
        secretAccessKey:
          name: ""
          key: "ACCESS_SECRET_KEY"
      googleCredentials:
        applicationCredentials:
          name: ""
          key: "gcs-credentials"
      azureCredentials:
        storageAccount:
          name: ""
          key: "AZURE_STORAGE_ACCOUNT"
        storageKey:
          name: ""
          key: "AZURE_STORAGE_KEY"

  ## External PostgreSQL configuration (when bundled=false)
  external:
    ## @param postgresql.external.enabled Enable external PostgreSQL
    enabled: false
    ## @param postgresql.external.host External PostgreSQL host
    host: ""
    ## @param postgresql.external.port External PostgreSQL port
    port: 5432
    ## @param postgresql.external.database Database name
    database: "aeterna"
    ## @param postgresql.external.username Username
    username: "aeterna"
    ## @param postgresql.external.password Password
    password: ""
    ## @param postgresql.external.existingSecret Secret containing PostgreSQL password
    existingSecret: ""
    ## @param postgresql.external.secretKey Key in secret containing password
    secretKey: "postgres-password"
    ## @param postgresql.external.sslMode SSL mode
    sslMode: "prefer"

## OPAL authorization stack
opal:
  ## @param opal.enabled Enable OPAL stack (Server + Cedar Agent)
  enabled: true

  ## OPAL Server configuration
  server:
    ## @param opal.server.replicaCount Number of OPAL Server replicas (>=2 for HA)
    replicaCount: 3
    ## @param opal.server.logLevel Log level for OPAL Server: DEBUG, INFO, WARNING, ERROR
    logLevel: INFO
    image:
      repository: permitio/opal-server
      tag: "0.8.0"
      pullPolicy: IfNotPresent
    resources:
      limits:
        cpu: 500m
        memory: 512Mi
      requests:
        cpu: 50m
        memory: 128Mi
    ## @param opal.server.redis Redis backend for multi-replica broadcast coordination
    redis:
      ## @param opal.server.redis.enabled Enable Redis PubSub backend (required when replicaCount > 1)
      enabled: true
      ## @param opal.server.redis.pubsubUri Redis URI for OPAL broadcast channel
      pubsubUri: "redis://aeterna-redis:6379/0"
      ## @param opal.server.redis.existingSecret Existing secret containing Redis URI (key: pubsub-uri)
      existingSecret: ""

  ## Cedar Agent configuration
  cedarAgent:
    ## @param opal.cedarAgent.enabled Enable Cedar Agent
    enabled: true
    image:
      repository: permitio/cedar-agent
      tag: "0.4.0"
      pullPolicy: IfNotPresent
    resources:
      limits:
        cpu: 200m
        memory: 256Mi
      requests:
        cpu: 20m
        memory: 64Mi

  ## OPAL Fetcher configuration
  fetcher:
    ## @param opal.fetcher.enabled Enable OPAL Fetcher
    enabled: true
    image:
      repository: permitio/opal-client
      tag: "0.8.0"
      pullPolicy: IfNotPresent
    resources:
      limits:
        cpu: 200m
        memory: 256Mi
      requests:
        cpu: 20m
        memory: 64Mi

## LLM provider configuration
llm:
  ## @param llm.provider LLM provider: openai, anthropic, ollama, none
  provider: none

  ## OpenAI configuration
  openai:
    ## @param llm.openai.apiKey OpenAI API key
    apiKey: ""
    ## @param llm.openai.existingSecret Secret containing OpenAI API key
    existingSecret: ""
    ## @param llm.openai.model Model name
    model: "gpt-4o"
    ## @param llm.openai.embeddingModel Embedding model name
    embeddingModel: "text-embedding-3-small"

  ## Anthropic configuration
  anthropic:
    ## @param llm.anthropic.apiKey Anthropic API key
    apiKey: ""
    ## @param llm.anthropic.existingSecret Secret containing Anthropic API key
    existingSecret: ""
    ## @param llm.anthropic.model Model name
    model: "claude-sonnet-4-20250514"

  ## Ollama configuration
  ollama:
    ## @param llm.ollama.host Ollama host URL
    host: "http://localhost:11434"
    ## @param llm.ollama.model Model name
    model: "llama3.2"
    ## @param llm.ollama.embeddingModel Embedding model name
    embeddingModel: "nomic-embed-text"

## Observability configuration
observability:
  ## ServiceMonitor configuration
  serviceMonitor:
    ## @param observability.serviceMonitor.enabled Enable ServiceMonitor for Prometheus Operator
    enabled: false
    ## @param observability.serviceMonitor.interval Scrape interval
    interval: 30s
    ## @param observability.serviceMonitor.scrapeTimeout Scrape timeout
    scrapeTimeout: 10s
    ## @param observability.serviceMonitor.labels Additional labels
    labels: {}
    ## @param observability.serviceMonitor.metricRelabelings Metric relabeling rules
    metricRelabelings: []
    ## @param observability.serviceMonitor.relabelings Relabeling rules
    relabelings: []

  ## Tracing configuration
  tracing:
    ## @param observability.tracing.enabled Enable OpenTelemetry tracing
    enabled: false
    ## @param observability.tracing.endpoint OTLP endpoint
    endpoint: ""
    ## @param observability.tracing.samplingRatio Sampling ratio (0.0-1.0)
    samplingRatio: 0.1

  ## Logging configuration
  logging:
    ## @param observability.logging.level Log level: debug, info, warn, error
    level: info
    ## @param observability.logging.format Log format: json, pretty
    format: json

## Network policies
networkPolicy:
  ## @param networkPolicy.enabled Enable network policies
  enabled: false

## Code Search integration configuration
codesearch:
  ## @param codesearch.enabled Enable Code Search sidecar for semantic code search
  enabled: false
  
  ## @param codesearch.mcpServerUrl MCP server URL (defaults to localhost:9090 for sidecar)
  mcpServerUrl: "http://localhost:9090"
  
  ## Code Search container configuration
  image:
    ## @param codesearch.image.repository Code Search image repository
    repository: ghcr.io/kikokikok/codesearch
    ## @param codesearch.image.tag Code Search image tag
    tag: "latest"
    ## @param codesearch.image.pullPolicy Image pull policy
    pullPolicy: IfNotPresent
  
  ## Resource limits for Code Search sidecar
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 50m
      memory: 128Mi
  
  ## Embedder configuration
  embedder:
    ## @param codesearch.embedder.type Embedder type: ollama, openai
    type: ollama
    ## @param codesearch.embedder.model Model name
    model: "nomic-embed-text"
    ## @param codesearch.embedder.endpoint Custom endpoint URL (optional)
    endpoint: ""
  
  ## Storage backend configuration
  store:
    ## @param codesearch.store.type Storage type: qdrant, postgres, gob
    type: qdrant
    
    ## Qdrant store configuration
    qdrant:
      ## @param codesearch.store.qdrant.collectionPrefix Collection name prefix (defaults to codesearch_)
      collectionPrefix: "codesearch_"
    
    ## PostgreSQL store configuration  
    postgres:
      ## @param codesearch.store.postgres.schema PostgreSQL schema name (defaults to codesearch)
      schema: "codesearch"
  
  ## Projects to initialize
  projects:
    ## @param codesearch.projects List of projects to initialize on startup
    ## Example:
    ## - path: /workspace/project1
    ##   name: project1
    ## - path: /workspace/project2
    ##   name: project2
    []
  
  ## Init container configuration
  initContainer:
    ## @param codesearch.initContainer.enabled Enable init container to initialize projects
    enabled: true
    ## @param codesearch.initContainer.timeout Timeout for initialization (seconds)
    timeout: 300

## Global settings
global:
  ## @param global.imageRegistry Global image registry
  imageRegistry: ""
  ## @param global.imagePullSecrets Global image pull secrets
  imagePullSecrets: []
  ## @param global.storageClass Global storage class
  storageClass: ""

## Secrets management configuration
secrets:
  ## @param secrets.provider Secrets provider: helm (default), sops, external-secrets
  provider: helm

  ## External Secrets Operator configuration
  externalSecrets:
    ## @param secrets.externalSecrets.enabled Enable ExternalSecret resources
    enabled: false
    ## @param secrets.externalSecrets.refreshInterval Secret refresh interval
    refreshInterval: "1h"
    ## @param secrets.externalSecrets.secretStoreRef.name SecretStore or ClusterSecretStore name
    ## @param secrets.externalSecrets.secretStoreRef.kind SecretStore kind: SecretStore or ClusterSecretStore
    secretStoreRef:
      name: ""
      kind: ClusterSecretStore
    ## @param secrets.externalSecrets.remoteRefs Key mappings from external provider
    remoteRefs:
      postgresqlPassword: ""
      redisPassword: ""
      opalMasterToken: ""
      llmApiKey: ""

## Sync configuration (hybrid mode)
## In hybrid mode, Aeterna syncs memory layers between the local cache and central server.
## Memory tiers: Working (ephemeral) → Session (conversation) → Episodic (long-term).
## Working and Session sync by default; Episodic sync is opt-in as it involves larger data volumes.
sync:
  ## @param sync.enabled Enable sync service (auto-enabled in hybrid mode)
  enabled: false
  ## @param sync.interval Sync interval for memory layer synchronization
  interval: "30s"
  ## @param sync.batchSize Number of memories to sync per batch
  batchSize: 100
  ## @param sync.retryAttempts Number of retry attempts on sync failure
  retryAttempts: 3
  ## @param sync.retryDelay Delay between retry attempts
  retryDelay: "5s"
  ## Memory layer sync configuration
  ## Working memory: short-lived, per-request context — synced frequently
  ## Session memory: per-conversation context — synced at conversation boundaries
  ## Episodic memory: long-term learnings — synced less frequently, larger payloads
  memoryLayers:
    ## @param sync.memoryLayers.working Enable working memory sync
    working: true
    ## @param sync.memoryLayers.session Enable session memory sync
    session: true
    ## @param sync.memoryLayers.episodic Enable episodic memory sync (large payloads, set false for bandwidth-constrained)
    episodic: false

## Backup configuration
backup:
  ## @param backup.enabled Enable automated backups
  enabled: false
  ## @param backup.schedule Cron schedule for backups
  schedule: "0 2 * * *"
  ## @param backup.retentionDays Number of days to retain backups
  retentionDays: 30
  ## @param backup.destination.type Backup destination: s3, gcs, azure
  destination:
    type: s3
    s3:
      bucket: ""
      region: "us-east-1"
      endpoint: ""
      existingSecret: ""
      secretKey: "aws-secret-access-key"
      accessKeyId: ""
    gcs:
      bucket: ""
      serviceAccountSecret: ""
    azure:
      container: ""
      storageAccountSecret: ""
  ## @param backup.verify.enabled Enable backup verification job
  verify:
    enabled: false
    schedule: "0 6 * * *"

## Subchart configuration overrides

## CloudNativePG subchart (aliased as cnpg)
cnpg:
  enabled: true

## Dragonfly subchart
dragonfly:
  enabled: true
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 50m
      memory: 128Mi

## Qdrant subchart
qdrant:
  enabled: true
  replicaCount: 1
  persistence:
    size: 10Gi
  resources:
    limits:
      cpu: 500m
      memory: 1Gi
    requests:
      cpu: 50m
      memory: 256Mi
  ## Qdrant snapshot/backup configuration
  ## Snapshots create point-in-time backups of collections.
  ## For production, enable snapshots and configure an S3/GCS destination.
  snapshots:
    ## @param qdrant.snapshots.enabled Enable periodic snapshot creation
    enabled: false
    ## @param qdrant.snapshots.schedule Cron schedule for snapshots
    schedule: "0 3 * * *"
    ## @param qdrant.snapshots.destination Snapshot upload destination (s3://bucket/path or gs://bucket/path)
    destination: ""

## Weaviate subchart (disabled by default)
weaviate:
  enabled: false
  ## @param weaviate.multiTenancy.enabled Enable Weaviate multi-tenancy (isolates data per tenant)
  multiTenancy:
    enabled: false

## MongoDB Percona operator subchart (disabled by default)
mongodb:
  enabled: false
  ## Percona Server for MongoDB configuration (passed to psmdb-operator subchart)
  percona:
    ## @param mongodb.percona.enabled Enable PerconaServerMongoDB CRD creation
    enabled: false
    ## @param mongodb.percona.image Percona MongoDB image
    image: "percona/percona-server-mongodb:7.0"
    replsets:
      ## @param mongodb.percona.replsets.members Number of replica set members (3 for HA)
      members: 3
    mongod:
      storage:
        engine: wiredTiger
      net:
        port: 27017
    resources:
      limits:
        cpu: 500m
        memory: 1Gi
      requests:
        cpu: 100m
        memory: 256Mi

## Valkey subchart (alternative to Dragonfly)
valkey:
  enabled: false
  architecture: standalone
  auth:
    enabled: true
    existingSecret: ""
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 50m
      memory: 128Mi
