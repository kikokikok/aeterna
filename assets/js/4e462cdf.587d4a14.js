"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[1347],{9150(n,e,t){t.r(e),t.d(e,{assets:()=>l,contentTitle:()=>o,default:()=>m,frontMatter:()=>s,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"examples/strangler-fig-migration","title":"Strangler Fig Migration with Aeterna","description":"How 300 engineers transform a monolith to microservices using AI-assisted knowledge governance","source":"@site/docs/examples/strangler-fig-migration.md","sourceDirName":"examples","slug":"/examples/strangler-fig-migration","permalink":"/aeterna/docs/examples/strangler-fig-migration","draft":false,"unlisted":false,"editUrl":"https://github.com/kikokikok/aeterna/tree/main/website/docs/examples/strangler-fig-migration.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"Cost Optimization Guide","permalink":"/aeterna/docs/guides/cost-optimization"},"next":{"title":"Example Policies Library","permalink":"/aeterna/docs/examples/policies/"}}');var i=t(4848),a=t(8453);const s={},o="Strangler Fig Migration with Aeterna",l={},c=[{value:"The Scenario: Project Wolf",id:"the-scenario-project-wolf",level:2},{value:"Aeterna&#39;s Role: The Transformation Knowledge Graph",id:"aeternas-role-the-transformation-knowledge-graph",level:2},{value:"Organizational Structure in Aeterna",id:"organizational-structure-in-aeterna",level:2},{value:"Company Layer: Global Standards",id:"company-layer-global-standards",level:3},{value:"Organization Layer: Domain Standards",id:"organization-layer-domain-standards",level:3},{value:"Team Layer: Implementation Standards",id:"team-layer-implementation-standards",level:3},{value:"ADR Library: Capturing Migration Decisions",id:"adr-library-capturing-migration-decisions",level:2},{value:"ADR-001: Strangler Fig Migration Strategy",id:"adr-001-strangler-fig-migration-strategy",level:3},{value:"Related",id:"related",level:2},{value:"Version Lifecycle",id:"version-lifecycle",level:3},{value:"Breaking vs Non-Breaking",id:"breaking-vs-non-breaking",level:3},{value:"Constraints (Enforced by Aeterna)",id:"constraints-enforced-by-aeterna",level:2},{value:"Related",id:"related-1",level:2},{value:"Traffic Migration Schedule",id:"traffic-migration-schedule",level:2},{value:"Constraints",id:"constraints",level:2},{value:"Related",id:"related-2",level:2},{value:"Required Annotations",id:"required-annotations",level:2},{value:"Version Compatibility Matrix",id:"version-compatibility-matrix",level:2},{value:"Registry Entry",id:"registry-entry",level:2},{value:"Constraints",id:"constraints-1",level:2},{value:"Implementation",id:"implementation",level:2},{value:"Translation Registry",id:"translation-registry",level:2},{value:"Constraints",id:"constraints-2",level:2},{value:"Memory Examples by Layer",id:"memory-examples-by-layer",level:3},{value:"Memory Promotion (Memory-R1)",id:"memory-promotion-memory-r1",level:3},{value:"Agent Collaboration Scenarios",id:"agent-collaboration-scenarios",level:2},{value:"Scenario 1: New Developer Onboarding",id:"scenario-1-new-developer-onboarding",level:3},{value:"Scenario 2: Cross-Team Dependency",id:"scenario-2-cross-team-dependency",level:3},{value:"Scenario 3: Migration Decision",id:"scenario-3-migration-decision",level:3},{value:"Governance Dashboard",id:"governance-dashboard",level:2},{value:"Policy Compliance by Team",id:"policy-compliance-by-team",level:3},{value:"Getting Started",id:"getting-started",level:2},{value:"1. Initialize Aeterna for Migration Project",id:"1-initialize-aeterna-for-migration-project",level:3},{value:"2. Import Existing ADRs",id:"2-import-existing-adrs",level:3},{value:"3. Configure CI/CD Integration",id:"3-configure-cicd-integration",level:3},{value:"4. Enable AI Agent Integration",id:"4-enable-ai-agent-integration",level:3},{value:"Summary",id:"summary",level:2}];function d(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"strangler-fig-migration-with-aeterna",children:"Strangler Fig Migration with Aeterna"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"How 300 engineers transform a monolith to microservices using AI-assisted knowledge governance"})}),"\n",(0,i.jsx)(e.p,{children:"This guide demonstrates how Aeterna serves as the knowledge backbone for a multi-year platform transformation using the Strangler Fig pattern."}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"the-scenario-project-wolf",children:"The Scenario: Project Wolf"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:'Starting Point (Legacy "KApp"):'})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Monolithic Java application (2M LOC)"}),"\n",(0,i.jsx)(e.li,{children:"Batch-oriented processing (1M payments/month)"}),"\n",(0,i.jsx)(e.li,{children:"End-of-day reconciliation"}),"\n",(0,i.jsx)(e.li,{children:"Single PostgreSQL database"}),"\n",(0,i.jsx)(e.li,{children:"15 years of accumulated technical debt"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Target State (Autonomous Platform):"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"50M+ payments/month"}),"\n",(0,i.jsx)(e.li,{children:"<30 second latency"}),"\n",(0,i.jsx)(e.li,{children:'~200 versioned microservices ("Bricks")'}),"\n",(0,i.jsx)(e.li,{children:"Cellular multi-tenant architecture"}),"\n",(0,i.jsx)(e.li,{children:"Policy-driven, agent-ready operations"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Timeline:"})," 3 years (2024-2027)\n",(0,i.jsx)(e.strong,{children:"Teams:"})," 12 teams, 300 engineers\n",(0,i.jsx)(e.strong,{children:"Challenge:"})," How do you coordinate this transformation without chaos?"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"aeternas-role-the-transformation-knowledge-graph",children:"Aeterna's Role: The Transformation Knowledge Graph"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                     STRANGLER FIG TRANSFORMATION                             \u2502\n\u2502                                                                              \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n\u2502  \u2502                        AETERNA KNOWLEDGE LAYER                       \u2502    \u2502\n\u2502  \u2502                                                                      \u2502    \u2502\n\u2502  \u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510             \u2502    \u2502\n\u2502  \u2502   \u2502     ADRs     \u2502  \u2502   Policies   \u2502  \u2502   Patterns   \u2502             \u2502    \u2502\n\u2502  \u2502   \u2502              \u2502  \u2502              \u2502  \u2502              \u2502             \u2502    \u2502\n\u2502  \u2502   \u2502 \u2022 Migration  \u2502  \u2502 \u2022 Code rules \u2502  \u2502 \u2022 Brick spec \u2502             \u2502    \u2502\n\u2502  \u2502   \u2502   decisions  \u2502  \u2502 \u2022 API stds   \u2502  \u2502 \u2022 Anti-cors  \u2502             \u2502    \u2502\n\u2502  \u2502   \u2502 \u2022 Tech debt  \u2502  \u2502 \u2022 Security   \u2502  \u2502 \u2022 Wrappers   \u2502             \u2502    \u2502\n\u2502  \u2502   \u2502   payoffs    \u2502  \u2502 \u2022 Testing    \u2502  \u2502 \u2022 Facades    \u2502             \u2502    \u2502\n\u2502  \u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518             \u2502    \u2502\n\u2502  \u2502                              \u2502                                      \u2502    \u2502\n\u2502  \u2502                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                           \u2502    \u2502\n\u2502  \u2502                    \u2502  CONSTRAINT DSL   \u2502                           \u2502    \u2502\n\u2502  \u2502                    \u2502                   \u2502                           \u2502    \u2502\n\u2502  \u2502                    \u2502 "Block if using   \u2502                           \u2502    \u2502\n\u2502  \u2502                    \u2502  legacy patterns" \u2502                           \u2502    \u2502\n\u2502  \u2502                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                           \u2502    \u2502\n\u2502  \u2502                              \u2502                                      \u2502    \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\n\u2502                                 \u2502                                            \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n\u2502  \u2502                        AETERNA MEMORY LAYER                          \u2502    \u2502\n\u2502  \u2502                                                                      \u2502    \u2502\n\u2502  \u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510             \u2502    \u2502\n\u2502  \u2502   \u2502 Team Memory  \u2502  \u2502 Agent Memory \u2502  \u2502  Migration   \u2502             \u2502    \u2502\n\u2502  \u2502   \u2502              \u2502  \u2502              \u2502  \u2502   Learnings  \u2502             \u2502    \u2502\n\u2502  \u2502   \u2502 \u2022 Decisions  \u2502  \u2502 \u2022 What works \u2502  \u2502              \u2502             \u2502    \u2502\n\u2502  \u2502   \u2502 \u2022 Blockers   \u2502  \u2502 \u2022 Edge cases \u2502  \u2502 \u2022 Gotchas    \u2502             \u2502    \u2502\n\u2502  \u2502   \u2502 \u2022 Workarounds\u2502  \u2502 \u2022 Tool prefs \u2502  \u2502 \u2022 Successes  \u2502             \u2502    \u2502\n\u2502  \u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518             \u2502    \u2502\n\u2502  \u2502                                                                      \u2502    \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\n\u2502                                                                              \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502                                                                       \u2502   \u2502\n\u2502  \u2502   MONOLITH (KApp)              \u2502           MICROSERVICES (Wolf)      \u2502   \u2502\n\u2502  \u2502   \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501             \u2502           \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501      \u2502   \u2502\n\u2502  \u2502                                \u2502                                      \u2502   \u2502\n\u2502  \u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   Strangler  \u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                   \u2502   \u2502\n\u2502  \u2502   \u2502  Payment    \u2502\u2500\u2500\u2500\u2500 Fig \u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u25ba\u2502  Payment    \u2502                   \u2502   \u2502\n\u2502  \u2502   \u2502  Module     \u2502   Wrapper    \u2502   \u2502  Service    \u2502                   \u2502   \u2502\n\u2502  \u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518              \u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                   \u2502   \u2502\n\u2502  \u2502                                \u2502                                      \u2502   \u2502\n\u2502  \u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510              \u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                   \u2502   \u2502\n\u2502  \u2502   \u2502  Liquidity  \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u25ba\u2502  Liquidity  \u2502                   \u2502   \u2502\n\u2502  \u2502   \u2502  Module     \u2502              \u2502   \u2502  Service    \u2502                   \u2502   \u2502\n\u2502  \u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518              \u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                   \u2502   \u2502\n\u2502  \u2502                                \u2502                                      \u2502   \u2502\n\u2502  \u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510              \u2502                                      \u2502   \u2502\n\u2502  \u2502   \u2502  Legacy     \u2502  (not yet    \u2502                                      \u2502   \u2502\n\u2502  \u2502   \u2502  Modules    \u2502   migrated)  \u2502                                      \u2502   \u2502\n\u2502  \u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518              \u2502                                      \u2502   \u2502\n\u2502  \u2502                                \u2502                                      \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2502                                                                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n'})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"organizational-structure-in-aeterna",children:"Organizational Structure in Aeterna"}),"\n",(0,i.jsx)(e.h3,{id:"company-layer-global-standards",children:"Company Layer: Global Standards"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:'# knowledge/company/wolf-corp/policies/migration-baseline.yaml\nid: migration-baseline\ntype: policy\nlayer: company\nmode: mandatory\nmerge_strategy: merge\n\nrules:\n  # No new code in monolith\n  - id: no-monolith-features\n    target: file\n    operator: must_not_match\n    pattern: "src/main/java/com/legacy/kapp/.*\\\\.java$"\n    severity: block\n    message: |\n      BLOCKED: No new features in legacy KApp.\n      All new development must use Wolf microservices.\n      See ADR-001: Strangler Fig Migration Strategy\n  \n  # All new services must be "Bricks"\n  - id: brick-pattern-required\n    target: code\n    operator: must_match\n    pattern: "@Brick\\\\(version\\\\s*=\\\\s*\\"\\\\d+\\\\.\\\\d+\\""\n    severity: warn\n    message: |\n      All new services must follow the Brick pattern.\n      See pattern://wolf/brick-specification\n  \n  # API versioning required\n  - id: api-versioning\n    target: config\n    operator: must_match\n    pattern: "api\\\\.version:\\\\s*v[0-9]+"\n    severity: block\n    message: |\n      All APIs must be versioned (v1, v2, etc.)\n      See ADR-015: API Versioning Strategy\n'})}),"\n",(0,i.jsx)(e.h3,{id:"organization-layer-domain-standards",children:"Organization Layer: Domain Standards"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:'# knowledge/org/platform-engineering/policies/payments-domain.yaml\nid: payments-domain-standards\ntype: policy\nlayer: org\nmode: mandatory\n\nrules:\n  # Payment services must use TigerBeetle for ledger\n  - id: ledger-technology\n    target: dependency\n    operator: must_use\n    pattern: "tigerbeetle-client"\n    severity: block\n    message: |\n      Payment services MUST use TigerBeetle for ledger operations.\n      PostgreSQL is NOT approved for financial transactions.\n      See ADR-023: Ledger Technology Selection\n  \n  # Idempotency required\n  - id: idempotency-required\n    target: code\n    operator: must_match\n    pattern: "@Idempotent|idempotency_key"\n    severity: block\n    message: |\n      All payment operations MUST be idempotent.\n      See pattern://wolf/idempotent-operations\n  \n  # Double-entry accounting\n  - id: double-entry\n    target: code\n    operator: must_match\n    pattern: "debit.*credit|credit.*debit"\n    severity: warn\n    message: |\n      Financial operations should use double-entry accounting.\n      See ADR-024: Accounting Model\n'})}),"\n",(0,i.jsx)(e.h3,{id:"team-layer-implementation-standards",children:"Team Layer: Implementation Standards"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:'# knowledge/team/payments-core/policies/team-standards.yaml\nid: payments-core-standards\ntype: policy\nlayer: team\nmode: optional\nmerge_strategy: merge\n\nrules:\n  # Team uses Kotlin for new services\n  - id: kotlin-preferred\n    target: file\n    operator: must_match\n    pattern: ".*\\\\.kt$"\n    severity: info\n    message: |\n      Payments Core team prefers Kotlin for new services.\n      Java is acceptable for legacy integration.\n  \n  # Circuit breaker on all external calls\n  - id: circuit-breaker\n    target: code\n    operator: must_match\n    pattern: "@CircuitBreaker|resilience4j"\n    severity: warn\n    message: |\n      External service calls should use circuit breakers.\n      See pattern://payments-core/resilience-patterns\n'})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"adr-library-capturing-migration-decisions",children:"ADR Library: Capturing Migration Decisions"}),"\n",(0,i.jsx)(e.h3,{id:"adr-001-strangler-fig-migration-strategy",children:"ADR-001: Strangler Fig Migration Strategy"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-markdown",children:"# knowledge/company/wolf-corp/adrs/adr-001-strangler-fig.md\n\n# ADR-001: Strangler Fig Migration Strategy\n\n## Status\nAccepted (2024-01-15)\n\n## Context\nWe need to transform KApp (2M LOC monolith) to Wolf (microservices) \nwhile maintaining 99.9% uptime and serving existing customers.\n\nBig-bang rewrites fail. We need incremental transformation.\n\n## Decision\nWe will use the **Strangler Fig Pattern**:\n\n1. **Wrap**: New facade intercepts requests to legacy modules\n2. **Replace**: Gradually implement functionality in new services\n3. **Retire**: Remove legacy code when traffic fully migrated\n\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:" \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n \u2502            API Gateway                   \u2502\n \u2502                                          \u2502\n \u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n \u2502   \u2502      Strangler Facade          \u2502    \u2502\n \u2502   \u2502                                \u2502    \u2502\n \u2502   \u2502  if (feature_flag.new_service) \u2502    \u2502\n \u2502   \u2502    \u2192 route to Wolf service     \u2502    \u2502\n \u2502   \u2502  else                          \u2502    \u2502\n \u2502   \u2502    \u2192 route to KApp module      \u2502    \u2502\n \u2502   \u2502                                \u2502    \u2502\n \u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\n \u2502              \u2502              \u2502            \u2502\n \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                \u25bc              \u25bc\n        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n        \u2502   Wolf    \u2502  \u2502   KApp    \u2502\n        \u2502  Service  \u2502  \u2502  Module   \u2502\n        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'\n## Consequences\n\n### Positive\n- Zero downtime migration\n- Incremental risk reduction\n- Team autonomy (different teams migrate different modules)\n- Rollback capability per feature\n\n### Negative\n- Temporary complexity (two systems)\n- Need robust feature flag infrastructure\n- Requires comprehensive testing of both paths\n\n### Constraints (Enforced by Aeterna)\n\n```yaml\nconstraints:\n  - operator: must_not_exist\n    target: file\n    pattern: "src/main/java/com/legacy/kapp/new_feature_*"\n    severity: block\n    message: "No new features in legacy KApp - use Wolf services"\n  \n  - operator: must_use\n    target: dependency\n    pattern: "strangler-facade-sdk"\n    severity: warn\n    message: "Use official SDK for strangler facades"\n'})}),"\n",(0,i.jsx)(e.h2,{id:"related",children:"Related"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"ADR-002: Feature Flag Strategy"}),"\n",(0,i.jsx)(e.li,{children:"ADR-003: Traffic Shadowing for Validation"}),"\n",(0,i.jsx)(e.li,{children:"Pattern: Strangler Facade Implementation"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'\n### ADR-015: API Versioning Strategy\n\n```markdown\n# knowledge/company/wolf-corp/adrs/adr-015-api-versioning.md\n\n# ADR-015: API Versioning Strategy\n\n## Status\nAccepted (2024-03-01)\n\n## Context\nWith 200 microservices and 12 teams, we need consistent API evolution\nwithout breaking consumers. Migration period means both KApp and Wolf\nconsumers exist simultaneously.\n\n## Decision\n**URL Path Versioning** with **Sunset Headers**:\n\n```text\n# Version in path\nPOST /api/v2/payments/initiate\n\n# Sunset header for deprecation\nSunset: Sat, 01 Jan 2025 00:00:00 GMT\nDeprecation: true\nLink: </api/v3/payments/initiate>; rel="successor-version"\n'})}),"\n",(0,i.jsx)(e.h3,{id:"version-lifecycle",children:"Version Lifecycle"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"Stage"}),(0,i.jsx)(e.th,{children:"Duration"}),(0,i.jsx)(e.th,{children:"Policy"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"Current"})}),(0,i.jsx)(e.td,{children:"Indefinite"}),(0,i.jsx)(e.td,{children:"Full support"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"Deprecated"})}),(0,i.jsx)(e.td,{children:"6 months"}),(0,i.jsx)(e.td,{children:"Bug fixes only, sunset header"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"Retired"})}),(0,i.jsx)(e.td,{children:"-"}),(0,i.jsx)(e.td,{children:"Returns 410 Gone"})]})]})]}),"\n",(0,i.jsx)(e.h3,{id:"breaking-vs-non-breaking",children:"Breaking vs Non-Breaking"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Non-breaking (no version bump):"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Adding optional fields"}),"\n",(0,i.jsx)(e.li,{children:"Adding new endpoints"}),"\n",(0,i.jsx)(e.li,{children:"Performance improvements"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Breaking (version bump required):"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Removing fields"}),"\n",(0,i.jsx)(e.li,{children:"Changing field types"}),"\n",(0,i.jsx)(e.li,{children:"Changing endpoint behavior"}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"constraints-enforced-by-aeterna",children:"Constraints (Enforced by Aeterna)"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:'constraints:\n  - operator: must_match\n    target: code\n    pattern: "@ApiVersion\\\\(\\"v[0-9]+\\"\\\\)"\n    severity: block\n    message: "All API endpoints must declare version"\n  \n  - operator: must_not_match\n    target: code\n    pattern: "@DeleteMapping.*v1.*payment"\n    severity: block\n    message: "Cannot remove v1 payment endpoints until 2025-06-01"\n'})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"\n### ADR-023: Ledger Technology Selection\n\n```markdown\n# knowledge/org/platform-engineering/adrs/adr-023-ledger-tech.md\n\n# ADR-023: Ledger Technology Selection\n\n## Status\nAccepted (2024-04-15)\n\n## Context\nPayment services require ACID guarantees for financial transactions.\nCurrent PostgreSQL setup cannot guarantee:\n- Double-entry accounting consistency\n- Sub-millisecond balance checks\n- 50M transactions/month throughput\n\n## Options Considered\n\n| Option | Throughput | Latency | Consistency | Team Expertise |\n|--------|------------|---------|-------------|----------------|\n| PostgreSQL | 1M/month | 50ms | ACID | High |\n| CockroachDB | 10M/month | 20ms | Serializable | Medium |\n| TigerBeetle | 100M/month | \\<1ms | Strict Serial | Low |\n| Custom Ledger | Variable | Variable | Custom | None |\n\n## Decision\n**TigerBeetle** for all financial ledger operations.\n\n### Rationale\n1. Purpose-built for financial transactions\n2. 1000x faster than PostgreSQL for balance operations\n3. Built-in double-entry accounting primitives\n4. Deterministic - same inputs always produce same outputs\n\n### Migration Path\n"})}),"\n",(0,i.jsx)(e.p,{children:"Phase 1: Shadow mode (TigerBeetle mirrors PostgreSQL)\nPhase 2: Read from TigerBeetle, write to both\nPhase 3: Write to TigerBeetle, async sync to PostgreSQL\nPhase 4: TigerBeetle primary, PostgreSQL retired"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'\n## Constraints (Enforced by Aeterna)\n\n```yaml\nconstraints:\n  - operator: must_use\n    target: dependency\n    pattern: "tigerbeetle-client"\n    appliesTo: ["services/payments-*", "services/ledger-*"]\n    severity: block\n    message: "Payment services must use TigerBeetle"\n  \n  - operator: must_not_use\n    target: code\n    pattern: "JdbcTemplate.*balance|UPDATE.*account.*balance"\n    appliesTo: ["services/payments-*"]\n    severity: block\n    message: "Direct PostgreSQL balance updates prohibited"\n'})}),"\n",(0,i.jsx)(e.h2,{id:"related-1",children:"Related"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"ADR-024: Double-Entry Accounting Model"}),"\n",(0,i.jsx)(e.li,{children:"ADR-025: Reconciliation Strategy"}),"\n",(0,i.jsx)(e.li,{children:"Pattern: TigerBeetle Integration"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"\n---\n\n## Patterns Library: Reusable Solutions\n\n### Pattern: Strangler Facade\n\n```markdown\n# knowledge/company/wolf-corp/patterns/strangler-facade.md\n\n# Pattern: Strangler Facade\n\n## Problem\nHow do you incrementally migrate traffic from a legacy module to a \nnew microservice without downtime?\n\n## Solution\nImplement a facade that intercepts requests and routes them based on\nfeature flags, gradually shifting traffic to the new service.\n\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                     Strangler Facade                             \u2502\n\u2502                                                                  \u2502\n\u2502   Request \u2500\u2500\u25ba  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u2502\n\u2502                \u2502         Router                          \u2502      \u2502\n\u2502                \u2502                                         \u2502      \u2502\n\u2502                \u2502  1. Check feature flag                  \u2502      \u2502\n\u2502                \u2502  2. Check traffic percentage            \u2502      \u2502\n\u2502                \u2502  3. Check client tier (Platinum/Gold)   \u2502      \u2502\n\u2502                \u2502  4. Route to appropriate backend        \u2502      \u2502\n\u2502                \u2502                                         \u2502      \u2502\n\u2502                \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2502\n\u2502                           \u2502              \u2502                       \u2502\n\u2502                     \u250c\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2510                \u2502\n\u2502                     \u2502   Wolf    \u2502  \u2502   KApp    \u2502                \u2502\n\u2502                     \u2502  Service  \u2502  \u2502  Module   \u2502                \u2502\n\u2502                     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                \u2502\n\u2502                                                                  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'\n## Implementation\n\n```kotlin\n@Component\nclass PaymentStranglerFacade(\n    private val featureFlags: FeatureFlagService,\n    private val wolfClient: PaymentWolfClient,\n    private val kappClient: PaymentKAppClient,\n    private val metrics: MeterRegistry\n) {\n    @Brick(version = "2.1", domain = "payments")\n    suspend fun initiatePayment(request: PaymentRequest): PaymentResponse {\n        val routingDecision = decideRouting(request)\n        \n        return when (routingDecision) {\n            is RouteToWolf -> {\n                metrics.counter("strangler.wolf.requests").increment()\n                wolfClient.initiate(request)\n            }\n            is RouteToKApp -> {\n                metrics.counter("strangler.kapp.requests").increment()\n                kappClient.initiate(request)\n            }\n            is ShadowBoth -> {\n                // Send to both, return KApp result, compare async\n                val kappResult = kappClient.initiate(request)\n                launch { shadowCompare(request, kappResult) }\n                kappResult\n            }\n        }\n    }\n    \n    private fun decideRouting(request: PaymentRequest): RoutingDecision {\n        // Platinum clients get Wolf first\n        if (request.clientTier == Tier.PLATINUM && \n            featureFlags.isEnabled("wolf.payments.platinum")) {\n            return RouteToWolf\n        }\n        \n        // Percentage rollout for others\n        val percentage = featureFlags.getPercentage("wolf.payments.rollout")\n        if (Random.nextInt(100) < percentage) {\n            return RouteToWolf\n        }\n        \n        // Shadow mode for validation\n        if (featureFlags.isEnabled("wolf.payments.shadow")) {\n            return ShadowBoth\n        }\n        \n        return RouteToKApp\n    }\n}\n'})}),"\n",(0,i.jsx)(e.h2,{id:"traffic-migration-schedule",children:"Traffic Migration Schedule"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"Week"}),(0,i.jsx)(e.th,{children:"Platinum"}),(0,i.jsx)(e.th,{children:"Gold"}),(0,i.jsx)(e.th,{children:"Standard"}),(0,i.jsx)(e.th,{children:"Shadow"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"1-2"}),(0,i.jsx)(e.td,{children:"Shadow"}),(0,i.jsx)(e.td,{children:"-"}),(0,i.jsx)(e.td,{children:"-"}),(0,i.jsx)(e.td,{children:"100%"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"3-4"}),(0,i.jsx)(e.td,{children:"10%"}),(0,i.jsx)(e.td,{children:"Shadow"}),(0,i.jsx)(e.td,{children:"-"}),(0,i.jsx)(e.td,{children:"100%"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"5-6"}),(0,i.jsx)(e.td,{children:"50%"}),(0,i.jsx)(e.td,{children:"10%"}),(0,i.jsx)(e.td,{children:"Shadow"}),(0,i.jsx)(e.td,{children:"-"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"7-8"}),(0,i.jsx)(e.td,{children:"100%"}),(0,i.jsx)(e.td,{children:"50%"}),(0,i.jsx)(e.td,{children:"10%"}),(0,i.jsx)(e.td,{children:"-"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"9-10"}),(0,i.jsx)(e.td,{children:"100%"}),(0,i.jsx)(e.td,{children:"100%"}),(0,i.jsx)(e.td,{children:"50%"}),(0,i.jsx)(e.td,{children:"-"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"11-12"}),(0,i.jsx)(e.td,{children:"100%"}),(0,i.jsx)(e.td,{children:"100%"}),(0,i.jsx)(e.td,{children:"100%"}),(0,i.jsx)(e.td,{children:"-"})]})]})]}),"\n",(0,i.jsx)(e.h2,{id:"constraints",children:"Constraints"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:'constraints:\n  - operator: must_use\n    target: code\n    pattern: "StranglerFacade|@Strangler"\n    appliesTo: ["services/*-facade"]\n    severity: block\n    message: "Facade services must use Strangler pattern"\n  \n  - operator: must_match\n    target: code\n    pattern: "metrics\\\\.counter\\\\(\\"strangler\\\\."\n    severity: warn\n    message: "Strangler facades should emit routing metrics"\n'})}),"\n",(0,i.jsx)(e.h2,{id:"related-2",children:"Related"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"ADR-001: Strangler Fig Migration Strategy"}),"\n",(0,i.jsx)(e.li,{children:"ADR-002: Feature Flag Strategy"}),"\n",(0,i.jsx)(e.li,{children:"Pattern: Shadow Testing"}),"\n",(0,i.jsx)(e.li,{children:"Pattern: Reconciler Bot"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'\n### Pattern: Brick Specification\n\n```markdown\n# knowledge/company/wolf-corp/patterns/brick-specification.md\n\n# Pattern: Brick Specification\n\n## Problem\nHow do you ensure 200+ microservices across 12 teams maintain \nconsistency in contracts, versioning, and observability?\n\n## Solution\nEvery service function is a **Brick**: a versioned, atomic, \nobservable unit of business capability.\n\n## Brick Anatomy\n\n```kotlin\n@Brick(\n    version = "2.3",\n    domain = "payments",\n    capability = "initiate-payment",\n    owner = "payments-core-team",\n    sla = Sla(p99 = 100.ms, availability = 99.9)\n)\n@Idempotent(key = "request.idempotencyKey")\n@CircuitBreaker(name = "payment-initiate")\n@Metered\n@Traced\nsuspend fun initiatePayment(\n    @Valid request: PaymentInitiateRequest\n): PaymentInitiateResponse {\n    // Implementation\n}\n'})}),"\n",(0,i.jsx)(e.h2,{id:"required-annotations",children:"Required Annotations"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"Annotation"}),(0,i.jsx)(e.th,{children:"Purpose"}),(0,i.jsx)(e.th,{children:"Required"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"@Brick"})}),(0,i.jsx)(e.td,{children:"Version, domain, ownership"}),(0,i.jsx)(e.td,{children:"\u2705 Yes"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"@Idempotent"})}),(0,i.jsx)(e.td,{children:"Exactly-once semantics"}),(0,i.jsx)(e.td,{children:"\u2705 For mutations"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"@CircuitBreaker"})}),(0,i.jsx)(e.td,{children:"Fault isolation"}),(0,i.jsx)(e.td,{children:"\u2705 For external calls"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"@Metered"})}),(0,i.jsx)(e.td,{children:"Business metrics"}),(0,i.jsx)(e.td,{children:"\u2705 Yes"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"@Traced"})}),(0,i.jsx)(e.td,{children:"Distributed tracing"}),(0,i.jsx)(e.td,{children:"\u2705 Yes"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"@Cached"})}),(0,i.jsx)(e.td,{children:"Response caching"}),(0,i.jsx)(e.td,{children:"Optional"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"@RateLimited"})}),(0,i.jsx)(e.td,{children:"Throttling"}),(0,i.jsx)(e.td,{children:"Optional"})]})]})]}),"\n",(0,i.jsx)(e.h2,{id:"version-compatibility-matrix",children:"Version Compatibility Matrix"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"Brick Version Format: MAJOR.MINOR\n\nMAJOR bump (breaking):\n  - Request schema changes\n  - Response schema changes  \n  - Semantic behavior changes\n\nMINOR bump (compatible):\n  - Performance improvements\n  - Bug fixes\n  - New optional fields\n"})}),"\n",(0,i.jsx)(e.h2,{id:"registry-entry",children:"Registry Entry"}),"\n",(0,i.jsx)(e.p,{children:"Every Brick is registered in the Wolf Registry:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:'# registry/payments/initiate-payment.yaml\nbrick:\n  id: payments.initiate-payment\n  version: "2.3"\n  domain: payments\n  owner: payments-core-team\n  \n  contract:\n    request: PaymentInitiateRequest\n    response: PaymentInitiateResponse\n    errors:\n      - INVALID_AMOUNT\n      - INSUFFICIENT_FUNDS\n      - DUPLICATE_REQUEST\n  \n  dependencies:\n    - ledger.create-transfer@2.x\n    - risk.evaluate-transaction@1.x\n    - connectivity.send-to-rail@3.x\n  \n  sla:\n    p50: 20ms\n    p99: 100ms\n    availability: 99.9%\n  \n  migration:\n    strangler_facade: payment-strangler-facade\n    legacy_module: com.legacy.kapp.payments.PaymentProcessor\n    traffic_percentage: 75\n'})}),"\n",(0,i.jsx)(e.h2,{id:"constraints-1",children:"Constraints"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:'constraints:\n  - operator: must_match\n    target: code\n    pattern: "@Brick\\\\(.*version.*domain.*\\\\)"\n    appliesTo: ["services/*/src/**/*.kt"]\n    severity: block\n    message: "All service functions must be annotated as Bricks"\n  \n  - operator: must_match\n    target: code\n    pattern: "@Idempotent"\n    appliesTo: ["**/*Command.kt", "**/*Mutation.kt"]\n    severity: block\n    message: "All mutations must be idempotent"\n  \n  - operator: must_match\n    target: file\n    pattern: "registry/.*/.*\\\\.yaml"\n    severity: warn\n    message: "Bricks should be registered in the Wolf Registry"\n'})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'\n### Pattern: Anti-Corruption Layer\n\n```markdown\n# knowledge/company/wolf-corp/patterns/anti-corruption-layer.md\n\n# Pattern: Anti-Corruption Layer\n\n## Problem\nHow do you prevent legacy domain models from "corrupting" the clean\ndesign of new microservices during migration?\n\n## Solution\nImplement a translation layer that converts between legacy and \nmodern domain models, keeping them strictly separated.\n\n```text\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    Wolf Service (Clean Domain)                   \u2502\n\u2502                                                                  \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502   \u2502                  Domain Model                            \u2502   \u2502\n\u2502   \u2502                                                          \u2502   \u2502\n\u2502   \u2502   Payment {                                              \u2502   \u2502\n\u2502   \u2502     id: PaymentId                                        \u2502   \u2502\n\u2502   \u2502     amount: Money                                        \u2502   \u2502\n\u2502   \u2502     status: PaymentStatus                                \u2502   \u2502\n\u2502   \u2502     initiatedAt: Instant                                 \u2502   \u2502\n\u2502   \u2502   }                                                      \u2502   \u2502\n\u2502   \u2502                                                          \u2502   \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2502                              \u2502                                   \u2502\n\u2502                              \u25bc                                   \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502   \u2502              Anti-Corruption Layer                       \u2502   \u2502\n\u2502   \u2502                                                          \u2502   \u2502\n\u2502   \u2502   - Translates KApp \u2192 Wolf models                        \u2502   \u2502\n\u2502   \u2502   - Translates Wolf \u2192 KApp models                        \u2502   \u2502\n\u2502   \u2502   - Handles missing/extra fields                         \u2502   \u2502\n\u2502   \u2502   - Normalizes enums and codes                           \u2502   \u2502\n\u2502   \u2502                                                          \u2502   \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2502                              \u2502                                   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                               \u2502\n                               \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    KApp (Legacy Domain)                          \u2502\n\u2502                                                                  \u2502\n\u2502   PAYMENT_RECORD {                                               \u2502\n\u2502     PAY_ID: VARCHAR(20)                                          \u2502\n\u2502     AMT: DECIMAL(15,2)                                           \u2502\n\u2502     CCY: CHAR(3)                                                 \u2502\n\u2502     STAT_CD: CHAR(2)                                             \u2502\n\u2502     CRE_DT: DATE                                                 \u2502\n\u2502     CRE_TM: TIME                                                 \u2502\n\u2502   }                                                              \u2502\n\u2502                                                                  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n'})}),"\n",(0,i.jsx)(e.h2,{id:"implementation",children:"Implementation"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-kotlin",children:'@Component\nclass PaymentAntiCorruptionLayer {\n    \n    /**\n     * Translate legacy KApp payment to Wolf domain model\n     */\n    fun fromLegacy(record: KAppPaymentRecord): Payment {\n        return Payment(\n            id = PaymentId(record.payId),\n            amount = Money(\n                value = record.amt,\n                currency = Currency.getInstance(record.ccy)\n            ),\n            status = translateStatus(record.statCd),\n            initiatedAt = combineDateTime(record.creDt, record.creTm)\n        )\n    }\n    \n    /**\n     * Translate Wolf payment to legacy KApp format\n     */\n    fun toLegacy(payment: Payment): KAppPaymentRecord {\n        return KAppPaymentRecord(\n            payId = payment.id.value.take(20),  // Truncate to legacy limit\n            amt = payment.amount.value,\n            ccy = payment.amount.currency.currencyCode,\n            statCd = reverseTranslateStatus(payment.status),\n            creDt = payment.initiatedAt.toLocalDate(),\n            creTm = payment.initiatedAt.toLocalTime()\n        )\n    }\n    \n    private fun translateStatus(legacyCode: String): PaymentStatus {\n        return when (legacyCode) {\n            "01" -> PaymentStatus.PENDING\n            "02" -> PaymentStatus.PROCESSING\n            "03" -> PaymentStatus.COMPLETED\n            "04" -> PaymentStatus.FAILED\n            "99" -> PaymentStatus.CANCELLED\n            else -> {\n                logger.warn("Unknown legacy status: $legacyCode")\n                PaymentStatus.UNKNOWN\n            }\n        }\n    }\n}\n'})}),"\n",(0,i.jsx)(e.h2,{id:"translation-registry",children:"Translation Registry"}),"\n",(0,i.jsx)(e.p,{children:"Document all translations for team reference:"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"Wolf Field"}),(0,i.jsx)(e.th,{children:"KApp Field"}),(0,i.jsx)(e.th,{children:"Transformation"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"id: PaymentId"})}),(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"PAY_ID: VARCHAR(20)"})}),(0,i.jsx)(e.td,{children:"Truncate to 20 chars"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"amount.value"})}),(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"AMT: DECIMAL(15,2)"})}),(0,i.jsx)(e.td,{children:"Direct mapping"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"amount.currency"})}),(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"CCY: CHAR(3)"})}),(0,i.jsx)(e.td,{children:"ISO 4217 code"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"status"})}),(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"STAT_CD: CHAR(2)"})}),(0,i.jsx)(e.td,{children:"Enum translation"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"initiatedAt"})}),(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"CRE_DT + CRE_TM"})}),(0,i.jsx)(e.td,{children:"Combine date+time"})]})]})]}),"\n",(0,i.jsx)(e.h2,{id:"constraints-2",children:"Constraints"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:'constraints:\n  - operator: must_not_match\n    target: code\n    pattern: "KApp.*Record|PAYMENT_RECORD"\n    appliesTo: ["services/*/domain/**"]\n    severity: block\n    message: |\n      Legacy types must not leak into domain layer.\n      Use Anti-Corruption Layer for translation.\n  \n  - operator: must_exist\n    target: file\n    pattern: "**/acl/*Translator.kt"\n    appliesTo: ["services/*-service"]\n    severity: warn\n    message: "Services should have ACL translators"\n'})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'\n---\n\n## Memory Layer: Team Learnings\n\n### How AI Agents Use Migration Knowledge\n\n```rust\n// Agent working on payments-service asks about migration\nlet context = TenantContext::new("wolf-corp")\n    .with_org("platform-engineering")\n    .with_team("payments-core")\n    .with_project("payments-service");\n\n// Search memory for migration learnings\nlet learnings = memory.search(SearchQuery {\n    query: "strangler facade gotchas payment migration",\n    layers: vec![\n        MemoryLayer::Project,  // Project-specific issues\n        MemoryLayer::Team,     // Team discoveries\n        MemoryLayer::Org,      // Org-wide patterns\n        MemoryLayer::Company,  // Global lessons\n    ],\n    context: context.clone(),\n}).await?;\n\n// Results (ordered by layer precedence):\n// 1. [Project] "Payment facade race condition with KApp - use distributed lock"\n// 2. [Team] "TigerBeetle connection pooling: max 10 connections per service"\n// 3. [Org] "Always shadow test for 2 weeks before traffic shift"\n// 4. [Company] "Feature flags: use LaunchDarkly SDK v7+ for Kotlin"\n\n// Check constraints before writing code\nlet violations = knowledge.check_constraints(\n    ConstraintContext::new()\n        .with_file("src/main/kotlin/PaymentService.kt")\n        .with_code(proposed_code)\n        .with_dependencies(&["postgresql-client"])  // Trying to use PostgreSQL\n).await?;\n\n// Result: BLOCKED\n// "Payment services must use TigerBeetle for ledger operations.\n//  See ADR-023: Ledger Technology Selection"\n'})}),"\n",(0,i.jsx)(e.h3,{id:"memory-examples-by-layer",children:"Memory Examples by Layer"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'COMPANY LAYER (Global Lessons)\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\u2022 "Strangler facades need circuit breakers on BOTH backends"\n\u2022 "Shadow testing found 3% discrepancy rate is normal during migration"\n\u2022 "Never migrate during quarter-end close periods"\n\u2022 "LaunchDarkly flags: always set default to legacy path"\n\nORG LAYER (Platform Engineering)\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\u2022 "TigerBeetle: batch transfers for >100 operations"\n\u2022 "Temporal workflows: use 30-day retention for audit"\n\u2022 "ClickHouse: partition by week for payment analytics"\n\u2022 "CockroachDB: set transaction priority for critical paths"\n\nTEAM LAYER (Payments Core)\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\u2022 "Payment idempotency: hash(client_id + reference + amount)"\n\u2022 "KApp STAT_CD \'05\' is undocumented - means \'pending_review\'"\n\u2022 "Reconciler bot: run at 3am UTC to avoid peak load"\n\u2022 "Legacy API timeout: 30s (not 10s as documented)"\n\nPROJECT LAYER (payments-service)\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\u2022 "CircuitBreaker: 50% threshold, 60s timeout for KApp calls"\n\u2022 "PaymentInitiateRequest: amount must be positive (legacy allows 0)"\n\u2022 "Shadow mode enabled for Platinum clients since 2024-06-01"\n\u2022 "Deployment: blue-green with 10min bake time"\n'})}),"\n",(0,i.jsx)(e.h3,{id:"memory-promotion-memory-r1",children:"Memory Promotion (Memory-R1)"}),"\n",(0,i.jsx)(e.p,{children:"When a developer discovers something valuable, agents can promote it:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:'// Developer finds a critical gotcha\nmemory.add(MemoryEntry {\n    content: "KApp payment module has 20-char limit on payment ID. \n              Wolf uses UUIDs (36 chars). ACL must truncate or hash.",\n    layer: MemoryLayer::Project,\n    metadata: MemoryMetadata {\n        tags: vec!["gotcha", "acl", "migration"],\n        source: MemorySource::Conversation { message_id: "msg_123" },\n        ..Default::default()\n    },\n}).await?;\n\n// Later: This memory gets positive feedback from multiple team members\nmemory.feedback(MemoryFeedback {\n    memory_id: mem_id,\n    reward: 0.9,  // Very helpful\n    feedback_type: FeedbackType::Positive,\n}).await?;\n\n// Memory-R1 autonomous optimization promotes it to team layer\n// Now ALL payments-core team members benefit from this discovery\n'})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"agent-collaboration-scenarios",children:"Agent Collaboration Scenarios"}),"\n",(0,i.jsx)(e.h3,{id:"scenario-1-new-developer-onboarding",children:"Scenario 1: New Developer Onboarding"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'Developer: "I need to add a new payment validation rule"\n\nAI Agent (with Aeterna):\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\n1. [Knowledge Check] Searching ADRs and policies...\n   \n   Found:\n   \u2022 ADR-001: No new features in legacy KApp\n   \u2022 Policy: All new code must be in Wolf services\n   \u2022 Pattern: Brick Specification required\n\n2. [Memory Search] Looking for similar work...\n   \n   Found (Team Memory):\n   \u2022 "Validation rules go in payments-validator service"\n   \u2022 "Use @ValidationBrick annotation"\n   \u2022 "Legacy PaymentValidator.java is frozen - don\'t touch"\n\n3. [Constraint Check] Validating your approach...\n   \n   \u26a0\ufe0f WARNING: You\'re editing src/main/java/com/legacy/kapp/\n   This is BLOCKED by company policy.\n   \n   \u2705 SUGGESTED: Create new Brick in services/payments-validator/\n\n4. [Generate Code] Based on patterns and team standards...\n\n   @Brick(version = "1.0", domain = "payments")\n   @ValidationBrick\n   class AmountRangeValidator : PaymentValidator {\n       override fun validate(payment: Payment): ValidationResult {\n           // Implementation following team patterns\n       }\n   }\n'})}),"\n",(0,i.jsx)(e.h3,{id:"scenario-2-cross-team-dependency",children:"Scenario 2: Cross-Team Dependency"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'Liquidity Team: "We need payment status for forecasting"\n\nAI Agent (with Aeterna):\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\n1. [Knowledge Check] Checking API contracts...\n   \n   Found (Registry):\n   \u2022 payments.get-status@v2 - Available\n   \u2022 payments.subscribe-status@v1 - Available (Event-driven)\n   \n   ADR-015: Use v2 APIs (v1 deprecated)\n\n2. [Memory Search] Cross-team integration patterns...\n   \n   Found (Org Memory):\n   \u2022 "Prefer event subscription over polling for status"\n   \u2022 "Payment events on Kafka topic: wolf.payments.status"\n   \u2022 "Use Avro schemas from schema-registry"\n\n3. [Constraint Check] Validating integration...\n   \n   \u2705 OK: Using approved v2 API\n   \u2705 OK: Event-driven pattern preferred\n   \u26a0\ufe0f WARNING: Liquidity services should not call payment \n      ledger directly (ADR-023)\n\n4. [Generate Integration]\n   \n   @Brick(version = "1.0", domain = "liquidity")\n   class PaymentStatusSubscriber(\n       private val kafka: KafkaConsumer<PaymentStatusEvent>\n   ) {\n       @EventHandler\n       suspend fun onPaymentStatus(event: PaymentStatusEvent) {\n           // Update forecast based on payment status\n       }\n   }\n'})}),"\n",(0,i.jsx)(e.h3,{id:"scenario-3-migration-decision",children:"Scenario 3: Migration Decision"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'Tech Lead: "Should we migrate the FX module next?"\n\nAI Agent (with Aeterna):\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\n1. [Knowledge Check] Migration status and dependencies...\n   \n   Current State:\n   \u2022 Payments: 75% migrated (Wolf primary)\n   \u2022 Liquidity: 40% migrated (Shadow testing)\n   \u2022 FX: 0% migrated (Legacy only)\n   \u2022 Risk: 0% migrated (Legacy only)\n   \n   Dependency Graph:\n   \u2022 FX depends on: Payments (\u2705), Risk (\u274c)\n   \u2022 Risk depends on: Payments (\u2705), Liquidity (\u26a0\ufe0f)\n\n2. [Memory Search] Previous migration learnings...\n   \n   Found (Company Memory):\n   \u2022 "Always migrate dependencies first"\n   \u2022 "FX has complex KApp stored procedures - 3 month estimate"\n   \u2022 "Risk module: Shadow testing revealed 5% discrepancy"\n\n3. [ADR Recommendation]\n   \n   Based on analysis, I recommend:\n   \n   \u274c NOT ready to migrate FX\n   \n   Reasons:\n   1. Risk module (dependency) not migrated\n   2. Liquidity (transitive dependency) still in shadow\n   3. FX stored procedures need refactoring first\n   \n   Suggested sequence:\n   1. Complete Liquidity migration (4 weeks)\n   2. Migrate Risk module (6 weeks)\n   3. Then migrate FX (12 weeks)\n   \n   Want me to draft an ADR for the migration sequence?\n'})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"governance-dashboard",children:"Governance Dashboard"}),"\n",(0,i.jsx)(e.h3,{id:"policy-compliance-by-team",children:"Policy Compliance by Team"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                 WOLF MIGRATION GOVERNANCE                        \u2502\n\u2502                 Week 24 / 2024                                   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                  \u2502\n\u2502  POLICY COMPLIANCE                                               \u2502\n\u2502  \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501                                              \u2502\n\u2502                                                                  \u2502\n\u2502  payments-core     \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591  85%                \u2502\n\u2502  liquidity-team    \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591  75%                \u2502\n\u2502  connectivity      \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588  98%                \u2502\n\u2502  risk-team         \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591  60%                \u2502\n\u2502  fx-team           \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591  35%  \u26a0\ufe0f            \u2502\n\u2502                                                                  \u2502\n\u2502  TOP VIOLATIONS                                                  \u2502\n\u2502  \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501                                                \u2502\n\u2502                                                                  \u2502\n\u2502  1. [BLOCK] Legacy code modifications (fx-team: 12 instances)   \u2502\n\u2502  2. [WARN]  Missing @Brick annotations (risk-team: 8 instances) \u2502\n\u2502  3. [INFO]  Outdated API versions (various: 23 instances)       \u2502\n\u2502                                                                  \u2502\n\u2502  MIGRATION PROGRESS                                              \u2502\n\u2502  \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501                                             \u2502\n\u2502                                                                  \u2502\n\u2502  Payments     [\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591]  90%  \u2192 Target: 100% Q3    \u2502\n\u2502  Liquidity    [\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591]  60%  \u2192 Target: 100% Q4    \u2502\n\u2502  Connectivity [\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588]  100% \u2705 Complete           \u2502\n\u2502  Risk         [\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591]  40%  \u2192 Target: 100% Q1'25 \u2502\n\u2502  FX           [\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591]  20%  \u2192 Target: 100% Q2'25 \u2502\n\u2502                                                                  \u2502\n\u2502  KNOWLEDGE HEALTH                                                \u2502\n\u2502  \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501                                               \u2502\n\u2502                                                                  \u2502\n\u2502  ADRs:      45 (+3 this week)                                   \u2502\n\u2502  Policies:  28 (2 violations pending)                           \u2502\n\u2502  Patterns:  52 (+5 this week)                                   \u2502\n\u2502  Memories:  1,247 (89 promoted this week)                       \u2502\n\u2502                                                                  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"getting-started",children:"Getting Started"}),"\n",(0,i.jsx)(e.h3,{id:"1-initialize-aeterna-for-migration-project",children:"1. Initialize Aeterna for Migration Project"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:'# Clone and setup\ngit clone https://github.com/your-org/aeterna\ncd aeterna\ncargo build --release\n\n# Initialize knowledge repository\naeterna init --template strangler-fig \\\n  --company "wolf-corp" \\\n  --orgs "platform-engineering,product,security"\n'})}),"\n",(0,i.jsx)(e.h3,{id:"2-import-existing-adrs",children:"2. Import Existing ADRs"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# Import from existing docs\naeterna knowledge import \\\n  --source ./legacy-docs/adrs \\\n  --type adr \\\n  --layer company\n\n# Validate constraints\naeterna knowledge validate --strict\n"})}),"\n",(0,i.jsx)(e.h3,{id:"3-configure-cicd-integration",children:"3. Configure CI/CD Integration"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"# .github/workflows/aeterna-check.yml\nname: Aeterna Policy Check\n\non: [pull_request]\n\njobs:\n  policy-check:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      \n      - name: Check Aeterna Constraints\n        uses: aeterna/policy-check-action@v1\n        with:\n          config: ./aeterna.toml\n          fail-on: block  # block, warn, or info\n          \n      - name: Post Violations to PR\n        if: failure()\n        uses: aeterna/pr-comment-action@v1\n        with:\n          template: policy-violation\n"})}),"\n",(0,i.jsx)(e.h3,{id:"4-enable-ai-agent-integration",children:"4. Enable AI Agent Integration"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:'// In your AI coding assistant\nlet aeterna = AeternaClient::new(config)?;\n\n// Before generating code\nlet context = aeterna.get_context(\n    tenant,\n    &["adrs", "policies", "patterns", "memories"]\n).await?;\n\n// Include in agent prompt\nlet prompt = format!(\n    "{}\\n\\nRelevant context:\\n{}",\n    user_request,\n    context.to_prompt_string()\n);\n\n// After generating code\nlet violations = aeterna.check_constraints(\n    &generated_code,\n    &file_path\n).await?;\n\nif violations.has_blocking() {\n    // Regenerate with constraint awareness\n}\n'})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsx)(e.p,{children:"Aeterna enables successful strangler fig migrations by:"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Codifying Decisions"}),': ADRs capture the "why" behind migration choices']}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Enforcing Policies"}),": Constraints prevent legacy patterns from spreading"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Sharing Patterns"}),": Reusable solutions accelerate team delivery"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Preserving Memory"}),": Learnings survive team changes and time"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Enabling Agents"}),": AI assistants have full migration context"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Tracking Progress"}),": Governance dashboard shows compliance trends"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"The result"}),": 300 engineers can transform a monolith over 3 years without losing institutional knowledge, repeating mistakes, or violating architectural decisions."]})]})}function m(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(d,{...n})}):d(n)}},8453(n,e,t){t.d(e,{R:()=>s,x:()=>o});var r=t(6540);const i={},a=r.createContext(i);function s(n){const e=r.useContext(a);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:s(n.components),r.createElement(a.Provider,{value:e},n.children)}}}]);