"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[5736],{3001(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"specs/testing-requirements/spec","title":"Testing Requirements Specification","description":"Purpose","source":"@site/docs/specs/testing-requirements/spec.md","sourceDirName":"specs/testing-requirements","slug":"/specs/testing-requirements/spec","permalink":"/aeterna/docs/specs/testing-requirements/spec","draft":false,"unlisted":false,"editUrl":"https://github.com/kikokikok/aeterna/tree/main/website/docs/specs/testing-requirements/spec.md","tags":[],"version":"current","frontMatter":{}}');var t=s(4848),r=s(8453);const l={},d="Testing Requirements Specification",c={},a=[{value:"Purpose",id:"purpose",level:2},{value:"Goals",id:"goals",level:3},{value:"Requirements",id:"requirements",level:2},{value:"Requirement: Test Coverage Standards",id:"requirement-test-coverage-standards",level:3},{value:"Scenario: Unit test coverage",id:"scenario-unit-test-coverage",level:4},{value:"Scenario: Integration test coverage",id:"scenario-integration-test-coverage",level:4},{value:"Requirement: Testability Architecture",id:"requirement-testability-architecture",level:3},{value:"Scenario: Dependency injection",id:"scenario-dependency-injection",level:4},{value:"Requirement: Property-Based Testing",id:"requirement-property-based-testing",level:3},{value:"Scenario: Property testing implementation",id:"scenario-property-testing-implementation",level:4},{value:"\ud83d\udccb Abstract",id:"-abstract",level:2},{value:"Core Principles",id:"core-principles",level:3},{value:"\ud83c\udfd7\ufe0f Testing Architecture",id:"\ufe0f-testing-architecture",level:2},{value:"Test Pyramid",id:"test-pyramid",level:3},{value:"\ud83d\udcca Coverage Requirements",id:"-coverage-requirements",level:2},{value:"Coverage Targets by Component Type",id:"coverage-targets-by-component-type",level:3},{value:"Minimum Coverage Thresholds",id:"minimum-coverage-thresholds",level:3},{value:"Coverage Exclusions",id:"coverage-exclusions",level:3},{value:"\ud83c\udfa8 Testability Requirements",id:"-testability-requirements",level:2},{value:"Dependency Injection for Testability",id:"dependency-injection-for-testability",level:3},{value:"Test Fixtures",id:"test-fixtures",level:3},{value:"\ud83e\uddea Property-Based Testing Requirements",id:"-property-based-testing-requirements",level:2},{value:"Critical Algorithms",id:"critical-algorithms",level:3},{value:"\ud83e\uddec Mutation Testing Requirements",id:"-mutation-testing-requirements",level:2},{value:"Mutation Testing Configuration",id:"mutation-testing-configuration",level:3},{value:"\ud83d\udd0c Integration Testing Requirements",id:"-integration-testing-requirements",level:2},{value:"API Endpoint Tests",id:"api-endpoint-tests",level:3},{value:"Database Integration Tests",id:"database-integration-tests",level:3},{value:"Provider Integration Tests",id:"provider-integration-tests",level:3},{value:"\ud83c\udfad End-to-End Testing (BDD) Requirements",id:"-end-to-end-testing-bdd-requirements",level:2},{value:"BDD Scenarios",id:"bdd-scenarios",level:3},{value:"\ud83d\udccf CI/CD Testing Pipeline",id:"-cicd-testing-pipeline",level:2},{value:"GitHub Actions Workflow",id:"github-actions-workflow",level:3},{value:"Docker Compose for Testing",id:"docker-compose-for-testing",level:3},{value:"\ud83d\udccb Quality Gates",id:"-quality-gates",level:2},{value:"Pre-Commit Hooks",id:"pre-commit-hooks",level:3},{value:"Quality Metrics",id:"quality-metrics",level:3},{value:"\ud83d\udd11 Non-Compliance Consequences",id:"-non-compliance-consequences",level:2},{value:"CI/CD Failures",id:"cicd-failures",level:3},{value:"PR Rejection Criteria",id:"pr-rejection-criteria",level:3},{value:"\ud83d\udcca Success Metrics",id:"-success-metrics",level:2},{value:"Coverage Metrics",id:"coverage-metrics",level:3},{value:"Quality Metrics",id:"quality-metrics-1",level:3},{value:"\ud83d\udcda Documentation Requirements",id:"-documentation-requirements",level:2},{value:"Test Documentation",id:"test-documentation",level:3},{value:"\ud83c\udfaf Implementation Timeline",id:"-implementation-timeline",level:2},{value:"Phase 0: Testing Infrastructure (Weeks 1-2)",id:"phase-0-testing-infrastructure-weeks-1-2",level:3},{value:"Phase 1: Foundation Testing (Weeks 1-4)",id:"phase-1-foundation-testing-weeks-1-4",level:3},{value:"Phase 2: Integration Testing (Weeks 5-8)",id:"phase-2-integration-testing-weeks-5-8",level:3},{value:"\ud83d\udccb Compliance Checklist",id:"-compliance-checklist",level:2},{value:"Testing Compliance Requirements",id:"testing-compliance-requirements",level:3},{value:"\ud83d\udcdc License",id:"-license",level:2}];function o(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"testing-requirements-specification",children:"Testing Requirements Specification"})}),"\n",(0,t.jsx)(n.h2,{id:"purpose",children:"Purpose"}),"\n",(0,t.jsx)(n.p,{children:"Define testing requirements and quality standards for OpenSpec Knowledge Provider implementations. Testing is not optional - it is a requirement for compliance."}),"\n",(0,t.jsx)(n.h3,{id:"goals",children:"Goals"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Testing is Mandatory"}),": No implementation can claim OpenSpec compliance without meeting testing requirements"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Coverage is Safety"}),": Minimum 80% coverage for all components (85%+ for core logic)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Test-Driven Development"}),": TDD/BDD must be followed (test before code)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Quality Gates"}),": CI/CD must fail if coverage or quality thresholds not met"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Mockability"}),": All external dependencies must be behind traits for easy testing"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Test Fixtures"}),": All external service responses must have test fixtures"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Property-Based Testing"}),": Critical algorithms must be tested with property-based frameworks"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Mutation Testing"}),": 90%+ mutants must be killed for critical code"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"requirements",children:"Requirements"}),"\n",(0,t.jsx)(n.h3,{id:"requirement-test-coverage-standards",children:"Requirement: Test Coverage Standards"}),"\n",(0,t.jsx)(n.p,{children:"The system SHALL achieve minimum coverage thresholds across all components."}),"\n",(0,t.jsx)(n.h4,{id:"scenario-unit-test-coverage",children:"Scenario: Unit test coverage"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"WHEN"})," business logic components are implemented\n",(0,t.jsx)(n.strong,{children:"THEN"})," unit test coverage SHALL be >= 85%\n",(0,t.jsx)(n.strong,{children:"AND"})," SHALL be measured with tarpaulin or equivalent tool\n",(0,t.jsx)(n.strong,{children:"AND"})," SHALL be enforced in CI/CD pipeline"]}),"\n",(0,t.jsx)(n.h4,{id:"scenario-integration-test-coverage",children:"Scenario: Integration test coverage"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"WHEN"})," API endpoints are implemented\n",(0,t.jsx)(n.strong,{children:"THEN"})," integration test coverage SHALL be >= 80%\n",(0,t.jsx)(n.strong,{children:"AND"})," SHALL test with both mock and real dependencies\n",(0,t.jsx)(n.strong,{children:"AND"})," SHALL be enforced in CI/CD pipeline"]}),"\n",(0,t.jsx)(n.h3,{id:"requirement-testability-architecture",children:"Requirement: Testability Architecture"}),"\n",(0,t.jsx)(n.p,{children:"All external dependencies SHALL be behind trait abstractions to enable easy mocking and testing."}),"\n",(0,t.jsx)(n.h4,{id:"scenario-dependency-injection",children:"Scenario: Dependency injection"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"WHEN"})," external services are integrated (database, vector store, LLM providers)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"THEN"})," dependencies SHALL be behind trait abstractions"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"AND"})," test implementations SHALL be provided"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"AND"})," constructor dependency injection SHALL be supported"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"AND"})," mocking SHALL be possible without modifying production code"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"requirement-property-based-testing",children:"Requirement: Property-Based Testing"}),"\n",(0,t.jsx)(n.p,{children:"All critical algorithms SHALL be tested with property-based testing frameworks."}),"\n",(0,t.jsx)(n.h4,{id:"scenario-property-testing-implementation",children:"Scenario: Property testing implementation"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"WHEN"})," critical algorithms are implemented (promotion scoring, similarity metrics)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"THEN"})," property-based tests SHALL be written using proptest framework"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"AND"})," SHALL include minimum 10,000 test cases per property"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"AND"})," SHALL verify invariants (bounds, constraints, edge cases)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"AND"})," SHALL achieve 90%+ coverage for property-based tests"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-abstract",children:"\ud83d\udccb Abstract"}),"\n",(0,t.jsxs)(n.p,{children:["This document defines ",(0,t.jsx)(n.strong,{children:"testing requirements"})," and ",(0,t.jsx)(n.strong,{children:"quality standards"})," that all OpenSpec-compliant knowledge providers must implement. Testing is not optional - it is a ",(0,t.jsx)(n.strong,{children:"requirement for compliance"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"core-principles",children:"Core Principles"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Testing is Mandatory"}),": No implementation can claim OpenSpec compliance without meeting testing requirements"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Coverage is Safety"}),": Minimum 80% coverage for all components (85%+ for core logic)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Test-Driven Development"}),": TDD/BDD must be followed (test before code)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Quality Gates"}),": CI/CD must fail if coverage or quality thresholds not met"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Mockability"}),": All external dependencies must be behind traits for easy testing"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Test Fixtures"}),": All external service responses must have test fixtures"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Property-Based Testing"}),": Critical algorithms must be tested with property-based frameworks"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Mutation Testing"}),": 90%+ mutants must be killed for critical code"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"\ufe0f-testing-architecture",children:"\ud83c\udfd7\ufe0f Testing Architecture"}),"\n",(0,t.jsx)(n.h3,{id:"test-pyramid",children:"Test Pyramid"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"                \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                \u2502     E2E Tests (BDD Scenarios)        \u2502\n                \u2502  \u2022 10-20 scenarios                      \u2502\n                \u2502  \u2022 Slow (10s - 5min)                     \u2502\n                \u2502  \u2022 High-level user workflows                   \u2502\n                \u2502  \u2022 Test as documentation                        \u2502\n                \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                    \u2502\n                                    \u25bc\n                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502     Integration Tests                        \u2502\n                    \u2502  \u2022 100-500 tests                         \u2502\n                    \u2502  \u2022 Medium speed (100ms - 5s)              \u2502\n                    \u2502  \u2022 API endpoints, providers                 \u2502\n                    \u2502  \u2022 Real dependencies (PostgreSQL, Qdrant)      \u2502\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                    \u2502\n                                    \u25bc\n                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502     Unit Tests (TDD Tests)                \u2502\n                    \u2502  \u2022 1000-5000 tests                        \u2502\n                    \u2502  \u2022 Fast (< 100ms)                         \u2502\n                    \u2502  \u2022 85%+ coverage target                   \u2502\n                    \u2502  \u2022 Test fixtures, mock implementations           \u2502\n                    \u2502  \u2022 Property-based testing (proptest)             \u2502\n                    \u2502  \u2022 Mutation testing (cargo-mutants)          \u2502\n                    \u2502  \u2022 Dependency injection for testability          \u2502\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                    \u2502\n                                    \u25bc\n                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502     Property-Based Tests                    \u2502\n                    \u2502  \u2022 50-100 properties                      \u2502\n                    \u2502  \u2022 Critical algorithms                     \u2502\n                    \u2502  \u2022 90%+ coverage target                   \u2502\n                    \u2502  \u2022 Invariant verification                   \u2502\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-coverage-requirements",children:"\ud83d\udcca Coverage Requirements"}),"\n",(0,t.jsx)(n.h3,{id:"coverage-targets-by-component-type",children:"Coverage Targets by Component Type"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Component Type"}),(0,t.jsx)(n.th,{children:"Unit Test Target"}),(0,t.jsx)(n.th,{children:"Integration Target"}),(0,t.jsx)(n.th,{children:"Overall Target"}),(0,t.jsx)(n.th,{children:"Tool"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Business Logic"})}),(0,t.jsx)(n.td,{children:"90%+"}),(0,t.jsx)(n.td,{children:"85%+"}),(0,t.jsx)(n.td,{children:"85%+"}),(0,t.jsx)(n.td,{children:"tarpaulin"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Data Models"})}),(0,t.jsx)(n.td,{children:"95%+"}),(0,t.jsx)(n.td,{children:"N/A"}),(0,t.jsx)(n.td,{children:"95%+"}),(0,t.jsx)(n.td,{children:"tarpaulin"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"API Endpoints"})}),(0,t.jsx)(n.td,{children:"85%+"}),(0,t.jsx)(n.td,{children:"85%+"}),(0,t.jsx)(n.td,{children:"85%+"}),(0,t.jsx)(n.td,{children:"tarpaulin"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Database Layer"})}),(0,t.jsx)(n.td,{children:"85%+"}),(0,t.jsx)(n.td,{children:"80%+"}),(0,t.jsx)(n.td,{children:"80%+"}),(0,t.jsx)(n.td,{children:"tarpaulin"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Vector DB Layer"})}),(0,t.jsx)(n.td,{children:"85%+"}),(0,t.jsx)(n.td,{children:"80%+"}),(0,t.jsx)(n.td,{children:"80%+"}),(0,t.jsx)(n.td,{children:"tarpaulin"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Provider Integration"})}),(0,t.jsx)(n.td,{children:"85%+"}),(0,t.jsx)(n.td,{children:"80%+"}),(0,t.jsx)(n.td,{children:"80%+"}),(0,t.jsx)(n.td,{children:"tarpaulin"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Query Engine"})}),(0,t.jsx)(n.td,{children:"90%+"}),(0,t.jsx)(n.td,{children:"85%+"}),(0,t.jsx)(n.td,{children:"85%+"}),(0,t.jsx)(n.td,{children:"tarpaulin"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Embedding Service"})}),(0,t.jsx)(n.td,{children:"90%+"}),(0,t.jsx)(n.td,{children:"85%+"}),(0,t.jsx)(n.td,{children:"85%+"}),(0,t.jsx)(n.td,{children:"tarpaulin"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"minimum-coverage-thresholds",children:"Minimum Coverage Thresholds"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Coverage Type"}),(0,t.jsx)(n.th,{children:"Minimum Threshold"}),(0,t.jsx)(n.th,{children:"Enforcement"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Unit Tests"})}),(0,t.jsx)(n.td,{children:"85%"}),(0,t.jsx)(n.td,{children:"Must be >= 85%"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Integration Tests"})}),(0,t.jsx)(n.td,{children:"80%"}),(0,t.jsx)(n.td,{children:"Must be >= 80%"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"E2E Tests"})}),(0,t.jsx)(n.td,{children:"75%"}),(0,t.jsx)(n.td,{children:"Must be >= 75%"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Property-Based Tests"})}),(0,t.jsx)(n.td,{children:"90%"}),(0,t.jsx)(n.td,{children:"Must be >= 90%"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Mutation Tests"})}),(0,t.jsx)(n.td,{children:"90%"}),(0,t.jsx)(n.td,{children:"Must be >= 90% mutants killed"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Overall Project"})}),(0,t.jsx)(n.td,{children:"80%"}),(0,t.jsx)(n.td,{children:"Must be >= 80%"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"coverage-exclusions",children:"Coverage Exclusions"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"# Files and patterns excluded from coverage calculations\n*/tests/*                    # Test files themselves\n*/test_fixtures/*            # Test fixture files\n*/tests/*_fixtures.rs       # Test fixture modules\n*/examples/*                # Example code\n*/bench/*.rs                 # Benchmark files\n*/tests/*.mock.rs            # Mock implementations\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-testability-requirements",children:"\ud83c\udfa8 Testability Requirements"}),"\n",(0,t.jsx)(n.h3,{id:"dependency-injection-for-testability",children:"Dependency Injection for Testability"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Requirement"}),": All external dependencies must be behind trait abstractions to enable easy mocking and testing."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",children:'#[async_trait]\npub trait EmbeddingProvider: Send + Sync {\n    async fn embed(&self, text: &str) -> Result<Vec<f32>, Error>;\n    async fn embed_batch(&self, texts: Vec<&str>) -> Result<Vec<Vec<f32>>, Error>;\n}\n\n// Production implementation\npub struct GenaiEmbeddingProvider {\n    client: genai::Client,\n}\n\n#[async_trait]\nimpl EmbeddingProvider for GenaiEmbeddingProvider {\n    async fn embed(&self, text: &str) -> Result<Vec<f32>, Error> {\n        self.client.exec_embed("text-embedding-3-small", vec![text], None).await\n    }\n}\n\n// Test mock implementation\n#[cfg(test)]\npub struct MockEmbeddingProvider {\n    responses: Arc<Mutex<Vec<Result<Vec<f32>, Error>>>>,\n}\n\n#[cfg(test)]\n#[async_trait]\nimpl EmbeddingProvider for MockEmbeddingProvider {\n    async fn embed(&self, _text: &str) -> Result<Vec<f32>, Error> {\n        self.responses.lock().await.pop().unwrap()\n    }\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Compliance Checklist"}),":"]}),"\n",(0,t.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," All database layers implement swappable traits"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," All provider integrations implement swappable traits"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," All external services have trait abstractions"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Test implementations are provided for all traits"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Constructor dependency injection for all components"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"test-fixtures",children:"Test Fixtures"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Requirement"}),": All external service responses must have deterministic test fixtures."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",children:'// tests/fixtures/git_api.rs\nuse serde_json::json;\n\npub fn github_commit_response() -> serde_json::Value {\n    json!({\n        "sha": "abc123",\n        "commit": {\n            "message": "Test commit message",\n            "author": {\n                "name": "Test User",\n                "email": "test@example.com"\n            }\n        }\n    })\n}\n\npub fn github_tree_response() -> serde_json::Value {\n    json!({\n        "tree": [\n            {\n                "path": "README.md",\n                "mode": "100644",\n                "type": "blob",\n                "sha": "def456"\n            }\n        ]\n    })\n}\n\n// Usage in tests\n#[cfg(test)]\nmod tests {\n    use super::fixtures::*;\n\n    #[tokio::test]\n    async fn test_git_provider_parse_commit() {\n        let mock_server = MockServer::new()\n            .with_response(github_commit_response());\n\n        let provider = GitProvider::new(mock_server.url());\n        let commit = provider.get_commit("abc123").await.unwrap();\n\n        assert_eq!(commit.message, "Test commit message");\n        assert_eq!(commit.author.name, "Test User");\n    }\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Fixture Requirements"}),":"]}),"\n",(0,t.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," All API responses have test fixtures"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Fixtures are deterministic (no random values)"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Fixtures cover success and error cases"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Fixtures are versioned with API versions"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Fixtures are documented with examples"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-property-based-testing-requirements",children:"\ud83e\uddea Property-Based Testing Requirements"}),"\n",(0,t.jsx)(n.h3,{id:"critical-algorithms",children:"Critical Algorithms"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Requirement"}),": All critical algorithms MUST be tested with property-based testing frameworks."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Critical Algorithms List"}),":"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Promotion Score Calculation"}),"\n",(0,t.jsx)(n.li,{children:"Cross-Layer Query Result Ordering"}),"\n",(0,t.jsx)(n.li,{children:"Embedding Similarity Metrics"}),"\n",(0,t.jsx)(n.li,{children:"Confidence Aggregation"}),"\n",(0,t.jsx)(n.li,{children:"Conflict Resolution"}),"\n",(0,t.jsx)(n.li,{children:"Version Merging"}),"\n",(0,t.jsx)(n.li,{children:"Access Policy Evaluation"}),"\n",(0,t.jsx)(n.li,{children:"Search Result Ranking"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",children:"use proptest::prelude::*;\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    // Property 1: Promotion score is always in [0.0, 1.0]\n    proptest! {\n        #[test]\n        fn prop_promotion_score_bounds(\n            access_count in 0usize..10000,\n            time_elapsed_hours in 0u64..8760u64,  // 1 year\n            base_score in 0.0f32..1.0f32,\n            importance in 0.0f32..1.0f32,\n        ) {\n            let entry = MemoryEntry {\n                access_count,\n                time_elapsed_hours,\n                importance_score: base_score,\n                importance,\n                ..Default::default()\n            };\n\n            let score = entry.calculate_promotion_score();\n\n            assert!(score >= 0.0);\n            assert!(score <= 1.0);\n        }\n    }\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Property Testing Requirements"}),":"]}),"\n",(0,t.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," All critical algorithms have property-based tests"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Minimum 10,000 test cases per property"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Coverage of invariants (bounds, constraints)"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Coverage of edge cases (empty, max values, null)"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Deterministic test execution"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-mutation-testing-requirements",children:"\ud83e\uddec Mutation Testing Requirements"}),"\n",(0,t.jsx)(n.h3,{id:"mutation-testing-configuration",children:"Mutation Testing Configuration"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Requirement"}),": Critical code paths MUST achieve 90%+ mutation score (90%+ mutants killed)."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Critical Code Paths"}),":"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Memory Models (all layers)"}),"\n",(0,t.jsx)(n.li,{children:"Promotion Score Calculation"}),"\n",(0,t.jsx)(n.li,{children:"Query Engine (semantic, keyword, hybrid)"}),"\n",(0,t.jsx)(n.li,{children:"Embedding Generation"}),"\n",(0,t.jsx)(n.li,{children:"Provider Integration (Git, NotebookLM, etc.)"}),"\n",(0,t.jsx)(n.li,{children:"Query result aggregation"}),"\n",(0,t.jsx)(n.li,{children:"Access policy evaluation"}),"\n",(0,t.jsx)(n.li,{children:"Metadata operations"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Mutation Testing Requirements"}),":"]}),"\n",(0,t.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," All critical code paths have mutation tests"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Mutation score >= 90% (90%+ mutants killed)"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0}),' Mutants configured: "all" (not subset)']}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," CI/CD runs mutation tests on every PR"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Mutation coverage report uploaded with PR"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-integration-testing-requirements",children:"\ud83d\udd0c Integration Testing Requirements"}),"\n",(0,t.jsx)(n.h3,{id:"api-endpoint-tests",children:"API Endpoint Tests"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Requirement"}),": All OpenSpec endpoints must have integration tests with real and mock dependencies."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Required Tests"}),":"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Discovery endpoint (",(0,t.jsx)(n.code,{children:"GET /openspec/v1/knowledge"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:["Query endpoint (",(0,t.jsx)(n.code,{children:"POST /openspec/v1/knowledge/query"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:["Create endpoint (",(0,t.jsx)(n.code,{children:"POST /openspec/v1/knowledge/create"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:["Update endpoint (",(0,t.jsx)(n.code,{children:"PUT /openspec/v1/knowledge/{id}"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:["Delete endpoint (",(0,t.jsx)(n.code,{children:"DELETE /openspec/v1/knowledge/{id}"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:["Batch operations endpoint (",(0,t.jsx)(n.code,{children:"POST /openspec/v1/knowledge/batch"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:["Streaming endpoint (",(0,t.jsx)(n.code,{children:"GET /openspec/v1/knowledge/stream"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:["Metadata operations (",(0,t.jsx)(n.code,{children:"GET /openspec/v1/knowledge/{id}/metadata"}),")"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Integration Test Requirements"}),":"]}),"\n",(0,t.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," All 8 OpenSpec endpoints have integration tests"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Tests with mock dependencies (fast, deterministic)"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Tests with real dependencies (PostgreSQL, Qdrant, Redis)"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Error handling tests (4xx, 5xx errors)"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Authentication/authorization tests"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Rate limiting tests"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Streaming response tests"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Batch operation tests"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"database-integration-tests",children:"Database Integration Tests"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Requirement"}),": All database layers (PostgreSQL, Qdrant, Redis) must have integration tests."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Database Integration Test Requirements"}),":"]}),"\n",(0,t.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," All memory layers have database integration tests"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Tests use appropriate frameworks (SQLx, qdrant-client, redis-rs)"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Transactions are tested (commit/rollback)"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Concurrency is tested (race conditions)"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Performance tested (1000+ entries)"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Error handling tested (connection failures, timeouts)"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"provider-integration-tests",children:"Provider Integration Tests"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Requirement"}),": All knowledge providers must have integration tests with mock and real implementations."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Provider Integration Test Requirements"}),":"]}),"\n",(0,t.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," All knowledge providers have integration tests"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Tests with mock API responses (deterministic)"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Tests with real provider implementations (Git repos, APIs)"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Error handling tested (network errors, timeouts)"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Performance tested (1000+ operations)"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Fixture-based tests for all external APIs"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-end-to-end-testing-bdd-requirements",children:"\ud83c\udfad End-to-End Testing (BDD) Requirements"}),"\n",(0,t.jsx)(n.h3,{id:"bdd-scenarios",children:"BDD Scenarios"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Requirement"}),": All critical user workflows must be tested with BDD scenarios (Given-When-Then)."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Required Scenarios"}),":"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Scenario"}),(0,t.jsx)(n.th,{children:"Priority"}),(0,t.jsx)(n.th,{children:"Complexity"}),(0,t.jsx)(n.th,{children:"Test Time"}),(0,t.jsx)(n.th,{children:"Status"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Basic knowledge query"}),(0,t.jsx)(n.td,{children:"P0"}),(0,t.jsx)(n.td,{children:"Low"}),(0,t.jsx)(n.td,{children:"10s"}),(0,t.jsx)(n.td,{children:"Required"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Cross-layer query"}),(0,t.jsx)(n.td,{children:"P0"}),(0,t.jsx)(n.td,{children:"Medium"}),(0,t.jsx)(n.td,{children:"30s"}),(0,t.jsx)(n.td,{children:"Required"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Memory promotion (auto)"}),(0,t.jsx)(n.td,{children:"P0"}),(0,t.jsx)(n.td,{children:"Medium"}),(0,t.jsx)(n.td,{children:"30s"}),(0,t.jsx)(n.td,{children:"Required"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Memory promotion (manual with approval)"}),(0,t.jsx)(n.td,{children:"P1"}),(0,t.jsx)(n.td,{children:"High"}),(0,t.jsx)(n.td,{children:"60s"}),(0,t.jsx)(n.td,{children:"Required"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Query with governance approval"}),(0,t.jsx)(n.td,{children:"P1"}),(0,t.jsx)(n.td,{children:"High"}),(0,t.jsx)(n.td,{children:"60s"}),(0,t.jsx)(n.td,{children:"Required"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Batch operations"}),(0,t.jsx)(n.td,{children:"P0"}),(0,t.jsx)(n.td,{children:"High"}),(0,t.jsx)(n.td,{children:"90s"}),(0,t.jsx)(n.td,{children:"Required"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Knowledge source integration"}),(0,t.jsx)(n.td,{children:"P0"}),(0,t.jsx)(n.td,{children:"High"}),(0,t.jsx)(n.td,{children:"120s"}),(0,t.jsx)(n.td,{children:"Required"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Streaming updates"}),(0,t.jsx)(n.td,{children:"P0"}),(0,t.jsx)(n.td,{children:"High"}),(0,t.jsx)(n.td,{children:"120s"}),(0,t.jsx)(n.td,{children:"Required"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-gherkin",children:'Feature: Multi-Layered Memory Queries\n\n#### Scenario: Query across working and session memory\n**WHEN** I have stored data in working memory\n**AND** I have stored data in session memory\n**AND** I query for information with "test query"\n**THEN** results should come from both working and session layers\n**AND** results should be ordered by relevance score\n**AND** total execution time should be less than 100ms\n\n#### Scenario: Promote entry from working to session memory\n**WHEN** I have a working memory entry accessed 100 times\n**AND** entry has high importance score\n**AND** I trigger promotion to session memory\n**THEN** entry should be promoted to session memory\n**AND** entry should be removed from working memory\n**AND** promotion should be logged in audit log\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"BDD Requirements"}),":"]}),"\n",(0,t.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," All 10-20 critical scenarios implemented"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Scenarios written in Gherkin syntax"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Each scenario has clear Given-When-Then structure"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Scenarios cover happy paths and error cases"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Scenarios test business rules and invariants"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Scenarios are versioned with OpenSpec version"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-cicd-testing-pipeline",children:"\ud83d\udccf CI/CD Testing Pipeline"}),"\n",(0,t.jsx)(n.h3,{id:"github-actions-workflow",children:"GitHub Actions Workflow"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Requirement"}),": CI/CD pipeline must run all test types and enforce coverage thresholds."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Required Jobs"}),":"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Unit tests with coverage (tarpaulin)"}),"\n",(0,t.jsx)(n.li,{children:"Integration tests with real dependencies (PostgreSQL, Qdrant, Redis)"}),"\n",(0,t.jsx)(n.li,{children:"E2E BDD tests"}),"\n",(0,t.jsx)(n.li,{children:"Coverage enforcement (fail if < 80%)"}),"\n",(0,t.jsx)(n.li,{children:"Mutation tests with cargo-mutants"}),"\n",(0,t.jsx)(n.li,{children:"Quality checks (clippy, fmt)"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"CI/CD Requirements"}),":"]}),"\n",(0,t.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," All 4 job types implemented (unit, integration, E2E, coverage)"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Coverage reports merged and uploaded"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Pipeline fails if coverage < 80%"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Quality checks (clippy, fmt) run"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Mutants tested on every PR"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Test database isolated from production"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," All artifacts retained for debugging"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"docker-compose-for-testing",children:"Docker Compose for Testing"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'# docker-compose.test.yml\nversion: \'3.8\'\n\nservices:\n  postgres-test:\n    image: postgres:16-alpine\n    environment:\n      POSTGRES_DB: provider_test\n      POSTGRES_USER: test_user\n      POSTGRES_PASSWORD: test_password\n    ports:\n      - "5432:5432"\n    volumes:\n      - ./init/test-db.sql:/docker-entrypoint-initdb.d\n\n  qdrant-test:\n    image: qdrant/qdrant:v1.12\n    ports:\n      - "6333:6333"\n    volumes:\n      - qdrant_data:/qdrant/storage\n\n  redis-test:\n    image: redis:7-alpine\n    ports:\n      - "6379:6379"\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-quality-gates",children:"\ud83d\udccb Quality Gates"}),"\n",(0,t.jsx)(n.h3,{id:"pre-commit-hooks",children:"Pre-Commit Hooks"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Requirement"}),": All commits must pass pre-commit hooks for code quality."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Required Hooks"}),":"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"cargo fmt"})," - Code formatting"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"cargo clippy"})," - Linting with warnings"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"cargo test"})," - Run tests locally"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"check-json"})," - Validate JSON files"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"typos"})," - Check for typos"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Pre-Commit Requirements"}),":"]}),"\n",(0,t.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," All 5 hooks installed"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," All commits pass pre-commit checks"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," CI/CD runs same checks"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Hooks are fast (< 5s total)"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," No new warnings in clippy"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," All JSON files valid"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"quality-metrics",children:"Quality Metrics"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Metric"}),(0,t.jsx)(n.th,{children:"Target"}),(0,t.jsx)(n.th,{children:"Measurement"}),(0,t.jsx)(n.th,{children:"Enforcement"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Code Formatting"}),(0,t.jsx)(n.td,{children:"100%"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"cargo fmt --check"})}),(0,t.jsx)(n.td,{children:"CI gate"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Clippy Warnings"}),(0,t.jsx)(n.td,{children:"0 warnings"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"cargo clippy -- -D warnings"})}),(0,t.jsx)(n.td,{children:"CI gate"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Test Coverage"}),(0,t.jsx)(n.td,{children:"80%+"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"cargo tarpaulin"})}),(0,t.jsx)(n.td,{children:"CI gate"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Mutation Score"}),(0,t.jsx)(n.td,{children:"90%+"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"cargo-mutants"})}),(0,t.jsx)(n.td,{children:"CI gate"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Test Flakiness"}),(0,t.jsx)(n.td,{children:"< 1%"}),(0,t.jsx)(n.td,{children:"Historical analysis"}),(0,t.jsx)(n.td,{children:"Monitoring"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Documentation Coverage"}),(0,t.jsx)(n.td,{children:"100%"}),(0,t.jsx)(n.td,{children:"Manual review"}),(0,t.jsx)(n.td,{children:"CI gate"})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-non-compliance-consequences",children:"\ud83d\udd11 Non-Compliance Consequences"}),"\n",(0,t.jsx)(n.h3,{id:"cicd-failures",children:"CI/CD Failures"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Consequence"}),": CI/CD pipeline will fail if testing requirements are not met."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Failure Scenarios"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Coverage < 80%: Pipeline fails, PR cannot be merged"}),"\n",(0,t.jsx)(n.li,{children:"Pre-commit hooks fail: Commit blocked, must fix issues"}),"\n",(0,t.jsx)(n.li,{children:"Clippy warnings: Pipeline fails, must fix before merge"}),"\n",(0,t.jsx)(n.li,{children:"Missing tests: Pipeline fails, must add tests before merge"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"pr-rejection-criteria",children:"PR Rejection Criteria"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Consequence"}),": PRs will be rejected if testing requirements are not met."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Rejection Criteria"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"No test coverage report"}),"\n",(0,t.jsx)(n.li,{children:"Coverage < 80%"}),"\n",(0,t.jsx)(n.li,{children:"Failing tests in CI/CD"}),"\n",(0,t.jsx)(n.li,{children:"Missing test fixtures"}),"\n",(0,t.jsx)(n.li,{children:"No mutation tests for critical paths"}),"\n",(0,t.jsx)(n.li,{children:"No property-based tests for critical algorithms"}),"\n",(0,t.jsx)(n.li,{children:"Missing BDD scenarios for critical workflows"}),"\n",(0,t.jsx)(n.li,{children:"Failing pre-commit checks"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-success-metrics",children:"\ud83d\udcca Success Metrics"}),"\n",(0,t.jsx)(n.h3,{id:"coverage-metrics",children:"Coverage Metrics"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Metric"}),(0,t.jsx)(n.th,{children:"Target"}),(0,t.jsx)(n.th,{children:"Measurement"}),(0,t.jsx)(n.th,{children:"Status"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Unit Test Coverage"})}),(0,t.jsx)(n.td,{children:"85%+"}),(0,t.jsx)(n.td,{children:"Line coverage"}),(0,t.jsx)(n.td,{children:"\u2705 Required"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Integration Test Coverage"})}),(0,t.jsx)(n.td,{children:"80%+"}),(0,t.jsx)(n.td,{children:"Line coverage"}),(0,t.jsx)(n.td,{children:"\u2705 Required"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"E2E Test Coverage"})}),(0,t.jsx)(n.td,{children:"75%+"}),(0,t.jsx)(n.td,{children:"Scenario coverage"}),(0,t.jsx)(n.td,{children:"\u2705 Required"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Property-Based Test Coverage"})}),(0,t.jsx)(n.td,{children:"90%+"}),(0,t.jsx)(n.td,{children:"Mutants killed"}),(0,t.jsx)(n.td,{children:"\u2705 Required"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Mutation Test Coverage"})}),(0,t.jsx)(n.td,{children:"90%+"}),(0,t.jsx)(n.td,{children:"Mutants killed"}),(0,t.jsx)(n.td,{children:"\u2705 Required"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Overall Project Coverage"})}),(0,t.jsx)(n.td,{children:"80%+"}),(0,t.jsx)(n.td,{children:"Combined coverage"}),(0,t.jsx)(n.td,{children:"\u2705 Required"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"quality-metrics-1",children:"Quality Metrics"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Metric"}),(0,t.jsx)(n.th,{children:"Target"}),(0,t.jsx)(n.th,{children:"Measurement"}),(0,t.jsx)(n.th,{children:"Enforcement"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Test Execution Time"})}),(0,t.jsx)(n.td,{children:"< 5s"}),(0,t.jsx)(n.td,{children:"CI runtime"}),(0,t.jsx)(n.td,{children:"\u2705 Required"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Test Flakiness"})}),(0,t.jsx)(n.td,{children:"< 1%"}),(0,t.jsx)(n.td,{children:"Flaky test rate"}),(0,t.jsx)(n.td,{children:"\u2705 Required"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Code Review Coverage"})}),(0,t.jsx)(n.td,{children:"100%"}),(0,t.jsx)(n.td,{children:"All PRs reviewed"}),(0,t.jsx)(n.td,{children:"\u2705 Required"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Pre-Commit Hook Compliance"})}),(0,t.jsx)(n.td,{children:"100%"}),(0,t.jsx)(n.td,{children:"All code formatted"}),(0,t.jsx)(n.td,{children:"\u2705 Required"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Coverage Upload Rate"})}),(0,t.jsx)(n.td,{children:"100%"}),(0,t.jsx)(n.td,{children:"All PRs have reports"}),(0,t.jsx)(n.td,{children:"\u2705 Required"})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-documentation-requirements",children:"\ud83d\udcda Documentation Requirements"}),"\n",(0,t.jsx)(n.h3,{id:"test-documentation",children:"Test Documentation"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Requirement"}),": All tests must have module-level documentation."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Required Documentation"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",children:"/// Tests for working memory layer\n///\n/// ## Test Coverage\n/// - Memory entry creation and retrieval\n/// - Memory size limits\n/// - TTL (time-to-live) expiration\n/// - Concurrent access\n///\n/// ## Test Strategy\n/// - Property-based testing for invariants\n/// - Edge cases (empty content, large content)\n/// - Concurrency tests\nmod tests {\n    // ...\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Documentation Requirements"}),":"]}),"\n",(0,t.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Each test module has module documentation"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Coverage sections documented"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Test strategies documented"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," Fixture usage documented"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," BDD scenarios documented in Gherkin syntax"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-implementation-timeline",children:"\ud83c\udfaf Implementation Timeline"}),"\n",(0,t.jsx)(n.h3,{id:"phase-0-testing-infrastructure-weeks-1-2",children:"Phase 0: Testing Infrastructure (Weeks 1-2)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Before any code is written"}),":"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Set up GitHub Actions workflows"}),"\n",(0,t.jsx)(n.li,{children:"Configure cargo-tarpaulin for coverage"}),"\n",(0,t.jsx)(n.li,{children:"Create test database setup"}),"\n",(0,t.jsx)(n.li,{children:"Create Docker compose for dependencies"}),"\n",(0,t.jsx)(n.li,{children:"Write test utilities and helpers"}),"\n",(0,t.jsx)(n.li,{children:"Configure pre-commit hooks"}),"\n",(0,t.jsx)(n.li,{children:"Set up mutation testing with cargo-mutants"}),"\n",(0,t.jsx)(n.li,{children:"Create test fixtures and generators"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"phase-1-foundation-testing-weeks-1-4",children:"Phase 1: Foundation Testing (Weeks 1-4)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"For each feature"}),":"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Write BDD scenarios (Given/When/Then)"}),"\n",(0,t.jsx)(n.li,{children:"Write failing unit test (TDD - RED)"}),"\n",(0,t.jsx)(n.li,{children:"Run test to confirm failure"}),"\n",(0,t.jsx)(n.li,{children:"Write minimal implementation"}),"\n",(0,t.jsx)(n.li,{children:"Run test to confirm passing (TDD - GREEN)"}),"\n",(0,t.jsx)(n.li,{children:"Refactor code"}),"\n",(0,t.jsx)(n.li,{children:"Write property-based tests"}),"\n",(0,t.jsx)(n.li,{children:"Run mutation tests"}),"\n",(0,t.jsx)(n.li,{children:"Verify coverage >= 80%"}),"\n",(0,t.jsx)(n.li,{children:"Update documentation"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"phase-2-integration-testing-weeks-5-8",children:"Phase 2: Integration Testing (Weeks 5-8)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"For each API endpoint"}),":"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Write integration test"}),"\n",(0,t.jsx)(n.li,{children:"Test with mock dependencies"}),"\n",(0,t.jsx)(n.li,{children:"Test with real dependencies (PostgreSQL, Qdrant, Redis)"}),"\n",(0,t.jsx)(n.li,{children:"Test error handling"}),"\n",(0,t.jsx)(n.li,{children:"Test authentication/authorization"}),"\n",(0,t.jsx)(n.li,{children:"Test streaming responses"}),"\n",(0,t.jsx)(n.li,{children:"Verify coverage >= 80%"}),"\n",(0,t.jsx)(n.li,{children:"Update API documentation"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-compliance-checklist",children:"\ud83d\udccb Compliance Checklist"}),"\n",(0,t.jsx)(n.h3,{id:"testing-compliance-requirements",children:"Testing Compliance Requirements"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Requirement"}),(0,t.jsx)(n.th,{children:"Status"}),(0,t.jsx)(n.th,{children:"Notes"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Test-Driven Development"})}),(0,t.jsx)(n.td,{children:"\u2705 Required"}),(0,t.jsx)(n.td,{children:"TDD/BDD from Day 1"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Coverage Thresholds"})}),(0,t.jsx)(n.td,{children:"\u2705 Required"}),(0,t.jsx)(n.td,{children:"80%+ overall enforced"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Property-Based Testing"})}),(0,t.jsx)(n.td,{children:"\u2705 Required"}),(0,t.jsx)(n.td,{children:"Critical algorithms"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Mutation Testing"})}),(0,t.jsx)(n.td,{children:"\u2705 Required"}),(0,t.jsx)(n.td,{children:"90%+ mutants killed"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Testability"})}),(0,t.jsx)(n.td,{children:"\u2705 Required"}),(0,t.jsx)(n.td,{children:"Dependency injection + traits"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Test Fixtures"})}),(0,t.jsx)(n.td,{children:"\u2705 Required"}),(0,t.jsx)(n.td,{children:"All external APIs have fixtures"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Integration Tests"})}),(0,t.jsx)(n.td,{children:"\u2705 Required"}),(0,t.jsx)(n.td,{children:"All endpoints + providers"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"E2E Tests"})}),(0,t.jsx)(n.td,{children:"\u2705 Required"}),(0,t.jsx)(n.td,{children:"10-20 BDD scenarios"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"CI/CD Pipeline"})}),(0,t.jsx)(n.td,{children:"\u2705 Required"}),(0,t.jsx)(n.td,{children:"4 job types + quality gates"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Pre-Commit Hooks"})}),(0,t.jsx)(n.td,{children:"\u2705 Required"}),(0,t.jsx)(n.td,{children:"5 hooks configured"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Quality Gates"})}),(0,t.jsx)(n.td,{children:"\u2705 Required"}),(0,t.jsx)(n.td,{children:"Coverage + linting enforced"})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-license",children:"\ud83d\udcdc License"}),"\n",(0,t.jsxs)(n.p,{children:["This OpenSpec testing requirements specification is licensed under ",(0,t.jsx)(n.strong,{children:"MIT License"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"Copyright \xa9 2026 Velluma"}),"\n",(0,t.jsx)(n.p,{children:'Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of Software, and to permit persons to whom Software is furnished to do so, subject to the following conditions:'}),"\n",(0,t.jsx)(n.p,{children:"The above copyright notice and this permission notice shall be included in all copies or substantial portions of Software."}),"\n",(0,t.jsx)(n.p,{children:'THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.em,{children:"Testing Requirements Specification v1.0.0"}),"\n",(0,t.jsx)(n.em,{children:"Last Updated: 2026-01-07"}),"\n",(0,t.jsx)(n.em,{children:"OpenSpec-Compliant"})]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},8453(e,n,s){s.d(n,{R:()=>l,x:()=>d});var i=s(6540);const t={},r=i.createContext(t);function l(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);