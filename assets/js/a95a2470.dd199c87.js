"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[2036],{9610(e,n,r){r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"integrations/mcp-server","title":"MCP Server Integration Guide","description":"Comprehensive guide for integrating Aeterna via Model Context Protocol (MCP) servers.","source":"@site/docs/integrations/mcp-server.md","sourceDirName":"integrations","slug":"/integrations/mcp-server","permalink":"/aeterna/docs/integrations/mcp-server","draft":false,"unlisted":false,"editUrl":"https://github.com/kikokikok/aeterna/tree/main/website/docs/integrations/mcp-server.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"CCA Database Migrations","permalink":"/aeterna/docs/cca/migrations"},"next":{"title":"OpenCode Integration Guide","permalink":"/aeterna/docs/integrations/opencode-integration"}}');var t=r(4848),i=r(8453);const c={},d="MCP Server Integration Guide",l={},o=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"Overview",id:"overview",level:2},{value:"When to Use MCP Server",id:"when-to-use-mcp-server",level:2},{value:"Choose MCP Server When:",id:"choose-mcp-server-when",level:3},{value:"Choose NPM Plugin When:",id:"choose-npm-plugin-when",level:3},{value:"Quick Start",id:"quick-start",level:2},{value:"Local Setup (Stdio Transport)",id:"local-setup-stdio-transport",level:3},{value:"Remote Setup (HTTP Transport)",id:"remote-setup-http-transport",level:3},{value:"Server Transports",id:"server-transports",level:2},{value:"Stdio Transport (Local)",id:"stdio-transport-local",level:3},{value:"HTTP Transport (Remote)",id:"http-transport-remote",level:3},{value:"Tool Registration",id:"tool-registration",level:2},{value:"Tool Listing",id:"tool-listing",level:3},{value:"Tool Invocation",id:"tool-invocation",level:3},{value:"Complete Tool Reference",id:"complete-tool-reference",level:3},{value:"Resource Exposure",id:"resource-exposure",level:2},{value:"Resource Listing",id:"resource-listing",level:3},{value:"Resource Reading",id:"resource-reading",level:3},{value:"Resource URIs",id:"resource-uris",level:3},{value:"Authentication",id:"authentication",level:2},{value:"No Authentication (Development)",id:"no-authentication-development",level:3},{value:"API Key Authentication",id:"api-key-authentication",level:3},{value:"JWT Authentication (Enterprise)",id:"jwt-authentication-enterprise",level:3},{value:"Cedar Authorization",id:"cedar-authorization",level:3},{value:"Configuration Reference",id:"configuration-reference",level:2},{value:"Server Configuration File",id:"server-configuration-file",level:3},{value:"Environment Variables",id:"environment-variables",level:3},{value:"Client Configuration (OpenCode)",id:"client-configuration-opencode",level:3},{value:"Deployment Patterns",id:"deployment-patterns",level:2},{value:"Pattern 1: Local Development",id:"pattern-1-local-development",level:3},{value:"Pattern 2: Team Server",id:"pattern-2-team-server",level:3},{value:"Pattern 3: Enterprise Multi-Tenant",id:"pattern-3-enterprise-multi-tenant",level:3},{value:"Comparison: NPM Plugin vs MCP Server",id:"comparison-npm-plugin-vs-mcp-server",level:2},{value:"Feature Matrix",id:"feature-matrix",level:3},{value:"Decision Matrix",id:"decision-matrix",level:3},{value:"Hybrid Approach",id:"hybrid-approach",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Connection Issues",id:"connection-issues",level:3},{value:"Cannot Connect to MCP Server",id:"cannot-connect-to-mcp-server",level:4},{value:"Timeout on Tool Calls",id:"timeout-on-tool-calls",level:4},{value:"Authentication Issues",id:"authentication-issues",level:3},{value:"Invalid API Key",id:"invalid-api-key",level:4},{value:"JWT Token Invalid",id:"jwt-token-invalid",level:4},{value:"Tool Execution Issues",id:"tool-execution-issues",level:3},{value:"Tool Not Found",id:"tool-not-found",level:4},{value:"Permission Denied",id:"permission-denied",level:4},{value:"Resource Access Issues",id:"resource-access-issues",level:3},{value:"Resource Not Found",id:"resource-not-found",level:4},{value:"Debug Mode",id:"debug-mode",level:3},{value:"Health Check Endpoint",id:"health-check-endpoint",level:3},{value:"Metrics Endpoint",id:"metrics-endpoint",level:3},{value:"Next Steps",id:"next-steps",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"mcp-server-integration-guide",children:"MCP Server Integration Guide"})}),"\n",(0,t.jsx)(n.p,{children:"Comprehensive guide for integrating Aeterna via Model Context Protocol (MCP) servers."}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#overview",children:"Overview"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#when-to-use-mcp-server",children:"When to Use MCP Server"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#quick-start",children:"Quick Start"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#server-transports",children:"Server Transports"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#tool-registration",children:"Tool Registration"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#resource-exposure",children:"Resource Exposure"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#authentication",children:"Authentication"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#configuration-reference",children:"Configuration Reference"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#deployment-patterns",children:"Deployment Patterns"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#comparison-npm-plugin-vs-mcp-server",children:"Comparison: NPM Plugin vs MCP Server"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#troubleshooting",children:"Troubleshooting"})}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(n.p,{children:"Aeterna provides an MCP (Model Context Protocol) server for AI assistant integrations. MCP is an open protocol that enables AI assistants to interact with external tools and data sources in a standardized way."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                         MCP SERVER ARCHITECTURE                              \u2502\n\u2502                                                                              \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510          \u2502\n\u2502   \u2502    OpenCode    \u2502     \u2502     Claude     \u2502     \u2502   Other MCP    \u2502          \u2502\n\u2502   \u2502    Client      \u2502     \u2502    Desktop     \u2502     \u2502   Clients      \u2502          \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518          \u2502\n\u2502           \u2502                      \u2502                      \u2502                    \u2502\n\u2502           \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                    \u2502\n\u2502                                  \u2502                                           \u2502\n\u2502                                  \u25bc                                           \u2502\n\u2502                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                               \u2502\n\u2502                    \u2502       MCP PROTOCOL      \u2502                               \u2502\n\u2502                    \u2502  - ListTools            \u2502                               \u2502\n\u2502                    \u2502  - CallTool             \u2502                               \u2502\n\u2502                    \u2502  - ListResources        \u2502                               \u2502\n\u2502                    \u2502  - ReadResource         \u2502                               \u2502\n\u2502                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                               \u2502\n\u2502                                 \u2502                                            \u2502\n\u2502                                 \u25bc                                            \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u2502\n\u2502   \u2502                     AETERNA MCP SERVER                           \u2502       \u2502\n\u2502   \u2502                                                                  \u2502       \u2502\n\u2502   \u2502   Transport: Stdio (local) or HTTP/SSE (remote)                 \u2502       \u2502\n\u2502   \u2502                                                                  \u2502       \u2502\n\u2502   \u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502       \u2502\n\u2502   \u2502   \u2502     8 Tools     \u2502  \u2502    Resources    \u2502  \u2502     Auth     \u2502    \u2502       \u2502\n\u2502   \u2502   \u2502  memory_*       \u2502  \u2502  knowledge://   \u2502  \u2502  JWT/API Key \u2502    \u2502       \u2502\n\u2502   \u2502   \u2502  knowledge_*    \u2502  \u2502  memory://      \u2502  \u2502  Cedar       \u2502    \u2502       \u2502\n\u2502   \u2502   \u2502  sync_*         \u2502  \u2502  governance://  \u2502  \u2502              \u2502    \u2502       \u2502\n\u2502   \u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502       \u2502\n\u2502   \u2502                                                                  \u2502       \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2502\n\u2502                                  \u2502                                           \u2502\n\u2502                                  \u25bc                                           \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u2502\n\u2502   \u2502                      AETERNA BACKEND                             \u2502       \u2502\n\u2502   \u2502                                                                  \u2502       \u2502\n\u2502   \u2502   Memory (Qdrant)  \u2502  Knowledge (Git)  \u2502  Governance (Cedar)    \u2502       \u2502\n\u2502   \u2502                                                                  \u2502       \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2502\n\u2502                                                                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"when-to-use-mcp-server",children:"When to Use MCP Server"}),"\n",(0,t.jsx)(n.h3,{id:"choose-mcp-server-when",children:"Choose MCP Server When:"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Scenario"}),(0,t.jsx)(n.th,{children:"Why MCP Server"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Remote/centralized deployment"})}),(0,t.jsx)(n.td,{children:"Single server for multiple clients"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Enterprise fleet"})}),(0,t.jsx)(n.td,{children:"Consistent configuration across 100s of developers"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Strict security requirements"})}),(0,t.jsx)(n.td,{children:"Centralized auth, audit logging"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Non-OpenCode clients"})}),(0,t.jsx)(n.td,{children:"Claude Desktop, custom MCP clients"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Network isolation"})}),(0,t.jsx)(n.td,{children:"Backend behind firewall, MCP as gateway"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"choose-npm-plugin-when",children:"Choose NPM Plugin When:"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Scenario"}),(0,t.jsx)(n.th,{children:"Why NPM Plugin"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Local development"})}),(0,t.jsx)(n.td,{children:"Full hooks, deep integration"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Rich context injection"})}),(0,t.jsx)(n.td,{children:"System prompt, chat hooks"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Session lifecycle"})}),(0,t.jsx)(n.td,{children:"Automatic capture, promotion"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"OpenCode-specific features"})}),(0,t.jsx)(n.td,{children:"Permission hooks, event handling"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Rule of thumb"}),": Start with NPM Plugin for development, deploy MCP Server for enterprise."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,t.jsx)(n.h3,{id:"local-setup-stdio-transport",children:"Local Setup (Stdio Transport)"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Install the MCP server:"})}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cargo install aeterna-mcp\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Configure OpenCode:"})}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-jsonc",children:'// opencode.jsonc\n{\n  "$schema": "https://opencode.ai/config.json",\n  "mcp": {\n    "aeterna": {\n      "type": "local",\n      "command": ["aeterna-mcp", "--mode", "stdio"],\n      "env": {\n        "AETERNA_PROJECT": "${project.name}",\n        "AETERNA_CONFIG": ".aeterna/config.toml"\n      }\n    }\n  }\n}\n'})}),"\n",(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Start using:"})}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"You: Search my memory for database preferences\n\nAI: [Uses aeterna_memory_search]\nFound 2 relevant memories from Aeterna...\n"})}),"\n",(0,t.jsx)(n.h3,{id:"remote-setup-http-transport",children:"Remote Setup (HTTP Transport)"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Deploy the MCP server:"})}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Start HTTP server\naeterna-mcp --mode http --port 8081\n\n# Or with Docker\ndocker run -p 8081:8081 aeterna/mcp-server:latest\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Configure OpenCode:"})}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-jsonc",children:'// opencode.jsonc\n{\n  "$schema": "https://opencode.ai/config.json",\n  "mcp": {\n    "aeterna": {\n      "type": "remote",\n      "url": "https://aeterna.company.com/mcp",\n      "headers": {\n        "Authorization": "Bearer ${AETERNA_TOKEN}"\n      }\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"server-transports",children:"Server Transports"}),"\n",(0,t.jsx)(n.h3,{id:"stdio-transport-local",children:"Stdio Transport (Local)"}),"\n",(0,t.jsx)(n.p,{children:"The stdio transport runs the MCP server as a subprocess, communicating via stdin/stdout."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     stdin      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   OpenCode  \u2502 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6 \u2502  aeterna-mcp    \u2502\n\u2502   (parent)  \u2502 \u25c0\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \u2502   (subprocess)  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    stdout      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Advantages:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Zero network configuration"}),"\n",(0,t.jsx)(n.li,{children:"Process isolation per client"}),"\n",(0,t.jsx)(n.li,{children:"No authentication required (trusts parent process)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Configuration:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-jsonc",children:'{\n  "mcp": {\n    "aeterna": {\n      "type": "local",\n      "command": ["aeterna-mcp", "--mode", "stdio"],\n      "env": {\n        "AETERNA_PROJECT": "my-project",\n        "AETERNA_QDRANT_URL": "http://localhost:6333",\n        "AETERNA_KNOWLEDGE_PATH": "./knowledge-repo"\n      }\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Command-line options:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"aeterna-mcp --mode stdio [OPTIONS]\n\nOptions:\n  --config <PATH>       Path to config file [default: .aeterna/config.toml]\n  --project <NAME>      Project name override\n  --log-level <LEVEL>   Log level: error, warn, info, debug, trace\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"http-transport-remote",children:"HTTP Transport (Remote)"}),"\n",(0,t.jsx)(n.p,{children:"The HTTP transport exposes the MCP server over HTTP with Server-Sent Events (SSE) for streaming."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    HTTPS     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   OpenCode  \u2502 \u25c0\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6 \u2502   aeterna-mcp   \u2502\n\u2502   (client)  \u2502    SSE       \u2502   (HTTP server) \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518              \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Advantages:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Centralized deployment"}),"\n",(0,t.jsx)(n.li,{children:"Enterprise authentication"}),"\n",(0,t.jsx)(n.li,{children:"Audit logging"}),"\n",(0,t.jsx)(n.li,{children:"Load balancing possible"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Configuration:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-jsonc",children:'{\n  "mcp": {\n    "aeterna": {\n      "type": "remote",\n      "url": "https://aeterna.company.com/mcp",\n      "headers": {\n        "Authorization": "Bearer ${AETERNA_TOKEN}",\n        "X-Tenant-ID": "acme-corp"\n      }\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Server startup:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"aeterna-mcp --mode http [OPTIONS]\n\nOptions:\n  --port <PORT>         HTTP port [default: 8081]\n  --host <HOST>         Bind address [default: 0.0.0.0]\n  --tls-cert <PATH>     TLS certificate path\n  --tls-key <PATH>      TLS private key path\n  --auth <MODE>         Auth mode: none, api-key, jwt [default: api-key]\n  --config <PATH>       Path to config file\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"tool-registration",children:"Tool Registration"}),"\n",(0,t.jsx)(n.p,{children:"The MCP server exposes all 8 Aeterna tools via the MCP protocol."}),"\n",(0,t.jsx)(n.h3,{id:"tool-listing",children:"Tool Listing"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'// Client request\n{ method: "tools/list" }\n\n// Server response\n{\n  tools: [\n    {\n      name: "aeterna_memory_add",\n      description: "Add a memory entry to Aeterna...",\n      inputSchema: {\n        type: "object",\n        properties: {\n          content: { type: "string", description: "The content to remember" },\n          layer: { \n            type: "string", \n            enum: ["working", "session", "episodic"],\n            description: "Memory layer (default: working)" \n          },\n          tags: { \n            type: "array", \n            items: { type: "string" },\n            description: "Tags for categorization" \n          },\n          importance: { \n            type: "number", \n            minimum: 0, \n            maximum: 1,\n            description: "Importance score 0-1" \n          }\n        },\n        required: ["content"]\n      }\n    },\n    // ... 7 more tools\n  ]\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"tool-invocation",children:"Tool Invocation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'// Client request\n{\n  method: "tools/call",\n  params: {\n    name: "aeterna_memory_search",\n    arguments: {\n      query: "database preferences",\n      limit: 5,\n      threshold: 0.7\n    }\n  }\n}\n\n// Server response\n{\n  content: [\n    {\n      type: "text",\n      text: "Found 3 relevant memories:\\n\\n1. \\"Use PostgreSQL for new services\\" (project, 0.92)\\n2. \\"User prefers NoSQL for analytics\\" (user, 0.85)\\n3. \\"Team standard: connection pooling\\" (team, 0.78)"\n    }\n  ]\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"complete-tool-reference",children:"Complete Tool Reference"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Tool"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Required Args"}),(0,t.jsx)(n.th,{children:"Optional Args"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"aeterna_memory_add"})}),(0,t.jsx)(n.td,{children:"Store memory"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"content"})}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"layer"}),", ",(0,t.jsx)(n.code,{children:"tags"}),", ",(0,t.jsx)(n.code,{children:"importance"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"aeterna_memory_search"})}),(0,t.jsx)(n.td,{children:"Search memories"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"query"})}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"layers"}),", ",(0,t.jsx)(n.code,{children:"limit"}),", ",(0,t.jsx)(n.code,{children:"threshold"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"aeterna_memory_get"})}),(0,t.jsx)(n.td,{children:"Get by ID"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"memoryId"})}),(0,t.jsx)(n.td,{children:"-"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"aeterna_memory_promote"})}),(0,t.jsx)(n.td,{children:"Promote layer"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"memoryId"}),", ",(0,t.jsx)(n.code,{children:"targetLayer"})]}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"reason"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"aeterna_knowledge_query"})}),(0,t.jsx)(n.td,{children:"Search knowledge"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"query"})}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"scope"}),", ",(0,t.jsx)(n.code,{children:"types"}),", ",(0,t.jsx)(n.code,{children:"limit"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"aeterna_knowledge_propose"})}),(0,t.jsx)(n.td,{children:"Propose item"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"type"}),", ",(0,t.jsx)(n.code,{children:"title"}),", ",(0,t.jsx)(n.code,{children:"summary"}),", ",(0,t.jsx)(n.code,{children:"content"})]}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"tags"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"aeterna_sync_status"})}),(0,t.jsx)(n.td,{children:"Check sync"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"-"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"aeterna_governance_status"})}),(0,t.jsx)(n.td,{children:"Check governance"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"checkViolations"})})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"resource-exposure",children:"Resource Exposure"}),"\n",(0,t.jsx)(n.p,{children:"MCP servers can expose resources that clients can read. Aeterna exposes knowledge and memory as resources."}),"\n",(0,t.jsx)(n.h3,{id:"resource-listing",children:"Resource Listing"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'// Client request\n{ method: "resources/list" }\n\n// Server response\n{\n  resources: [\n    {\n      uri: "aeterna://knowledge/project",\n      name: "Project Knowledge",\n      description: "ADRs, policies, and patterns for the current project",\n      mimeType: "application/json"\n    },\n    {\n      uri: "aeterna://knowledge/team",\n      name: "Team Knowledge",\n      description: "Team-level knowledge items"\n    },\n    {\n      uri: "aeterna://memory/session",\n      name: "Session Memory",\n      description: "Current session working memory"\n    },\n    {\n      uri: "aeterna://memory/user",\n      name: "User Memory",\n      description: "User preferences and history"\n    },\n    {\n      uri: "aeterna://governance/policies",\n      name: "Active Policies",\n      description: "Policies affecting current context"\n    }\n  ]\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"resource-reading",children:"Resource Reading"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'// Client request\n{\n  method: "resources/read",\n  params: {\n    uri: "aeterna://knowledge/project"\n  }\n}\n\n// Server response\n{\n  contents: [\n    {\n      uri: "aeterna://knowledge/project",\n      mimeType: "application/json",\n      text: JSON.stringify({\n        adrs: [\n          { id: "adr-042", title: "Database Selection", status: "accepted" },\n          { id: "adr-047", title: "TigerBeetle Ledger", status: "accepted" }\n        ],\n        policies: [\n          { id: "security-baseline", severity: "block" }\n        ],\n        patterns: [\n          { id: "strangler-facade", category: "migration" }\n        ]\n      })\n    }\n  ]\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"resource-uris",children:"Resource URIs"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"URI Pattern"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Example"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"aeterna://knowledge/{scope}"})}),(0,t.jsx)(n.td,{children:"Knowledge by scope"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"aeterna://knowledge/team"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"aeterna://knowledge/{scope}/{type}"})}),(0,t.jsx)(n.td,{children:"Knowledge by type"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"aeterna://knowledge/project/adr"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"aeterna://knowledge/item/{id}"})}),(0,t.jsx)(n.td,{children:"Specific item"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"aeterna://knowledge/item/adr-042"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"aeterna://memory/{layer}"})}),(0,t.jsx)(n.td,{children:"Memory by layer"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"aeterna://memory/session"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"aeterna://memory/item/{id}"})}),(0,t.jsx)(n.td,{children:"Specific memory"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"aeterna://memory/item/mem_abc123"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"aeterna://governance/policies"})}),(0,t.jsx)(n.td,{children:"Active policies"}),(0,t.jsx)(n.td,{children:"-"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"aeterna://governance/violations"})}),(0,t.jsx)(n.td,{children:"Current violations"}),(0,t.jsx)(n.td,{children:"-"})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"authentication",children:"Authentication"}),"\n",(0,t.jsx)(n.h3,{id:"no-authentication-development",children:"No Authentication (Development)"}),"\n",(0,t.jsx)(n.p,{children:"For local development with stdio transport:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"aeterna-mcp --mode stdio --auth none\n"})}),"\n",(0,t.jsx)(n.h3,{id:"api-key-authentication",children:"API Key Authentication"}),"\n",(0,t.jsx)(n.p,{children:"For simple deployments:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Server startup\naeterna-mcp --mode http --auth api-key\n\n# Generate API key\naeterna-mcp keygen --name "dev-team" --expires 30d\n# Output: aet_k_abc123...\n\n# Client configuration\nexport AETERNA_TOKEN="aet_k_abc123..."\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"API Key Format:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"aet_k_{random_32_chars}\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Header:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Authorization: Bearer aet_k_abc123...\n"})}),"\n",(0,t.jsx)(n.h3,{id:"jwt-authentication-enterprise",children:"JWT Authentication (Enterprise)"}),"\n",(0,t.jsx)(n.p,{children:"For enterprise deployments with identity providers:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Server startup\naeterna-mcp --mode http --auth jwt \\\n  --jwt-issuer "https://auth.company.com" \\\n  --jwt-audience "aeterna-mcp"\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Configuration file:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'# aeterna-mcp.toml\n[auth]\nmode = "jwt"\n\n[auth.jwt]\nissuer = "https://auth.company.com"\naudience = "aeterna-mcp"\njwks_url = "https://auth.company.com/.well-known/jwks.json"\n# Required claims for authorization\nrequired_claims = ["sub", "tenant_id"]\n# Map JWT claims to Aeterna context\nclaim_mappings = { tenant_id = "company", department = "org", team = "team" }\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"JWT Claims Mapping:"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"JWT Claim"}),(0,t.jsx)(n.th,{children:"Aeterna Context"}),(0,t.jsx)(n.th,{children:"Usage"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"sub"})}),(0,t.jsx)(n.td,{children:"User ID"}),(0,t.jsx)(n.td,{children:"Memory layer filtering"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"tenant_id"})}),(0,t.jsx)(n.td,{children:"Company"}),(0,t.jsx)(n.td,{children:"Multi-tenant isolation"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"department"})}),(0,t.jsx)(n.td,{children:"Org"}),(0,t.jsx)(n.td,{children:"Org-level knowledge"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"team"})}),(0,t.jsx)(n.td,{children:"Team"}),(0,t.jsx)(n.td,{children:"Team-level knowledge"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"roles"})}),(0,t.jsx)(n.td,{children:"RBAC roles"}),(0,t.jsx)(n.td,{children:"Permission checks"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"cedar-authorization",children:"Cedar Authorization"}),"\n",(0,t.jsx)(n.p,{children:"For fine-grained access control:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-cedar",children:'// Allow users to search memories in their scope\npermit (\n    principal,\n    action == Action::"MemorySearch",\n    resource\n)\nwhen {\n    resource.layer in principal.accessibleLayers\n};\n\n// Allow tech leads to propose knowledge\npermit (\n    principal,\n    action == Action::"KnowledgePropose",\n    resource\n)\nwhen {\n    principal.role == "TechLead" ||\n    principal.role == "Architect" ||\n    principal.role == "Admin"\n};\n\n// Deny cross-tenant access\nforbid (\n    principal,\n    action,\n    resource\n)\nwhen {\n    principal.tenantId != resource.tenantId\n};\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"configuration-reference",children:"Configuration Reference"}),"\n",(0,t.jsx)(n.h3,{id:"server-configuration-file",children:"Server Configuration File"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'# aeterna-mcp.toml\n\n[server]\nmode = "http"           # stdio, http\nport = 8081\nhost = "0.0.0.0"\n\n[server.tls]\nenabled = true\ncert_path = "/etc/aeterna/tls/cert.pem"\nkey_path = "/etc/aeterna/tls/key.pem"\n\n[auth]\nmode = "jwt"            # none, api-key, jwt\n\n[auth.api_key]\nkeys_file = "/etc/aeterna/api-keys.json"\n\n[auth.jwt]\nissuer = "https://auth.company.com"\naudience = "aeterna-mcp"\njwks_url = "https://auth.company.com/.well-known/jwks.json"\n\n[backend]\n# Aeterna backend configuration\n[backend.memory]\nprovider = "qdrant"\nurl = "http://qdrant:6333"\n\n[backend.knowledge]\nprovider = "git"\nrepository = "/data/knowledge-repo"\n\n[backend.governance]\nprovider = "cedar"\nschema_path = "/etc/aeterna/cedar.cedarschema"\n\n[logging]\nlevel = "info"          # error, warn, info, debug, trace\nformat = "json"         # text, json\noutput = "stdout"       # stdout, file\nfile_path = "/var/log/aeterna/mcp.log"\n\n[metrics]\nenabled = true\nport = 9090\npath = "/metrics"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"environment-variables",children:"Environment Variables"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Variable"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Default"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AETERNA_MCP_MODE"})}),(0,t.jsx)(n.td,{children:"Server mode (stdio, http)"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"stdio"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AETERNA_MCP_PORT"})}),(0,t.jsx)(n.td,{children:"HTTP port"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"8081"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AETERNA_MCP_HOST"})}),(0,t.jsx)(n.td,{children:"Bind address"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"0.0.0.0"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AETERNA_MCP_AUTH"})}),(0,t.jsx)(n.td,{children:"Auth mode"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"api-key"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AETERNA_QDRANT_URL"})}),(0,t.jsx)(n.td,{children:"Qdrant server URL"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"http://localhost:6333"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AETERNA_KNOWLEDGE_PATH"})}),(0,t.jsx)(n.td,{children:"Git repository path"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"./knowledge-repo"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AETERNA_LOG_LEVEL"})}),(0,t.jsx)(n.td,{children:"Log level"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"info"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AETERNA_JWT_ISSUER"})}),(0,t.jsx)(n.td,{children:"JWT issuer URL"}),(0,t.jsx)(n.td,{children:"-"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AETERNA_JWT_AUDIENCE"})}),(0,t.jsx)(n.td,{children:"JWT audience"}),(0,t.jsx)(n.td,{children:"-"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"client-configuration-opencode",children:"Client Configuration (OpenCode)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-jsonc",children:'// opencode.jsonc - Full reference\n{\n  "$schema": "https://opencode.ai/config.json",\n  \n  "mcp": {\n    "aeterna": {\n      // Local (stdio) configuration\n      "type": "local",\n      "command": ["aeterna-mcp", "--mode", "stdio"],\n      "env": {\n        "AETERNA_PROJECT": "${project.name}",\n        "AETERNA_CONFIG": ".aeterna/config.toml",\n        "AETERNA_LOG_LEVEL": "info"\n      },\n      \n      // OR Remote (HTTP) configuration\n      "type": "remote",\n      "url": "https://aeterna.company.com/mcp",\n      "headers": {\n        "Authorization": "Bearer ${AETERNA_TOKEN}",\n        "X-Tenant-ID": "${AETERNA_TENANT}",\n        "X-Project": "${project.name}"\n      },\n      \n      // Connection settings\n      "timeout": 30000,           // Request timeout (ms)\n      "retries": 3,               // Retry count on failure\n      "retryDelay": 1000          // Delay between retries (ms)\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"deployment-patterns",children:"Deployment Patterns"}),"\n",(0,t.jsx)(n.h3,{id:"pattern-1-local-development",children:"Pattern 1: Local Development"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   OpenCode  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502 stdio\n       \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 aeterna-mcp \u2502\u2500\u2500\u2500\u2500\u25b6\u2502   Qdrant    \u2502 (Docker)\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502\n       \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Git Repo   \u2502 (local)\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Setup:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Start dependencies\ndocker-compose up -d qdrant\n\n# Configure OpenCode\ncat > opencode.jsonc << \'EOF\'\n{\n  "mcp": {\n    "aeterna": {\n      "type": "local",\n      "command": ["aeterna-mcp", "--mode", "stdio"]\n    }\n  }\n}\nEOF\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"pattern-2-team-server",children:"Pattern 2: Team Server"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Dev 1      \u2502  \u2502  Dev 2      \u2502  \u2502  Dev 3      \u2502\n\u2502  OpenCode   \u2502  \u2502  OpenCode   \u2502  \u2502  OpenCode   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502                \u2502                \u2502\n       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                        \u2502 HTTPS\n                        \u25bc\n               \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n               \u2502   aeterna-mcp   \u2502\n               \u2502   (team server) \u2502\n               \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                        \u2502\n          \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n          \u2502             \u2502             \u2502\n          \u25bc             \u25bc             \u25bc\n    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n    \u2502  Qdrant  \u2502  \u2502 Git Repo \u2502  \u2502  Redis   \u2502\n    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Setup:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'# docker-compose.yml\nservices:\n  aeterna-mcp:\n    image: aeterna/mcp-server:latest\n    ports:\n      - "8081:8081"\n    environment:\n      - AETERNA_MCP_MODE=http\n      - AETERNA_MCP_AUTH=api-key\n      - AETERNA_QDRANT_URL=http://qdrant:6333\n    depends_on:\n      - qdrant\n      - redis\n\n  qdrant:\n    image: qdrant/qdrant:latest\n    volumes:\n      - qdrant_data:/qdrant/storage\n\n  redis:\n    image: redis:7-alpine\n    volumes:\n      - redis_data:/data\n\nvolumes:\n  qdrant_data:\n  redis_data:\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"pattern-3-enterprise-multi-tenant",children:"Pattern 3: Enterprise Multi-Tenant"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502       Load Balancer         \u2502\n                    \u2502     (TLS termination)       \u2502\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                   \u2502\n          \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n          \u2502                        \u2502                        \u2502\n          \u25bc                        \u25bc                        \u25bc\n   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510          \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510          \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n   \u2502 aeterna-mcp \u2502          \u2502 aeterna-mcp \u2502          \u2502 aeterna-mcp \u2502\n   \u2502  replica 1  \u2502          \u2502  replica 2  \u2502          \u2502  replica 3  \u2502\n   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518          \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518          \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n          \u2502                        \u2502                        \u2502\n          \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                   \u2502\n                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502              \u2502              \u2502\n                    \u25bc              \u25bc              \u25bc\n             \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n             \u2502  Qdrant  \u2502   \u2502PostgreSQL\u2502   \u2502  Redis   \u2502\n             \u2502 cluster  \u2502   \u2502 (events) \u2502   \u2502 (cache)  \u2502\n             \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Kubernetes deployment:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'# aeterna-mcp-deployment.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: aeterna-mcp\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: aeterna-mcp\n  template:\n    metadata:\n      labels:\n        app: aeterna-mcp\n    spec:\n      containers:\n      - name: aeterna-mcp\n        image: aeterna/mcp-server:latest\n        ports:\n        - containerPort: 8081\n        env:\n        - name: AETERNA_MCP_MODE\n          value: "http"\n        - name: AETERNA_MCP_AUTH\n          value: "jwt"\n        - name: AETERNA_JWT_ISSUER\n          valueFrom:\n            secretKeyRef:\n              name: aeterna-secrets\n              key: jwt-issuer\n        resources:\n          requests:\n            memory: "256Mi"\n            cpu: "250m"\n          limits:\n            memory: "512Mi"\n            cpu: "500m"\n        readinessProbe:\n          httpGet:\n            path: /health\n            port: 8081\n          initialDelaySeconds: 5\n          periodSeconds: 10\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: aeterna-mcp\nspec:\n  selector:\n    app: aeterna-mcp\n  ports:\n  - port: 8081\n    targetPort: 8081\n---\napiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: aeterna-mcp\n  annotations:\n    kubernetes.io/ingress.class: nginx\n    cert-manager.io/cluster-issuer: letsencrypt-prod\nspec:\n  tls:\n  - hosts:\n    - aeterna.company.com\n    secretName: aeterna-tls\n  rules:\n  - host: aeterna.company.com\n    http:\n      paths:\n      - path: /mcp\n        pathType: Prefix\n        backend:\n          service:\n            name: aeterna-mcp\n            port:\n              number: 8081\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"comparison-npm-plugin-vs-mcp-server",children:"Comparison: NPM Plugin vs MCP Server"}),"\n",(0,t.jsx)(n.h3,{id:"feature-matrix",children:"Feature Matrix"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Feature"}),(0,t.jsx)(n.th,{children:"NPM Plugin"}),(0,t.jsx)(n.th,{children:"MCP Server (Stdio)"}),(0,t.jsx)(n.th,{children:"MCP Server (HTTP)"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"All 8 tools"})}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"Yes"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Chat message hook"})}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:"No"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"System prompt injection"})}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:"No"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Tool execution capture"})}),(0,t.jsx)(n.td,{children:"Automatic"}),(0,t.jsx)(n.td,{children:"Manual"}),(0,t.jsx)(n.td,{children:"Manual"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Permission hooks"})}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:"No"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Session lifecycle"})}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"Limited"}),(0,t.jsx)(n.td,{children:"Limited"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Resource access"})}),(0,t.jsx)(n.td,{children:"Via backend"}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"Yes"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Remote deployment"})}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:"Yes"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Enterprise auth"})}),(0,t.jsx)(n.td,{children:"Via backend"}),(0,t.jsx)(n.td,{children:"Process"}),(0,t.jsx)(n.td,{children:"JWT/API Key"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Multi-client"})}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:"Yes"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Load balancing"})}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:"Yes"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"decision-matrix",children:"Decision Matrix"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Your Situation"}),(0,t.jsx)(n.th,{children:"Recommendation"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Single developer, local dev"}),(0,t.jsx)(n.td,{children:"NPM Plugin"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Team sharing one machine"}),(0,t.jsx)(n.td,{children:"MCP Server (Stdio)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Remote team, centralized"}),(0,t.jsx)(n.td,{children:"MCP Server (HTTP)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Enterprise fleet (100+)"}),(0,t.jsx)(n.td,{children:"MCP Server (HTTP) + NPM Plugin"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Claude Desktop / other clients"}),(0,t.jsx)(n.td,{children:"MCP Server only"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Maximum features"}),(0,t.jsx)(n.td,{children:"NPM Plugin"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Maximum security"}),(0,t.jsx)(n.td,{children:"MCP Server (HTTP) with JWT"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"hybrid-approach",children:"Hybrid Approach"}),"\n",(0,t.jsx)(n.p,{children:"For enterprise deployments, combine both:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-jsonc",children:'// opencode.jsonc - Hybrid configuration\n{\n  "$schema": "https://opencode.ai/config.json",\n  \n  // NPM Plugin for hooks and deep integration\n  "plugin": ["@kiko-aeterna/opencode-plugin"],\n  \n  // Plugin configured to use remote MCP as backend\n  "pluginConfig": {\n    "@kiko-aeterna/opencode-plugin": {\n      "backend": {\n        "type": "mcp",\n        "url": "https://aeterna.company.com/mcp",\n        "auth": {\n          "type": "jwt",\n          "tokenEnv": "AETERNA_TOKEN"\n        }\n      }\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"This gives you:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"All hook functionality (chat, system prompt, session)"}),"\n",(0,t.jsx)(n.li,{children:"Centralized backend (auth, audit, multi-tenant)"}),"\n",(0,t.jsx)(n.li,{children:"Enterprise security (JWT, Cedar)"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsx)(n.h3,{id:"connection-issues",children:"Connection Issues"}),"\n",(0,t.jsx)(n.h4,{id:"cannot-connect-to-mcp-server",children:"Cannot Connect to MCP Server"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Error: connection refused to aeterna-mcp\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Diagnosis:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Check if server is running (HTTP mode)\ncurl -v https://aeterna.company.com/mcp/health\n\n# Check if process is running (stdio mode)\nps aux | grep aeterna-mcp\n\n# Check logs\naeterna-mcp --mode http --log-level debug\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Verify server is started: ",(0,t.jsx)(n.code,{children:"aeterna-mcp --mode http"})]}),"\n",(0,t.jsxs)(n.li,{children:["Check port binding: ",(0,t.jsx)(n.code,{children:"netstat -tlnp | grep 8081"})]}),"\n",(0,t.jsx)(n.li,{children:"Verify firewall rules allow traffic"}),"\n",(0,t.jsx)(n.li,{children:"Check TLS certificates are valid"}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"timeout-on-tool-calls",children:"Timeout on Tool Calls"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Error: request timeout after 30000ms\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Increase timeout in client config"}),"\n",(0,t.jsx)(n.li,{children:"Check backend connectivity (Qdrant, Git)"}),"\n",(0,t.jsx)(n.li,{children:"Reduce result limits for large queries"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"authentication-issues",children:"Authentication Issues"}),"\n",(0,t.jsx)(n.h4,{id:"invalid-api-key",children:"Invalid API Key"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Error: 401 Unauthorized - Invalid API key\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Diagnosis:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Verify key format\necho $AETERNA_TOKEN | head -c 10\n# Should start with: aet_k_\n\n# Test key\ncurl -H "Authorization: Bearer $AETERNA_TOKEN" \\\n  https://aeterna.company.com/mcp/health\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Regenerate API key: ",(0,t.jsx)(n.code,{children:'aeterna-mcp keygen --name "dev"'})]}),"\n",(0,t.jsx)(n.li,{children:"Check key hasn't expired"}),"\n",(0,t.jsx)(n.li,{children:"Verify environment variable is set"}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"jwt-token-invalid",children:"JWT Token Invalid"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Error: 401 Unauthorized - JWT validation failed\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Diagnosis:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Decode JWT (without verification)\necho $AETERNA_TOKEN | cut -d. -f2 | base64 -d | jq\n\n# Check expected claims\n# Should have: sub, tenant_id, exp\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Refresh token from identity provider"}),"\n",(0,t.jsx)(n.li,{children:"Verify issuer matches server config"}),"\n",(0,t.jsx)(n.li,{children:"Check token hasn't expired"}),"\n",(0,t.jsx)(n.li,{children:"Ensure required claims are present"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"tool-execution-issues",children:"Tool Execution Issues"}),"\n",(0,t.jsx)(n.h4,{id:"tool-not-found",children:"Tool Not Found"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Error: Unknown tool: aeterna_memory_add\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Diagnosis:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# List available tools\ncurl https://aeterna.company.com/mcp/tools/list | jq '.tools[].name'\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Verify MCP server version is current"}),"\n",(0,t.jsx)(n.li,{children:"Check tool registration in server startup"}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"permission-denied",children:"Permission Denied"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Error: Permission denied for KnowledgePropose\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Check user role: verify JWT claims"}),"\n",(0,t.jsx)(n.li,{children:"Review Cedar policies"}),"\n",(0,t.jsx)(n.li,{children:"Contact admin for elevated permissions"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"resource-access-issues",children:"Resource Access Issues"}),"\n",(0,t.jsx)(n.h4,{id:"resource-not-found",children:"Resource Not Found"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Error: Resource not found: aeterna://knowledge/project\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Diagnosis:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# List available resources\ncurl https://aeterna.company.com/mcp/resources/list | jq '.resources[].uri'\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Verify project context is set"}),"\n",(0,t.jsx)(n.li,{children:"Check knowledge repository is accessible"}),"\n",(0,t.jsx)(n.li,{children:"Ensure user has access to requested scope"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"debug-mode",children:"Debug Mode"}),"\n",(0,t.jsx)(n.p,{children:"Enable verbose logging:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Server-side\naeterna-mcp --mode http --log-level trace\n\n# Or via environment\nAETERNA_LOG_LEVEL=trace aeterna-mcp --mode http\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Log locations:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Stdio mode: stderr (visible in parent process)"}),"\n",(0,t.jsx)(n.li,{children:"HTTP mode: stdout or configured file"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"health-check-endpoint",children:"Health Check Endpoint"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Check server health\ncurl https://aeterna.company.com/mcp/health\n\n# Expected response\n{\n  "status": "healthy",\n  "version": "1.0.0",\n  "backends": {\n    "memory": "connected",\n    "knowledge": "connected",\n    "governance": "connected"\n  },\n  "uptime_seconds": 3600\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"metrics-endpoint",children:"Metrics Endpoint"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Prometheus metrics (if enabled)\ncurl https://aeterna.company.com/mcp/metrics\n\n# Key metrics\naeterna_mcp_tool_calls_total{tool="aeterna_memory_search"}\naeterna_mcp_request_duration_seconds{method="tools/call"}\naeterna_mcp_auth_failures_total{reason="invalid_token"}\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/aeterna/docs/integrations/opencode-integration",children:"OpenCode Integration Guide"})," - Full NPM plugin documentation"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/aeterna/docs/examples/strangler-fig-migration",children:"Strangler Fig Example"})," - Real-world usage"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"../../specs/06-tool-interface.md",children:"Tool Interface Specification"})," - Detailed tool contracts"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"../../openspec/changes/add-helm-chart/design.md",children:"Helm Chart Deployment"})," - Kubernetes deployment"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453(e,n,r){r.d(n,{R:()=>c,x:()=>d});var s=r(6540);const t={},i=s.createContext(t);function c(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);