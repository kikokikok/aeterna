"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[3427],{791(e,n,r){r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>t,metadata:()=>l,toc:()=>d});const l=JSON.parse('{"id":"helm/quickstart-local","title":"Local Mode Quick Start","description":"This guide helps you set up Aeterna on a local Kubernetes cluster for development and testing.","source":"@site/docs/helm/quickstart-local.md","sourceDirName":"helm","slug":"/helm/quickstart-local","permalink":"/aeterna/docs/helm/quickstart-local","draft":false,"unlisted":false,"editUrl":"https://github.com/kikokikok/aeterna/tree/main/website/docs/helm/quickstart-local.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"Introduction to Aeterna","permalink":"/aeterna/docs/"},"next":{"title":"Hybrid Mode Deployment Guide","permalink":"/aeterna/docs/helm/quickstart-hybrid"}}');var s=r(4848),a=r(8453);const t={},i="Local Mode Quick Start",c={},d=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step 1: Create Cluster",id:"step-1-create-cluster",level:2},{value:"Minikube",id:"minikube",level:3},{value:"Kind",id:"kind",level:3},{value:"K3s (K3d)",id:"k3s-k3d",level:3},{value:"Step 2: Install Aeterna",id:"step-2-install-aeterna",level:2},{value:"From Repo",id:"from-repo",level:3},{value:"From Source",id:"from-source",level:3},{value:"Step 3: Verify Installation",id:"step-3-verify-installation",level:2},{value:"Step 4: Configure LLM Provider",id:"step-4-configure-llm-provider",level:2},{value:"OpenAI",id:"openai",level:3},{value:"Anthropic",id:"anthropic",level:3},{value:"Step 5: Access Aeterna",id:"step-5-access-aeterna",level:2},{value:"Step 6: Enable Code Search (Optional)",id:"step-6-enable-code-search-optional",level:2},{value:"What&#39;s Included",id:"whats-included",level:2},{value:"Resource Usage",id:"resource-usage",level:2},{value:"Next Steps",id:"next-steps",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"ImagePullBackOff",id:"imagepullbackoff",level:3},{value:"PVC Pending",id:"pvc-pending",level:3},{value:"OOMKilled",id:"oomkilled",level:3},{value:"Pod Not Ready",id:"pod-not-ready",level:3}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"local-mode-quick-start",children:"Local Mode Quick Start"})}),"\n",(0,s.jsx)(n.p,{children:"This guide helps you set up Aeterna on a local Kubernetes cluster for development and testing."}),"\n",(0,s.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Kubernetes 1.25+ (minikube, kind, k3s, Docker Desktop)"}),"\n",(0,s.jsx)(n.li,{children:"Helm 3.10+"}),"\n",(0,s.jsx)(n.li,{children:"kubectl configured"}),"\n",(0,s.jsx)(n.li,{children:"At least 4GB RAM available for the cluster"}),"\n",(0,s.jsx)(n.li,{children:"Storage provisioner for PersistentVolumeClaims (PVCs)"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"step-1-create-cluster",children:"Step 1: Create Cluster"}),"\n",(0,s.jsx)(n.p,{children:"Choose your preferred local Kubernetes tool:"}),"\n",(0,s.jsx)(n.h3,{id:"minikube",children:"Minikube"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"minikube start --memory 8192 --cpus 4 --addons=storage-provisioner,default-storageclass\n"})}),"\n",(0,s.jsx)(n.h3,{id:"kind",children:"Kind"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cat <<EOF | kind create cluster --config=-\nkind: Cluster\napiVersion: kind.x-k8s.io/v1alpha4\nnodes:\n- role: control-plane\n  extraPortMappings:\n  - containerPort: 30080\n    hostPort: 8080\nEOF\n"})}),"\n",(0,s.jsx)(n.h3,{id:"k3s-k3d",children:"K3s (K3d)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'k3d cluster create aeterna-dev --port "8080:80@loadbalancer"\n'})}),"\n",(0,s.jsx)(n.h2,{id:"step-2-install-aeterna",children:"Step 2: Install Aeterna"}),"\n",(0,s.jsx)(n.p,{children:"Add the Helm repository or use the local source:"}),"\n",(0,s.jsx)(n.h3,{id:"from-repo",children:"From Repo"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"helm repo add aeterna https://kikokikok.github.io/aeterna\nhelm repo update\nhelm install aeterna aeterna/aeterna -f examples/values-local.yaml\n"})}),"\n",(0,s.jsx)(n.h3,{id:"from-source",children:"From Source"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"helm install aeterna ./charts/aeterna -f charts/aeterna/examples/values-local.yaml\n"})}),"\n",(0,s.jsx)(n.h2,{id:"step-3-verify-installation",children:"Step 3: Verify Installation"}),"\n",(0,s.jsx)(n.p,{children:"Check if the pods are running:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kubectl get pods -l app.kubernetes.io/instance=aeterna\n"})}),"\n",(0,s.jsx)(n.p,{children:"Run Helm tests to verify connectivity:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"helm test aeterna\n"})}),"\n",(0,s.jsx)(n.h2,{id:"step-4-configure-llm-provider",children:"Step 4: Configure LLM Provider"}),"\n",(0,s.jsx)(n.p,{children:"Aeterna requires an LLM provider to function. Create a secret with your API key:"}),"\n",(0,s.jsx)(n.h3,{id:"openai",children:"OpenAI"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kubectl create secret generic aeterna-llm \\\n  --from-literal=OPENAI_API_KEY=your-api-key-here\n"})}),"\n",(0,s.jsx)(n.h3,{id:"anthropic",children:"Anthropic"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kubectl create secret generic aeterna-llm \\\n  --from-literal=ANTHROPIC_API_KEY=your-api-key-here\n"})}),"\n",(0,s.jsx)(n.p,{children:"Upgrade the installation to use the secret:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"helm upgrade aeterna aeterna/aeterna \\\n  --reuse-values \\\n  --set aeterna.secrets.llm=aeterna-llm\n"})}),"\n",(0,s.jsx)(n.h2,{id:"step-5-access-aeterna",children:"Step 5: Access Aeterna"}),"\n",(0,s.jsx)(n.p,{children:"Port-forward the server to your local machine:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kubectl port-forward svc/aeterna-server 8080:8080\n"})}),"\n",(0,s.jsx)(n.p,{children:"Test the health endpoint:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"curl http://localhost:8080/health\n"})}),"\n",(0,s.jsx)(n.h2,{id:"step-6-enable-code-search-optional",children:"Step 6: Enable Code Search (Optional)"}),"\n",(0,s.jsx)(n.p,{children:"Enable the codesearch sidecar for vector-based search:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"helm upgrade aeterna aeterna/aeterna \\\n  --reuse-values \\\n  --set codesearch.enabled=true\n"})}),"\n",(0,s.jsx)(n.h2,{id:"whats-included",children:"What's Included"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Component"}),(0,s.jsx)(n.th,{children:"Purpose"}),(0,s.jsx)(n.th,{children:"Replicas"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Aeterna Server"}),(0,s.jsx)(n.td,{children:"Core API and logic"}),(0,s.jsx)(n.td,{children:"1"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"PostgreSQL (CNPG)"}),(0,s.jsx)(n.td,{children:"Metadata storage"}),(0,s.jsx)(n.td,{children:"1"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Qdrant"}),(0,s.jsx)(n.td,{children:"Vector database"}),(0,s.jsx)(n.td,{children:"1"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Dragonfly"}),(0,s.jsx)(n.td,{children:"In-memory cache"}),(0,s.jsx)(n.td,{children:"1"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"OPAL Stack"}),(0,s.jsx)(n.td,{children:"Policy orchestration"}),(0,s.jsx)(n.td,{children:"3 (server, fetcher, agent)"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"resource-usage",children:"Resource Usage"}),"\n",(0,s.jsx)(n.p,{children:"Typical resource consumption for local mode:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"CPU"}),": 1-2 cores (idle)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Memory"}),": ~2.5GB total"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Storage"}),": ~5GB for PVCs"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/aeterna/docs/helm/hybrid-mode",children:"Hybrid Mode Guide"}),": Offload databases to cloud services."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/aeterna/docs/helm/production-checklist",children:"Production Checklist"}),": Prepare for a real deployment."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/aeterna/docs/helm/security",children:"Security Guide"}),": Configure TLS and auth."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.h3,{id:"imagepullbackoff",children:"ImagePullBackOff"}),"\n",(0,s.jsx)(n.p,{children:"Check your internet connection or if the registry is reachable."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kubectl describe pod <pod-name>\n"})}),"\n",(0,s.jsx)(n.h3,{id:"pvc-pending",children:"PVC Pending"}),"\n",(0,s.jsx)(n.p,{children:"Ensure your cluster has a default storage class."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kubectl get storageclass\n"})}),"\n",(0,s.jsx)(n.h3,{id:"oomkilled",children:"OOMKilled"}),"\n",(0,s.jsx)(n.p,{children:"Increase the memory allocated to your local cluster (Minikube/Docker Desktop)."}),"\n",(0,s.jsx)(n.h3,{id:"pod-not-ready",children:"Pod Not Ready"}),"\n",(0,s.jsx)(n.p,{children:"Check logs for specific errors:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kubectl logs <pod-name>\n"})})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},8453(e,n,r){r.d(n,{R:()=>t,x:()=>i});var l=r(6540);const s={},a=l.createContext(s);function t(e){const n=l.useContext(a);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),l.createElement(a.Provider,{value:n},e.children)}}}]);