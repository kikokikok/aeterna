"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[4436],{813(n,e,i){i.r(e),i.d(e,{assets:()=>l,contentTitle:()=>s,default:()=>g,frontMatter:()=>a,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"specs/configuration","title":"Configuration Specification","description":"This document specifies the configuration schema, environment variables, and validation rules for the Memory-Knowledge system.","source":"@site/docs/specs/07-configuration.md","sourceDirName":"specs","slug":"/specs/configuration","permalink":"/aeterna/docs/specs/configuration","draft":false,"unlisted":false,"editUrl":"https://github.com/kikokikok/aeterna/tree/main/website/docs/specs/07-configuration.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"title":"Configuration Specification","status":"draft","version":"0.1.0","created":"2025-01-07T00:00:00.000Z","authors":["AI Systems Architecture Team"],"related":["05-adapter-architecture.md","08-deployment.md"]},"sidebar":"docs","previous":{"title":"Tool Interface Specification","permalink":"/aeterna/docs/specs/tool-interface"},"next":{"title":"Adapter Architecture Specification","permalink":"/aeterna/docs/specs/adapter-architecture"}}');var o=i(4848),t=i(8453);const a={title:"Configuration Specification",status:"draft",version:"0.1.0",created:new Date("2025-01-07T00:00:00.000Z"),authors:["AI Systems Architecture Team"],related:["05-adapter-architecture.md","08-deployment.md"]},s="Configuration Specification",l={},d=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"Overview",id:"overview",level:2},{value:"Configuration Schema",id:"configuration-schema",level:2},{value:"Root Configuration",id:"root-configuration",level:3},{value:"Memory Configuration",id:"memory-configuration",level:3},{value:"Provider-Specific Configuration",id:"provider-specific-configuration",level:3},{value:"Knowledge Configuration",id:"knowledge-configuration",level:3},{value:"Sync Configuration",id:"sync-configuration",level:3},{value:"Identifiers Configuration",id:"identifiers-configuration",level:3},{value:"Logging Configuration",id:"logging-configuration",level:3},{value:"Features Configuration",id:"features-configuration",level:3},{value:"Environment Variables",id:"environment-variables",level:2},{value:"Variable Naming Convention",id:"variable-naming-convention",level:3},{value:"Complete Variable List",id:"complete-variable-list",level:3},{value:"Provider-Specific Variables",id:"provider-specific-variables",level:3},{value:"Mem0",id:"mem0",level:4},{value:"Letta",id:"letta",level:4},{value:"Chroma",id:"chroma",level:4},{value:"Pinecone",id:"pinecone",level:4},{value:"Qdrant",id:"qdrant",level:4},{value:"Configuration Loading",id:"configuration-loading",level:2},{value:"Loading Order",id:"loading-order",level:3},{value:"Default Configuration",id:"default-configuration",level:3},{value:"Config File Formats",id:"config-file-formats",level:3},{value:"JSON",id:"json",level:4},{value:"YAML (Alternative)",id:"yaml-alternative",level:4},{value:"Validation",id:"validation",level:2},{value:"Schema Validation",id:"schema-validation",level:3},{value:"Semantic Validation",id:"semantic-validation",level:3},{value:"Configuration Errors",id:"configuration-errors",level:3},{value:"Configuration Examples",id:"configuration-examples",level:2},{value:"Minimal Configuration",id:"minimal-configuration",level:3},{value:"Development Configuration",id:"development-configuration",level:3},{value:"Production Configuration",id:"production-configuration",level:3},{value:"Multi-Tenant Configuration",id:"multi-tenant-configuration",level:3}];function c(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,t.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"configuration-specification",children:"Configuration Specification"})}),"\n",(0,o.jsx)(e.p,{children:"This document specifies the configuration schema, environment variables, and validation rules for the Memory-Knowledge system."}),"\n",(0,o.jsx)(e.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"#overview",children:"Overview"})}),"\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"#configuration-schema",children:"Configuration Schema"})}),"\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"#environment-variables",children:"Environment Variables"})}),"\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"#configuration-loading",children:"Configuration Loading"})}),"\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"#validation",children:"Validation"})}),"\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"#configuration-examples",children:"Configuration Examples"})}),"\n"]}),"\n",(0,o.jsx)(e.hr,{}),"\n",(0,o.jsx)(e.h2,{id:"overview",children:"Overview"}),"\n",(0,o.jsx)(e.p,{children:"Configuration is loaded from multiple sources with precedence:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                  CONFIGURATION PRECEDENCE                        \u2502\n\u2502                  (highest to lowest)                             \u2502\n\u2502                                                                  \u2502\n\u2502  1. Environment variables                                        \u2502\n\u2502     MK_MEMORY_PROVIDER=mem0                                     \u2502\n\u2502                                                                  \u2502\n\u2502  2. Runtime configuration (programmatic)                         \u2502\n\u2502     core.configure({ memory: { provider: 'mem0' } })            \u2502\n\u2502                                                                  \u2502\n\u2502  3. Project configuration file                                   \u2502\n\u2502     .memory-knowledge/config.json                               \u2502\n\u2502                                                                  \u2502\n\u2502  4. User configuration file                                      \u2502\n\u2502     ~/.config/memory-knowledge/config.json                      \u2502\n\u2502                                                                  \u2502\n\u2502  5. System defaults                                              \u2502\n\u2502     Built-in defaults                                           \u2502\n\u2502                                                                  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,o.jsx)(e.hr,{}),"\n",(0,o.jsx)(e.h2,{id:"configuration-schema",children:"Configuration Schema"}),"\n",(0,o.jsx)(e.h3,{id:"root-configuration",children:"Root Configuration"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"interface MemoryKnowledgeConfig {\n  /**\n   * Configuration version.\n   * @required\n   */\n  version: '1.0';\n  \n  /**\n   * Memory system configuration.\n   */\n  memory?: MemoryConfig;\n  \n  /**\n   * Knowledge repository configuration.\n   */\n  knowledge?: KnowledgeConfig;\n  \n  /**\n   * Sync bridge configuration.\n   */\n  sync?: SyncConfig;\n  \n  /**\n   * Layer identifiers (for scoping).\n   */\n  identifiers?: IdentifiersConfig;\n  \n  /**\n   * Logging configuration.\n   */\n  logging?: LoggingConfig;\n  \n  /**\n   * Feature flags.\n   */\n  features?: FeaturesConfig;\n}\n"})}),"\n",(0,o.jsx)(e.h3,{id:"memory-configuration",children:"Memory Configuration"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:'interface MemoryConfig {\n  /**\n   * Memory provider to use.\n   * @default "mem0"\n   */\n  provider: \'mem0\' | \'letta\' | \'chroma\' | \'pinecone\' | \'qdrant\' | \'custom\';\n  \n  /**\n   * Provider-specific configuration.\n   */\n  providerConfig?: ProviderSpecificConfig;\n  \n  /**\n   * Default layer for memory operations.\n   * @default "user"\n   */\n  defaultLayer?: MemoryLayer;\n  \n  /**\n   * Layers accessible in this context.\n   * @default ["agent", "user", "session", "project"]\n   */\n  enabledLayers?: MemoryLayer[];\n  \n  /**\n   * Search defaults.\n   */\n  search?: {\n    /**\n     * Default result limit.\n     * @default 10\n     */\n    defaultLimit?: number;\n    \n    /**\n     * Default similarity threshold.\n     * @default 0.7\n     */\n    defaultThreshold?: number;\n    \n    /**\n     * Maximum allowed limit.\n     * @default 100\n     */\n    maxLimit?: number;\n  };\n  \n  /**\n   * Memory lifecycle configuration.\n   */\n  lifecycle?: {\n    /**\n     * Enable memory decay.\n     * @default false\n     */\n    enableDecay?: boolean;\n    \n    /**\n     * Decay rate per day (0.0 - 1.0).\n     * @default 0.01\n     */\n    decayRate?: number;\n    \n    /**\n     * Enable consolidation.\n     * @default false\n     */\n    enableConsolidation?: boolean;\n    \n    /**\n     * Similarity threshold for consolidation.\n     * @default 0.95\n     */\n    consolidationThreshold?: number;\n  };\n  \n  /**\n   * Session memory configuration.\n   */\n  session?: {\n    /**\n     * Auto-delete session memories on end.\n     * @default false\n     */\n    autoDelete?: boolean;\n    \n    /**\n     * Retention period after session end.\n     * @default "7d"\n     */\n    retentionPeriod?: string;\n    \n    /**\n     * Promote important memories to user layer.\n     * @default true\n     */\n    promoteImportant?: boolean;\n  };\n}\n'})}),"\n",(0,o.jsx)(e.h3,{id:"provider-specific-configuration",children:"Provider-Specific Configuration"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"// Mem0 configuration\ninterface Mem0ProviderConfig {\n  provider: 'mem0';\n  apiKey: string;\n  baseUrl?: string;\n  organizationId?: string;\n  projectId?: string;\n}\n\n// Letta configuration\ninterface LettaProviderConfig {\n  provider: 'letta';\n  baseUrl: string;\n  apiKey?: string;\n  agentId?: string;\n}\n\n// Chroma configuration\ninterface ChromaProviderConfig {\n  provider: 'chroma';\n  host?: string;\n  port?: number;\n  ssl?: boolean;\n  tenant?: string;\n  database?: string;\n}\n\n// Pinecone configuration\ninterface PineconeProviderConfig {\n  provider: 'pinecone';\n  apiKey: string;\n  environment: string;\n  indexName: string;\n  namespace?: string;\n}\n\n// Qdrant configuration\ninterface QdrantProviderConfig {\n  provider: 'qdrant';\n  url: string;\n  apiKey?: string;\n  collectionPrefix?: string;\n}\n\ntype ProviderSpecificConfig = \n  | Mem0ProviderConfig\n  | LettaProviderConfig\n  | ChromaProviderConfig\n  | PineconeProviderConfig\n  | QdrantProviderConfig;\n"})}),"\n",(0,o.jsx)(e.h3,{id:"knowledge-configuration",children:"Knowledge Configuration"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:'interface KnowledgeConfig {\n  /**\n   * Path to knowledge repository.\n   * Can be local path or Git URL.\n   * @default ".knowledge"\n   */\n  repository?: string;\n  \n  /**\n   * Git branch to use.\n   * @default "main"\n   */\n  branch?: string;\n  \n  /**\n   * Enable Git operations (push/pull).\n   * @default true\n   */\n  enableGit?: boolean;\n  \n  /**\n   * Auto-sync from upstream.\n   * @default true\n   */\n  autoSync?: boolean;\n  \n  /**\n   * Federation configuration.\n   */\n  federation?: {\n    /**\n     * Central hub repository URL.\n     */\n    centralHub?: string;\n    \n    /**\n     * Upstream repositories.\n     */\n    upstreams?: Array<{\n      id: string;\n      url: string;\n      branch?: string;\n      layers?: KnowledgeLayer[];\n    }>;\n    \n    /**\n     * Sync interval.\n     * @default "6h"\n     */\n    syncInterval?: string;\n  };\n  \n  /**\n   * Constraint enforcement.\n   */\n  constraints?: {\n    /**\n     * Enforcement mode.\n     * - strict: Block on any violation\n     * - warn: Warn but allow\n     * - off: No enforcement\n     * @default "strict"\n     */\n    mode?: \'strict\' | \'warn\' | \'off\';\n    \n    /**\n     * Exclude patterns from checking.\n     */\n    exclude?: string[];\n  };\n}\n'})}),"\n",(0,o.jsx)(e.h3,{id:"sync-configuration",children:"Sync Configuration"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"interface SyncConfig {\n  /**\n   * Enable automatic sync.\n   * @default true\n   */\n  enabled?: boolean;\n  \n  /**\n   * Sync triggers.\n   */\n  triggers?: {\n    /**\n     * Sync on session start.\n     * @default true\n     */\n    onSessionStart?: boolean;\n    \n    /**\n     * Sync on session end.\n     * @default false\n     */\n    onSessionEnd?: boolean;\n    \n    /**\n     * Sync on knowledge change webhook.\n     * @default true\n     */\n    onKnowledgeChange?: boolean;\n    \n    /**\n     * Scheduled sync interval.\n     * @default \"1h\"\n     */\n    scheduledInterval?: string;\n    \n    /**\n     * Staleness threshold for forced sync.\n     * @default \"24h\"\n     */\n    stalenessThreshold?: string;\n  };\n  \n  /**\n   * Conflict resolution.\n   */\n  conflictResolution?: {\n    /**\n     * Default resolution strategy.\n     * @default \"knowledge-wins\"\n     */\n    strategy?: 'knowledge-wins' | 'memory-wins' | 'manual';\n    \n    /**\n     * Custom resolver function name.\n     */\n    customResolver?: string;\n  };\n  \n  /**\n   * Sync state storage.\n   */\n  stateStorage?: {\n    /**\n     * Storage type.\n     * @default \"file\"\n     */\n    type?: 'file' | 'memory' | 'database';\n    \n    /**\n     * File path (if type is 'file').\n     */\n    path?: string;\n  };\n}\n"})}),"\n",(0,o.jsx)(e.h3,{id:"identifiers-configuration",children:"Identifiers Configuration"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"interface IdentifiersConfig {\n  /**\n   * Company/tenant identifier.\n   */\n  companyId?: string;\n  \n  /**\n   * Organization identifier.\n   */\n  orgId?: string;\n  \n  /**\n   * Team identifier.\n   */\n  teamId?: string;\n  \n  /**\n   * Project identifier.\n   * @default Auto-detected from Git\n   */\n  projectId?: string;\n  \n  /**\n   * User identifier.\n   * @default Auto-detected from environment\n   */\n  userId?: string;\n  \n  /**\n   * Agent identifier.\n   */\n  agentId?: string;\n}\n"})}),"\n",(0,o.jsx)(e.h3,{id:"logging-configuration",children:"Logging Configuration"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"interface LoggingConfig {\n  /**\n   * Log level.\n   * @default \"info\"\n   */\n  level?: 'debug' | 'info' | 'warn' | 'error';\n  \n  /**\n   * Log format.\n   * @default \"json\"\n   */\n  format?: 'json' | 'pretty' | 'minimal';\n  \n  /**\n   * Include timestamps.\n   * @default true\n   */\n  timestamps?: boolean;\n  \n  /**\n   * Log destination.\n   * @default \"stderr\"\n   */\n  destination?: 'stdout' | 'stderr' | 'file';\n  \n  /**\n   * Log file path (if destination is 'file').\n   */\n  filePath?: string;\n}\n"})}),"\n",(0,o.jsx)(e.h3,{id:"features-configuration",children:"Features Configuration"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"interface FeaturesConfig {\n  /**\n   * Enable memory tools.\n   * @default true\n   */\n  memoryTools?: boolean;\n  \n  /**\n   * Enable knowledge tools.\n   * @default true\n   */\n  knowledgeTools?: boolean;\n  \n  /**\n   * Enable sync tools.\n   * @default true\n   */\n  syncTools?: boolean;\n  \n  /**\n   * Enable constraint checking.\n   * @default true\n   */\n  constraintChecking?: boolean;\n  \n  /**\n   * Enable session context injection.\n   * @default true\n   */\n  contextInjection?: boolean;\n  \n  /**\n   * Enable telemetry.\n   * @default false\n   */\n  telemetry?: boolean;\n}\n"})}),"\n",(0,o.jsx)(e.hr,{}),"\n",(0,o.jsx)(e.h2,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,o.jsx)(e.h3,{id:"variable-naming-convention",children:"Variable Naming Convention"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{children:"MK_<SECTION>_<PROPERTY>=value\n"})}),"\n",(0,o.jsx)(e.h3,{id:"complete-variable-list",children:"Complete Variable List"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,o.jsxs)(e.table,{children:[(0,o.jsx)(e.thead,{children:(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.th,{children:"Variable"}),(0,o.jsx)(e.th,{children:"Type"}),(0,o.jsx)(e.th,{children:"Default"}),(0,o.jsx)(e.th,{children:"Description"})]})}),(0,o.jsxs)(e.tbody,{children:[(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"MK_MEMORY_PROVIDER"})}),(0,o.jsx)(e.td,{children:"string"}),(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"mem0"})}),(0,o.jsx)(e.td,{children:"Memory provider"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"MK_MEMORY_API_KEY"})}),(0,o.jsx)(e.td,{children:"string"}),(0,o.jsx)(e.td,{children:"-"}),(0,o.jsx)(e.td,{children:"Provider API key"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"MK_MEMORY_BASE_URL"})}),(0,o.jsx)(e.td,{children:"string"}),(0,o.jsx)(e.td,{children:"-"}),(0,o.jsx)(e.td,{children:"Provider base URL"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"MK_MEMORY_DEFAULT_LAYER"})}),(0,o.jsx)(e.td,{children:"string"}),(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"user"})}),(0,o.jsx)(e.td,{children:"Default memory layer"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"MK_KNOWLEDGE_REPOSITORY"})}),(0,o.jsx)(e.td,{children:"string"}),(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:".knowledge"})}),(0,o.jsx)(e.td,{children:"Knowledge repo path"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"MK_KNOWLEDGE_BRANCH"})}),(0,o.jsx)(e.td,{children:"string"}),(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"main"})}),(0,o.jsx)(e.td,{children:"Git branch"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"MK_KNOWLEDGE_CENTRAL_HUB"})}),(0,o.jsx)(e.td,{children:"string"}),(0,o.jsx)(e.td,{children:"-"}),(0,o.jsx)(e.td,{children:"Central hub URL"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"MK_SYNC_ENABLED"})}),(0,o.jsx)(e.td,{children:"boolean"}),(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"true"})}),(0,o.jsx)(e.td,{children:"Enable sync"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"MK_SYNC_INTERVAL"})}),(0,o.jsx)(e.td,{children:"string"}),(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"1h"})}),(0,o.jsx)(e.td,{children:"Sync interval"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"MK_ID_COMPANY"})}),(0,o.jsx)(e.td,{children:"string"}),(0,o.jsx)(e.td,{children:"-"}),(0,o.jsx)(e.td,{children:"Company ID"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"MK_ID_ORG"})}),(0,o.jsx)(e.td,{children:"string"}),(0,o.jsx)(e.td,{children:"-"}),(0,o.jsx)(e.td,{children:"Organization ID"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"MK_ID_TEAM"})}),(0,o.jsx)(e.td,{children:"string"}),(0,o.jsx)(e.td,{children:"-"}),(0,o.jsx)(e.td,{children:"Team ID"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"MK_ID_PROJECT"})}),(0,o.jsx)(e.td,{children:"string"}),(0,o.jsx)(e.td,{children:"-"}),(0,o.jsx)(e.td,{children:"Project ID"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"MK_ID_USER"})}),(0,o.jsx)(e.td,{children:"string"}),(0,o.jsx)(e.td,{children:"-"}),(0,o.jsx)(e.td,{children:"User ID"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"MK_ID_AGENT"})}),(0,o.jsx)(e.td,{children:"string"}),(0,o.jsx)(e.td,{children:"-"}),(0,o.jsx)(e.td,{children:"Agent ID"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"MK_LOG_LEVEL"})}),(0,o.jsx)(e.td,{children:"string"}),(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"info"})}),(0,o.jsx)(e.td,{children:"Log level"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"MK_LOG_FORMAT"})}),(0,o.jsx)(e.td,{children:"string"}),(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"json"})}),(0,o.jsx)(e.td,{children:"Log format"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"MK_FEATURES_TELEMETRY"})}),(0,o.jsx)(e.td,{children:"boolean"}),(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"false"})}),(0,o.jsx)(e.td,{children:"Enable telemetry"})]})]})]}),"\n",(0,o.jsx)(e.h3,{id:"provider-specific-variables",children:"Provider-Specific Variables"}),"\n",(0,o.jsx)(e.h4,{id:"mem0",children:"Mem0"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"MK_MEMORY_PROVIDER=mem0\nMK_MEM0_API_KEY=m0-xxxxx\nMK_MEM0_BASE_URL=https://api.mem0.ai\nMK_MEM0_ORG_ID=org_123\nMK_MEM0_PROJECT_ID=proj_456\n"})}),"\n",(0,o.jsx)(e.h4,{id:"letta",children:"Letta"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"MK_MEMORY_PROVIDER=letta\nMK_LETTA_BASE_URL=http://localhost:8283\nMK_LETTA_API_KEY=optional\nMK_LETTA_AGENT_ID=agent_123\n"})}),"\n",(0,o.jsx)(e.h4,{id:"chroma",children:"Chroma"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"MK_MEMORY_PROVIDER=chroma\nMK_CHROMA_HOST=localhost\nMK_CHROMA_PORT=8000\nMK_CHROMA_SSL=false\n"})}),"\n",(0,o.jsx)(e.h4,{id:"pinecone",children:"Pinecone"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"MK_MEMORY_PROVIDER=pinecone\nMK_PINECONE_API_KEY=xxxxx\nMK_PINECONE_ENVIRONMENT=us-east1-gcp\nMK_PINECONE_INDEX=memories\n"})}),"\n",(0,o.jsx)(e.h4,{id:"qdrant",children:"Qdrant"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"MK_MEMORY_PROVIDER=qdrant\nMK_QDRANT_URL=http://localhost:6333\nMK_QDRANT_API_KEY=optional\n"})}),"\n",(0,o.jsx)(e.hr,{}),"\n",(0,o.jsx)(e.h2,{id:"configuration-loading",children:"Configuration Loading"}),"\n",(0,o.jsx)(e.h3,{id:"loading-order",children:"Loading Order"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"async function loadConfiguration(): Promise<MemoryKnowledgeConfig> {\n  // 1. Start with defaults\n  let config = getDefaultConfig();\n  \n  // 2. Load system config (if exists)\n  const systemConfig = await loadFile('/etc/memory-knowledge/config.json');\n  if (systemConfig) {\n    config = mergeConfig(config, systemConfig);\n  }\n  \n  // 3. Load user config\n  const userConfig = await loadFile(\n    path.join(os.homedir(), '.config/memory-knowledge/config.json')\n  );\n  if (userConfig) {\n    config = mergeConfig(config, userConfig);\n  }\n  \n  // 4. Load project config\n  const projectConfig = await loadFile('.memory-knowledge/config.json');\n  if (projectConfig) {\n    config = mergeConfig(config, projectConfig);\n  }\n  \n  // 5. Apply environment variables\n  config = applyEnvironmentVariables(config);\n  \n  // 6. Validate final config\n  validateConfig(config);\n  \n  return config;\n}\n"})}),"\n",(0,o.jsx)(e.h3,{id:"default-configuration",children:"Default Configuration"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"function getDefaultConfig(): MemoryKnowledgeConfig {\n  return {\n    version: '1.0',\n    memory: {\n      provider: 'mem0',\n      defaultLayer: 'user',\n      enabledLayers: ['agent', 'user', 'session', 'project'],\n      search: {\n        defaultLimit: 10,\n        defaultThreshold: 0.7,\n        maxLimit: 100\n      },\n      lifecycle: {\n        enableDecay: false,\n        decayRate: 0.01,\n        enableConsolidation: false,\n        consolidationThreshold: 0.95\n      },\n      session: {\n        autoDelete: false,\n        retentionPeriod: '7d',\n        promoteImportant: true\n      }\n    },\n    knowledge: {\n      repository: '.knowledge',\n      branch: 'main',\n      enableGit: true,\n      autoSync: true,\n      constraints: {\n        mode: 'strict',\n        exclude: []\n      }\n    },\n    sync: {\n      enabled: true,\n      triggers: {\n        onSessionStart: true,\n        onSessionEnd: false,\n        onKnowledgeChange: true,\n        scheduledInterval: '1h',\n        stalenessThreshold: '24h'\n      },\n      conflictResolution: {\n        strategy: 'knowledge-wins'\n      },\n      stateStorage: {\n        type: 'file'\n      }\n    },\n    logging: {\n      level: 'info',\n      format: 'json',\n      timestamps: true,\n      destination: 'stderr'\n    },\n    features: {\n      memoryTools: true,\n      knowledgeTools: true,\n      syncTools: true,\n      constraintChecking: true,\n      contextInjection: true,\n      telemetry: false\n    }\n  };\n}\n"})}),"\n",(0,o.jsx)(e.h3,{id:"config-file-formats",children:"Config File Formats"}),"\n",(0,o.jsx)(e.h4,{id:"json",children:"JSON"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-json",children:'{\n  "version": "1.0",\n  "memory": {\n    "provider": "mem0",\n    "providerConfig": {\n      "apiKey": "${MK_MEM0_API_KEY}"\n    },\n    "defaultLayer": "user"\n  },\n  "knowledge": {\n    "repository": ".knowledge",\n    "federation": {\n      "centralHub": "https://github.com/company/knowledge-hub.git"\n    }\n  }\n}\n'})}),"\n",(0,o.jsx)(e.h4,{id:"yaml-alternative",children:"YAML (Alternative)"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:'version: "1.0"\n\nmemory:\n  provider: mem0\n  providerConfig:\n    apiKey: ${MK_MEM0_API_KEY}\n  defaultLayer: user\n\nknowledge:\n  repository: .knowledge\n  federation:\n    centralHub: https://github.com/company/knowledge-hub.git\n'})}),"\n",(0,o.jsx)(e.hr,{}),"\n",(0,o.jsx)(e.h2,{id:"validation",children:"Validation"}),"\n",(0,o.jsx)(e.h3,{id:"schema-validation",children:"Schema Validation"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"import Ajv from 'ajv';\n\nconst configSchema = {\n  $schema: 'https://json-schema.org/draft/2020-12/schema',\n  type: 'object',\n  required: ['version'],\n  properties: {\n    version: {\n      type: 'string',\n      enum: ['1.0']\n    },\n    memory: {\n      type: 'object',\n      properties: {\n        provider: {\n          type: 'string',\n          enum: ['mem0', 'letta', 'chroma', 'pinecone', 'qdrant', 'custom']\n        },\n        defaultLayer: {\n          type: 'string',\n          enum: ['agent', 'user', 'session', 'project', 'team', 'org', 'company']\n        }\n        // ... more properties\n      }\n    }\n    // ... more sections\n  }\n};\n\nfunction validateConfig(config: unknown): asserts config is MemoryKnowledgeConfig {\n  const ajv = new Ajv();\n  const validate = ajv.compile(configSchema);\n  \n  if (!validate(config)) {\n    throw new ConfigValidationError(validate.errors);\n  }\n}\n"})}),"\n",(0,o.jsx)(e.h3,{id:"semantic-validation",children:"Semantic Validation"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"function validateConfigSemantics(config: MemoryKnowledgeConfig): void {\n  // Validate provider config matches provider type\n  if (config.memory?.provider === 'mem0' && !config.memory?.providerConfig?.apiKey) {\n    throw new ConfigValidationError('Mem0 requires apiKey');\n  }\n  \n  // Validate layer configuration\n  if (config.memory?.defaultLayer && !config.memory?.enabledLayers?.includes(config.memory.defaultLayer)) {\n    throw new ConfigValidationError('defaultLayer must be in enabledLayers');\n  }\n  \n  // Validate sync configuration\n  if (config.sync?.triggers?.scheduledInterval) {\n    const interval = parseDuration(config.sync.triggers.scheduledInterval);\n    if (interval < 60000) { // 1 minute minimum\n      throw new ConfigValidationError('scheduledInterval must be at least 1m');\n    }\n  }\n  \n  // Validate federation configuration\n  if (config.knowledge?.federation?.upstreams) {\n    const ids = new Set<string>();\n    for (const upstream of config.knowledge.federation.upstreams) {\n      if (ids.has(upstream.id)) {\n        throw new ConfigValidationError(`Duplicate upstream id: ${upstream.id}`);\n      }\n      ids.add(upstream.id);\n    }\n  }\n}\n"})}),"\n",(0,o.jsx)(e.h3,{id:"configuration-errors",children:"Configuration Errors"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"class ConfigValidationError extends Error {\n  constructor(\n    public errors: Array<{\n      path: string;\n      message: string;\n      value?: unknown;\n    }>\n  ) {\n    const messages = errors.map(e => `${e.path}: ${e.message}`).join('; ');\n    super(`Configuration validation failed: ${messages}`);\n    this.name = 'ConfigValidationError';\n  }\n}\n"})}),"\n",(0,o.jsx)(e.hr,{}),"\n",(0,o.jsx)(e.h2,{id:"configuration-examples",children:"Configuration Examples"}),"\n",(0,o.jsx)(e.h3,{id:"minimal-configuration",children:"Minimal Configuration"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-json",children:'{\n  "version": "1.0",\n  "memory": {\n    "provider": "mem0",\n    "providerConfig": {\n      "apiKey": "m0-xxxxx"\n    }\n  }\n}\n'})}),"\n",(0,o.jsx)(e.h3,{id:"development-configuration",children:"Development Configuration"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-json",children:'{\n  "version": "1.0",\n  "memory": {\n    "provider": "chroma",\n    "providerConfig": {\n      "host": "localhost",\n      "port": 8000\n    },\n    "defaultLayer": "session"\n  },\n  "knowledge": {\n    "repository": ".knowledge",\n    "enableGit": false,\n    "constraints": {\n      "mode": "warn"\n    }\n  },\n  "sync": {\n    "enabled": false\n  },\n  "logging": {\n    "level": "debug",\n    "format": "pretty"\n  }\n}\n'})}),"\n",(0,o.jsx)(e.h3,{id:"production-configuration",children:"Production Configuration"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-json",children:'{\n  "version": "1.0",\n  "memory": {\n    "provider": "pinecone",\n    "providerConfig": {\n      "apiKey": "${MK_PINECONE_API_KEY}",\n      "environment": "us-east1-gcp",\n      "indexName": "production-memories"\n    },\n    "defaultLayer": "user",\n    "enabledLayers": ["user", "project", "team", "org", "company"],\n    "lifecycle": {\n      "enableDecay": true,\n      "decayRate": 0.005\n    }\n  },\n  "knowledge": {\n    "repository": "git@github.com:company/knowledge-repo.git",\n    "branch": "main",\n    "federation": {\n      "centralHub": "git@github.com:company/central-knowledge.git",\n      "syncInterval": "1h"\n    },\n    "constraints": {\n      "mode": "strict"\n    }\n  },\n  "sync": {\n    "enabled": true,\n    "triggers": {\n      "onSessionStart": true,\n      "scheduledInterval": "30m",\n      "stalenessThreshold": "6h"\n    }\n  },\n  "identifiers": {\n    "companyId": "acme-corp",\n    "orgId": "${MK_ID_ORG}"\n  },\n  "logging": {\n    "level": "info",\n    "format": "json",\n    "destination": "stdout"\n  },\n  "features": {\n    "telemetry": true\n  }\n}\n'})}),"\n",(0,o.jsx)(e.h3,{id:"multi-tenant-configuration",children:"Multi-Tenant Configuration"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-json",children:'{\n  "version": "1.0",\n  "memory": {\n    "provider": "qdrant",\n    "providerConfig": {\n      "url": "https://qdrant.internal.company.com",\n      "apiKey": "${MK_QDRANT_API_KEY}",\n      "collectionPrefix": "${MK_ID_COMPANY}_"\n    },\n    "enabledLayers": ["agent", "user", "session", "project", "team", "org", "company"]\n  },\n  "knowledge": {\n    "repository": ".knowledge",\n    "federation": {\n      "centralHub": "git@github.com:company/central-knowledge.git",\n      "upstreams": [\n        {\n          "id": "company",\n          "url": "git@github.com:company/company-policies.git",\n          "layers": ["company"]\n        },\n        {\n          "id": "org",\n          "url": "git@github.com:company/${MK_ID_ORG}-knowledge.git",\n          "layers": ["org"]\n        }\n      ]\n    }\n  },\n  "identifiers": {\n    "companyId": "${MK_ID_COMPANY}",\n    "orgId": "${MK_ID_ORG}",\n    "teamId": "${MK_ID_TEAM}",\n    "projectId": "${MK_ID_PROJECT}"\n  }\n}\n'})}),"\n",(0,o.jsx)(e.hr,{}),"\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.strong,{children:"Next"}),": ",(0,o.jsx)(e.a,{href:"/aeterna/docs/specs/deployment",children:"08-deployment.md"})," - Deployment Specification"]})]})}function g(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(c,{...n})}):c(n)}},8453(n,e,i){i.d(e,{R:()=>a,x:()=>s});var r=i(6540);const o={},t=r.createContext(o);function a(n){const e=r.useContext(t);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:a(n.components),r.createElement(t.Provider,{value:e},n.children)}}}]);