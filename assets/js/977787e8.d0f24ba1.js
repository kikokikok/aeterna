"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[7937],{4391(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"cca/api-reference","title":"CCA API Reference","description":"This document provides complete API specifications for the four MCP tools that expose CCA (Confucius Code Agent) capabilities to AI agents and applications.","source":"@site/docs/cca/api-reference.md","sourceDirName":"cca","slug":"/cca/api-reference","permalink":"/aeterna/docs/cca/api-reference","draft":false,"unlisted":false,"editUrl":"https://github.com/kikokikok/aeterna/tree/main/website/docs/cca/api-reference.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"CCA Configuration","permalink":"/aeterna/docs/cca/configuration"},"next":{"title":"CCA Extension Development Guide","permalink":"/aeterna/docs/cca/extension-guide"}}');var r=s(4848),i=s(8453);const l={},d="CCA API Reference",c={},o=[{value:"Overview",id:"overview",level:2},{value:"Tool 1: context_assemble",id:"tool-1-context_assemble",level:2},{value:"Input Schema",id:"input-schema",level:3},{value:"Parameters",id:"parameters",level:3},{value:"Response",id:"response",level:3},{value:"Response Fields",id:"response-fields",level:3},{value:"Example Usage",id:"example-usage",level:3},{value:"Basic Context Assembly",id:"basic-context-assembly",level:4},{value:"Query-Specific Context",id:"query-specific-context",level:4},{value:"Large Context for Complex Tasks",id:"large-context-for-complex-tasks",level:4},{value:"Error Handling",id:"error-handling",level:3},{value:"Tool 2: note_capture",id:"tool-2-note_capture",level:2},{value:"Input Schema",id:"input-schema-1",level:3},{value:"Parameters",id:"parameters-1",level:3},{value:"Response",id:"response-1",level:3},{value:"Response Fields",id:"response-fields-1",level:3},{value:"Example Usage",id:"example-usage-1",level:3},{value:"Capture Successful Tool Usage",id:"capture-successful-tool-usage",level:4},{value:"Capture Error Event",id:"capture-error-event",level:4},{value:"Manual Milestone Capture",id:"manual-milestone-capture",level:4},{value:"Behavior Notes",id:"behavior-notes",level:3},{value:"Error Handling",id:"error-handling-1",level:3},{value:"Tool 3: hindsight_query",id:"tool-3-hindsight_query",level:2},{value:"Input Schema",id:"input-schema-2",level:3},{value:"Parameters",id:"parameters-2",level:3},{value:"Response",id:"response-2",level:3},{value:"Response Fields",id:"response-fields-2",level:3},{value:"Example Usage",id:"example-usage-2",level:3},{value:"Query Build Error",id:"query-build-error",level:4},{value:"Query Runtime Error",id:"query-runtime-error",level:4},{value:"Query Network Error",id:"query-network-error",level:4},{value:"Using Resolution Suggestions",id:"using-resolution-suggestions",level:3},{value:"Error Handling",id:"error-handling-2",level:3},{value:"Tool 4: meta_loop_status",id:"tool-4-meta_loop_status",level:2},{value:"Input Schema",id:"input-schema-3",level:3},{value:"Parameters",id:"parameters-3",level:3},{value:"Response (Summary)",id:"response-summary",level:3},{value:"Response (Specific Loop with Details)",id:"response-specific-loop-with-details",level:3},{value:"Response Fields",id:"response-fields-3",level:3},{value:"Example Usage",id:"example-usage-3",level:3},{value:"Check Overall Status",id:"check-overall-status",level:4},{value:"Check Specific Loop",id:"check-specific-loop",level:4},{value:"Get Full Details",id:"get-full-details",level:4},{value:"Polling Recommendations",id:"polling-recommendations",level:3},{value:"Error Handling",id:"error-handling-3",level:3},{value:"Authentication and Authorization",id:"authentication-and-authorization",level:2},{value:"Rate Limiting",id:"rate-limiting",level:2},{value:"Integration Examples",id:"integration-examples",level:2},{value:"LangChain Python",id:"langchain-python",level:3},{value:"OpenCode Plugin",id:"opencode-plugin",level:3},{value:"Next Steps",id:"next-steps",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"cca-api-reference",children:"CCA API Reference"})}),"\n",(0,r.jsx)(n.p,{children:"This document provides complete API specifications for the four MCP tools that expose CCA (Confucius Code Agent) capabilities to AI agents and applications."}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"CCA exposes four tools via Model Context Protocol (MCP):"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"context_assemble"})," - Assemble hierarchical context from memory layers"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"note_capture"})," - Capture trajectory events for distillation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"hindsight_query"})," - Query error patterns and resolutions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"meta_loop_status"})," - Get status of meta-agent loops"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"All tools follow MCP JSON-RPC 2.0 specification and return standardized responses."}),"\n",(0,r.jsx)(n.h2,{id:"tool-1-context_assemble",children:"Tool 1: context_assemble"}),"\n",(0,r.jsx)(n.p,{children:"Assemble hierarchical context from memory layers using the Context Architect component. This tool queries multiple memory layers, scores relevance, deduplicates entries, and fits results within a token budget."}),"\n",(0,r.jsx)(n.h3,{id:"input-schema",children:"Input Schema"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "object",\n  "properties": {\n    "query": {\n      "type": "string",\n      "description": "Optional semantic query to filter context. If omitted, retrieves all relevant context."\n    },\n    "tokenBudget": {\n      "type": "integer",\n      "minimum": 100,\n      "maximum": 32000,\n      "default": 4000,\n      "description": "Maximum tokens for assembled context. Adjust based on your LLM\'s context window."\n    },\n    "layers": {\n      "type": "array",\n      "items": {\n        "type": "string",\n        "enum": ["agent", "user", "session", "project", "team", "org", "company"]\n      },\n      "description": "Memory layers to query. If omitted, uses configured layer_priorities."\n    }\n  },\n  "required": []\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"parameters",children:"Parameters"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Parameter"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Required"}),(0,r.jsx)(n.th,{children:"Default"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"query"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"null"}),(0,r.jsx)(n.td,{children:'Semantic query string to filter context. Example: "authentication patterns"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"tokenBudget"})}),(0,r.jsx)(n.td,{children:"integer"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"4000"}),(0,r.jsx)(n.td,{children:"Token limit for assembled context (100-32000)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"layers"})}),(0,r.jsx)(n.td,{children:"string[]"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"config"}),(0,r.jsx)(n.td,{children:'Array of layer names to query. Values: "agent", "user", "session", "project", "team", "org", "company"'})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"response",children:"Response"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "context": {\n    "totalTokens": 3847,\n    "tokenBudget": 4000,\n    "layersIncluded": ["Session", "Project", "Team"],\n    "isWithinBudget": true,\n    "entryCount": 23,\n    "content": "## Session Context\\n- Current task: Implement JWT authentication\\n...\\n\\n## Project Context\\n- Tech stack: Rust, PostgreSQL, Redis\\n..."\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"response-fields",children:"Response Fields"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"success"})}),(0,r.jsx)(n.td,{children:"boolean"}),(0,r.jsx)(n.td,{children:"Always true on successful assembly"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"context.totalTokens"})}),(0,r.jsx)(n.td,{children:"integer"}),(0,r.jsx)(n.td,{children:"Actual tokens used in assembled context"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"context.tokenBudget"})}),(0,r.jsx)(n.td,{children:"integer"}),(0,r.jsx)(n.td,{children:"Token budget that was requested"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"context.layersIncluded"})}),(0,r.jsx)(n.td,{children:"string[]"}),(0,r.jsx)(n.td,{children:"Which memory layers contributed to context (in priority order)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"context.isWithinBudget"})}),(0,r.jsx)(n.td,{children:"boolean"}),(0,r.jsx)(n.td,{children:"Whether total tokens fit within budget"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"context.entryCount"})}),(0,r.jsx)(n.td,{children:"integer"}),(0,r.jsx)(n.td,{children:"Number of memory entries included"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"context.content"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Assembled context as formatted text (Markdown)"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"example-usage",children:"Example Usage"}),"\n",(0,r.jsx)(n.h4,{id:"basic-context-assembly",children:"Basic Context Assembly"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "method": "tools/call",\n  "params": {\n    "name": "context_assemble",\n    "arguments": {}\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Returns context from all configured layers with default 4000 token budget."}),"\n",(0,r.jsx)(n.h4,{id:"query-specific-context",children:"Query-Specific Context"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 2,\n  "method": "tools/call",\n  "params": {\n    "name": "context_assemble",\n    "arguments": {\n      "query": "database connection pooling",\n      "tokenBudget": 2000,\n      "layers": ["project", "team", "org"]\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Returns context related to database connection pooling from project, team, and org layers, limited to 2000 tokens."}),"\n",(0,r.jsx)(n.h4,{id:"large-context-for-complex-tasks",children:"Large Context for Complex Tasks"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 3,\n  "method": "tools/call",\n  "params": {\n    "name": "context_assemble",\n    "arguments": {\n      "tokenBudget": 16000,\n      "layers": ["agent", "user", "session", "project", "team"]\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Returns comprehensive context from 5 layers with 16000 token budget (suitable for GPT-4-32k)."}),"\n",(0,r.jsx)(n.h3,{id:"error-handling",children:"Error Handling"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Error Code"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Resolution"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-32602"})}),(0,r.jsx)(n.td,{children:"Invalid parameters (e.g., tokenBudget out of range)"}),(0,r.jsx)(n.td,{children:"Check parameter constraints"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-32000"})}),(0,r.jsx)(n.td,{children:"Context assembly timeout"}),(0,r.jsx)(n.td,{children:"Reduce layers or token budget"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-32001"})}),(0,r.jsx)(n.td,{children:"Memory layer unavailable"}),(0,r.jsx)(n.td,{children:"Check Aeterna service status"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"tool-2-note_capture",children:"Tool 2: note_capture"}),"\n",(0,r.jsx)(n.p,{children:"Capture a trajectory event for note-taking and eventual distillation to knowledge. Events accumulate until the auto-distill threshold is reached, at which point they are distilled into Markdown notes."}),"\n",(0,r.jsx)(n.h3,{id:"input-schema-1",children:"Input Schema"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "object",\n  "properties": {\n    "description": {\n      "type": "string",\n      "description": "Human-readable description of the event"\n    },\n    "tags": {\n      "type": "array",\n      "items": { "type": "string" },\n      "description": "Optional tags for categorizing the event"\n    },\n    "toolName": {\n      "type": "string",\n      "default": "manual_capture",\n      "description": "Name of the tool that triggered this event"\n    },\n    "success": {\n      "type": "boolean",\n      "default": false,\n      "description": "Whether the event represents a successful action"\n    }\n  },\n  "required": ["description"]\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"parameters-1",children:"Parameters"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Parameter"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Required"}),(0,r.jsx)(n.th,{children:"Default"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"description"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:'Description of the trajectory event. Example: "Successfully connected to PostgreSQL with connection pooling"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"tags"})}),(0,r.jsx)(n.td,{children:"string[]"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"[]"}),(0,r.jsx)(n.td,{children:'Tags for categorization. Example: ["database", "success"]'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"toolName"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:'"manual_capture"'}),(0,r.jsx)(n.td,{children:'Tool that generated this event. Example: "memory_search"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"success"})}),(0,r.jsx)(n.td,{children:"boolean"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"false"}),(0,r.jsx)(n.td,{children:"Whether this event was successful"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"response-1",children:"Response"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "message": "Trajectory event captured: Successfully connected to PostgreSQL",\n  "eventCount": 7\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"response-fields-1",children:"Response Fields"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"success"})}),(0,r.jsx)(n.td,{children:"boolean"}),(0,r.jsx)(n.td,{children:"Always true on successful capture"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"message"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Confirmation message with event description"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"eventCount"})}),(0,r.jsx)(n.td,{children:"integer"}),(0,r.jsx)(n.td,{children:"Total events captured so far (before distillation)"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"example-usage-1",children:"Example Usage"}),"\n",(0,r.jsx)(n.h4,{id:"capture-successful-tool-usage",children:"Capture Successful Tool Usage"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 4,\n  "method": "tools/call",\n  "params": {\n    "name": "note_capture",\n    "arguments": {\n      "description": "Used memory_search to find JWT authentication patterns, found 3 relevant examples",\n      "tags": ["memory", "auth", "success"],\n      "toolName": "memory_search",\n      "success": true\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h4,{id:"capture-error-event",children:"Capture Error Event"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 5,\n  "method": "tools/call",\n  "params": {\n    "name": "note_capture",\n    "arguments": {\n      "description": "Failed to connect to Redis: connection refused on localhost:6379",\n      "tags": ["redis", "error", "connection"],\n      "toolName": "memory_add",\n      "success": false\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h4,{id:"manual-milestone-capture",children:"Manual Milestone Capture"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 6,\n  "method": "tools/call",\n  "params": {\n    "name": "note_capture",\n    "arguments": {\n      "description": "Completed authentication module implementation with 95% test coverage",\n      "tags": ["milestone", "auth", "testing"]\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"behavior-notes",children:"Behavior Notes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Events are captured asynchronously (non-blocking)"}),"\n",(0,r.jsxs)(n.li,{children:["When ",(0,r.jsx)(n.code,{children:"eventCount"})," reaches ",(0,r.jsx)(n.code,{children:"auto_distill_threshold"})," (default: 10), automatic distillation triggers"]}),"\n",(0,r.jsx)(n.li,{children:"Distilled notes are stored as Memory entries in Project/Team layer"}),"\n",(0,r.jsxs)(n.li,{children:["If ",(0,r.jsx)(n.code,{children:'capture_mode = "sampled"'}),", only 1 in N events are actually captured"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"error-handling-1",children:"Error Handling"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Error Code"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Resolution"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-32602"})}),(0,r.jsxs)(n.td,{children:["Missing required ",(0,r.jsx)(n.code,{children:"description"})]}),(0,r.jsx)(n.td,{children:"Provide description"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-32000"})}),(0,r.jsxs)(n.td,{children:["Queue full (exceeds ",(0,r.jsx)(n.code,{children:"queue_size"}),")"]}),(0,r.jsx)(n.td,{children:"Increase queue_size or reduce capture rate"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-32001"})}),(0,r.jsx)(n.td,{children:"Overhead budget exceeded"}),(0,r.jsx)(n.td,{children:"Event dropped silently (check logs)"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"tool-3-hindsight_query",children:"Tool 3: hindsight_query"}),"\n",(0,r.jsx)(n.p,{children:"Query the Hindsight Learning system for error patterns and resolutions. This tool performs semantic matching against previously captured errors and returns ranked resolution suggestions."}),"\n",(0,r.jsx)(n.h3,{id:"input-schema-2",children:"Input Schema"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "object",\n  "properties": {\n    "errorType": {\n      "type": "string",\n      "description": "Type of error (e.g., \'TypeError\', \'BuildError\', \'NetworkError\')"\n    },\n    "messagePattern": {\n      "type": "string",\n      "description": "Error message pattern or substring"\n    },\n    "contextPatterns": {\n      "type": "array",\n      "items": { "type": "string" },\n      "description": "Optional context patterns (file paths, stack traces, etc.)"\n    }\n  },\n  "required": ["errorType", "messagePattern"]\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"parameters-2",children:"Parameters"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Parameter"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Required"}),(0,r.jsx)(n.th,{children:"Default"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"errorType"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:'Error type classification. Example: "BuildError", "TypeError", "DatabaseError"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"messagePattern"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:'Error message pattern. Example: "cannot find symbol: class JwtValidator"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"contextPatterns"})}),(0,r.jsx)(n.td,{children:"string[]"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"[]"}),(0,r.jsx)(n.td,{children:'Additional context for matching. Example: ["src/auth/", "Java"]'})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"response-2",children:"Response"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "matchCount": 2,\n  "matches": [\n    {\n      "noteId": "hs_42",\n      "score": 0.92,\n      "content": "Build failed due to missing import for JwtValidator class",\n      "resolution": {\n        "description": "Add import statement: import com.example.auth.JwtValidator;",\n        "successRate": 0.95,\n        "applicationCount": 12\n      }\n    },\n    {\n      "noteId": "hs_38",\n      "score": 0.87,\n      "content": "Compilation error: JwtValidator not found in classpath",\n      "resolution": {\n        "description": "Add dependency to build.gradle: implementation \'com.example:auth:1.2.0\'",\n        "successRate": 0.89,\n        "applicationCount": 8\n      }\n    }\n  ]\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"response-fields-2",children:"Response Fields"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"success"})}),(0,r.jsx)(n.td,{children:"boolean"}),(0,r.jsx)(n.td,{children:"Always true on successful query"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"matchCount"})}),(0,r.jsx)(n.td,{children:"integer"}),(0,r.jsx)(n.td,{children:"Number of matching errors found"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"matches"})}),(0,r.jsx)(n.td,{children:"array"}),(0,r.jsx)(n.td,{children:"Array of matched errors with resolutions (sorted by score descending)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"matches[].noteId"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Unique identifier for this hindsight note"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"matches[].score"})}),(0,r.jsx)(n.td,{children:"float"}),(0,r.jsx)(n.td,{children:"Similarity score (0.0-1.0), higher = more similar"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"matches[].content"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Original error note content"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"matches[].resolution"})}),(0,r.jsx)(n.td,{children:"object"}),(0,r.jsx)(n.td,{children:"Suggested resolution (may be null if no resolution exists)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"matches[].resolution.description"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"How to resolve this error"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"matches[].resolution.successRate"})}),(0,r.jsx)(n.td,{children:"float"}),(0,r.jsx)(n.td,{children:"Historical success rate (0.0-1.0)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"matches[].resolution.applicationCount"})}),(0,r.jsx)(n.td,{children:"integer"}),(0,r.jsx)(n.td,{children:"How many times this resolution has been applied"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"example-usage-2",children:"Example Usage"}),"\n",(0,r.jsx)(n.h4,{id:"query-build-error",children:"Query Build Error"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 7,\n  "method": "tools/call",\n  "params": {\n    "name": "hindsight_query",\n    "arguments": {\n      "errorType": "BuildError",\n      "messagePattern": "cannot find symbol: class JwtValidator",\n      "contextPatterns": ["src/auth/TokenService.java"]\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h4,{id:"query-runtime-error",children:"Query Runtime Error"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 8,\n  "method": "tools/call",\n  "params": {\n    "name": "hindsight_query",\n    "arguments": {\n      "errorType": "RuntimeError",\n      "messagePattern": "NullPointerException at line 42"\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h4,{id:"query-network-error",children:"Query Network Error"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 9,\n  "method": "tools/call",\n  "params": {\n    "name": "hindsight_query",\n    "arguments": {\n      "errorType": "NetworkError",\n      "messagePattern": "connection timeout",\n      "contextPatterns": ["Redis", "localhost:6379"]\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"using-resolution-suggestions",children:"Using Resolution Suggestions"}),"\n",(0,r.jsx)(n.p,{children:"Agents should:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Review all matches, prioritizing high ",(0,r.jsx)(n.code,{children:"score"})," and high ",(0,r.jsx)(n.code,{children:"successRate"})]}),"\n",(0,r.jsx)(n.li,{children:"Apply the top resolution suggestion"}),"\n",(0,r.jsx)(n.li,{children:"If successful, capture the outcome (success increases successRate)"}),"\n",(0,r.jsx)(n.li,{children:"If failed, try the next suggestion or create a new resolution"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"error-handling-2",children:"Error Handling"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Error Code"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Resolution"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-32602"})}),(0,r.jsx)(n.td,{children:"Missing required fields"}),(0,r.jsx)(n.td,{children:"Provide errorType and messagePattern"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-32000"})}),(0,r.jsx)(n.td,{children:"Query timeout"}),(0,r.jsx)(n.td,{children:"Simplify contextPatterns"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-32001"})}),(0,r.jsx)(n.td,{children:"No matches found"}),(0,r.jsx)(n.td,{children:"Not an error, just empty matches array"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"tool-4-meta_loop_status",children:"Tool 4: meta_loop_status"}),"\n",(0,r.jsx)(n.p,{children:"Get the current status of Meta-Agent build-test-improve loops. Useful for monitoring long-running autonomous agent tasks."}),"\n",(0,r.jsx)(n.h3,{id:"input-schema-3",children:"Input Schema"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "object",\n  "properties": {\n    "loopId": {\n      "type": "string",\n      "description": "Optional specific loop ID to query. If omitted, returns summary of all loops."\n    },\n    "includeDetails": {\n      "type": "boolean",\n      "default": false,\n      "description": "Include detailed state (build/test/improve outputs)"\n    }\n  },\n  "required": []\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"parameters-3",children:"Parameters"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Parameter"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Required"}),(0,r.jsx)(n.th,{children:"Default"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"loopId"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"null"}),(0,r.jsx)(n.td,{children:"Specific loop ID to query. If omitted, returns summary."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"includeDetails"})}),(0,r.jsx)(n.td,{children:"boolean"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"false"}),(0,r.jsx)(n.td,{children:"Whether to include detailed state (can be large)"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"response-summary",children:"Response (Summary)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "status": "running",\n  "activeLoops": 2,\n  "loopState": null,\n  "details": null\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"response-specific-loop-with-details",children:"Response (Specific Loop with Details)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "status": "running",\n  "activeLoops": 2,\n  "loopState": {\n    "iterations": 2,\n    "hasLastBuild": true,\n    "hasLastTest": true\n  },\n  "details": {\n    "iterations": 2,\n    "lastBuild": {\n      "output": "Build successful: auth.rs compiled in 1.2s",\n      "notes": "Used JWT crate version 0.16",\n      "tokensUsed": 1847\n    },\n    "lastTest": {\n      "status": "Failed",\n      "output": "3 tests failed: test_token_expiry, test_refresh_token, test_invalid_signature",\n      "durationMs": 423\n    },\n    "lastImprove": {\n      "action": "Refine"\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"response-fields-3",children:"Response Fields"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"success"})}),(0,r.jsx)(n.td,{children:"boolean"}),(0,r.jsx)(n.td,{children:"Always true on successful query"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"status"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:'Overall status: "running", "idle"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"activeLoops"})}),(0,r.jsx)(n.td,{children:"integer"}),(0,r.jsx)(n.td,{children:"Number of currently running loops"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"loopState"})}),(0,r.jsx)(n.td,{children:"object"}),(0,r.jsx)(n.td,{children:"State of specific loop (null if loopId not provided or not found)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"loopState.iterations"})}),(0,r.jsx)(n.td,{children:"integer"}),(0,r.jsx)(n.td,{children:"Current iteration number"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"loopState.hasLastBuild"})}),(0,r.jsx)(n.td,{children:"boolean"}),(0,r.jsx)(n.td,{children:"Whether a build has completed"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"loopState.hasLastTest"})}),(0,r.jsx)(n.td,{children:"boolean"}),(0,r.jsx)(n.td,{children:"Whether a test has completed"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"details"})}),(0,r.jsx)(n.td,{children:"object"}),(0,r.jsxs)(n.td,{children:["Detailed state (only if ",(0,r.jsx)(n.code,{children:"includeDetails: true"}),")"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"details.lastBuild.output"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Build output/logs"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"details.lastBuild.notes"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Build notes/observations"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"details.lastBuild.tokensUsed"})}),(0,r.jsx)(n.td,{children:"integer"}),(0,r.jsx)(n.td,{children:"Tokens consumed during build"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"details.lastTest.status"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:'Test status: "Passed", "Failed", "TimedOut"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"details.lastTest.output"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Test output/logs"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"details.lastTest.durationMs"})}),(0,r.jsx)(n.td,{children:"integer"}),(0,r.jsx)(n.td,{children:"Test duration in milliseconds"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"details.lastImprove.action"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:'Action taken: "Retry", "Refine", "Escalate"'})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"example-usage-3",children:"Example Usage"}),"\n",(0,r.jsx)(n.h4,{id:"check-overall-status",children:"Check Overall Status"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 10,\n  "method": "tools/call",\n  "params": {\n    "name": "meta_loop_status",\n    "arguments": {}\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Returns summary of all active loops."}),"\n",(0,r.jsx)(n.h4,{id:"check-specific-loop",children:"Check Specific Loop"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 11,\n  "method": "tools/call",\n  "params": {\n    "name": "meta_loop_status",\n    "arguments": {\n      "loopId": "meta_loop_abc123"\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Returns state of specific loop without details."}),"\n",(0,r.jsx)(n.h4,{id:"get-full-details",children:"Get Full Details"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 12,\n  "method": "tools/call",\n  "params": {\n    "name": "meta_loop_status",\n    "arguments": {\n      "loopId": "meta_loop_abc123",\n      "includeDetails": true\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Returns full state including build/test/improve outputs."}),"\n",(0,r.jsx)(n.h3,{id:"polling-recommendations",children:"Polling Recommendations"}),"\n",(0,r.jsx)(n.p,{children:"For monitoring long-running loops:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Poll every 5-10 seconds for active loops"}),"\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.code,{children:"includeDetails: false"})," for frequent polls (reduces bandwidth)"]}),"\n",(0,r.jsx)(n.li,{children:"Only fetch details when iteration count changes"}),"\n",(0,r.jsxs)(n.li,{children:["Stop polling when ",(0,r.jsx)(n.code,{children:'status: "idle"'})," and ",(0,r.jsx)(n.code,{children:"activeLoops: 0"})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"error-handling-3",children:"Error Handling"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Error Code"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Resolution"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-32602"})}),(0,r.jsx)(n.td,{children:"Invalid loopId format"}),(0,r.jsx)(n.td,{children:"Check loopId string"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-32000"})}),(0,r.jsx)(n.td,{children:"Loop not found"}),(0,r.jsx)(n.td,{children:"Loop may have completed or been cleaned up"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"authentication-and-authorization",children:"Authentication and Authorization"}),"\n",(0,r.jsx)(n.p,{children:"All tools respect Aeterna's multi-tenant authorization:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Tenant context is derived from MCP session"}),"\n",(0,r.jsx)(n.li,{children:"Users can only query memory from their accessible layers (based on role)"}),"\n",(0,r.jsx)(n.li,{children:"Agents inherit delegated permissions from the user who spawned them"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Example: A Developer role can query Session/Project/Team layers, but not Company/Org unless explicitly granted."}),"\n",(0,r.jsx)(n.h2,{id:"rate-limiting",children:"Rate Limiting"}),"\n",(0,r.jsx)(n.p,{children:"CCA tools are subject to rate limiting:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Default: 100 requests/minute per tenant"}),"\n",(0,r.jsx)(n.li,{children:"Burst: 20 requests in 10 seconds"}),"\n",(0,r.jsxs)(n.li,{children:["Exceeded: Returns error ",(0,r.jsx)(n.code,{children:"-32429"})," (Too Many Requests)"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Configure in ",(0,r.jsx)(n.code,{children:"config/aeterna.toml"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:"[api.rate_limit]\ncca_tools_per_minute = 100\ncca_tools_burst = 20\n"})}),"\n",(0,r.jsx)(n.h2,{id:"integration-examples",children:"Integration Examples"}),"\n",(0,r.jsx)(n.h3,{id:"langchain-python",children:"LangChain Python"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from langchain.tools import Tool\nfrom aeterna_mcp_client import AeternaMCPClient\n\nclient = AeternaMCPClient("http://localhost:8080")\n\ncontext_tool = Tool(\n    name="context_assemble",\n    func=lambda q: client.call_tool("context_assemble", {"query": q, "tokenBudget": 4000}),\n    description="Assemble hierarchical context from Aeterna memory"\n)\n\nhindsight_tool = Tool(\n    name="hindsight_query",\n    func=lambda err: client.call_tool("hindsight_query", {"errorType": err["type"], "messagePattern": err["msg"]}),\n    description="Query error resolutions from Hindsight Learning"\n)\n\n# Use in agent\nagent = initialize_agent([context_tool, hindsight_tool], llm, agent="zero-shot-react-description")\n'})}),"\n",(0,r.jsx)(n.h3,{id:"opencode-plugin",children:"OpenCode Plugin"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { McpClient } from '@kiko-aeterna/opencode-plugin';\n\nconst client = new McpClient({ url: 'http://localhost:8080' });\n\n// Assemble context before LLM call\nconst context = await client.callTool('context_assemble', {\n  query: 'authentication patterns',\n  tokenBudget: 4000\n});\n\n// Capture trajectory after successful action\nawait client.callTool('note_capture', {\n  description: 'Implemented JWT auth with refresh tokens',\n  tags: ['auth', 'success', 'jwt'],\n  success: true\n});\n"})}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/aeterna/docs/cca/configuration",children:"Configuration"})," - Configure CCA components"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/aeterna/docs/cca/extension-guide",children:"Extension Guide"})," - Build custom extensions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/aeterna/docs/cca/architecture",children:"Architecture"})," - Understand the hybrid execution model"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453(e,n,s){s.d(n,{R:()=>l,x:()=>d});var t=s(6540);const r={},i=t.createContext(r);function l(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);