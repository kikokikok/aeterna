"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[6515],{7601(e,n,s){s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>t});const r=JSON.parse('{"id":"codesearch-integration","title":"Code Search Integration Guide","description":"Overview","source":"@site/docs/codesearch-integration.md","sourceDirName":".","slug":"/codesearch-integration","permalink":"/aeterna/docs/codesearch-integration","draft":false,"unlisted":false,"editUrl":"https://github.com/kikokikok/aeterna/tree/main/website/docs/codesearch-integration.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"Provider Adapters Guide","permalink":"/aeterna/docs/guides/provider-adapters"},"next":{"title":"Code Search Repository Management: Local, Remote, and Incremental Indexing","permalink":"/aeterna/docs/codesearch-repository-management"}}');var i=s(4848),l=s(8453);const a={},c="Code Search Integration Guide",d={},t=[{value:"Overview",id:"overview",level:2},{value:"Architecture",id:"architecture",level:2},{value:"Sidecar Pattern",id:"sidecar-pattern",level:3},{value:"Components",id:"components",level:3},{value:"Installation",id:"installation",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Helm Installation",id:"helm-installation",level:3},{value:"1. Basic Installation (Default: Disabled)",id:"1-basic-installation-default-disabled",level:4},{value:"2. With Project Initialization",id:"2-with-project-initialization",level:4},{value:"3. With OpenAI Embeddings",id:"3-with-openai-embeddings",level:4},{value:"4. With PostgreSQL Storage",id:"4-with-postgresql-storage",level:4},{value:"Configuration Reference",id:"configuration-reference",level:3},{value:"Code Search Values",id:"code-search-values",level:4},{value:"Usage",id:"usage",level:2},{value:"CLI Commands",id:"cli-commands",level:3},{value:"Initialize a Project",id:"initialize-a-project",level:4},{value:"Semantic Code Search",id:"semantic-code-search",level:4},{value:"Call Graph Analysis",id:"call-graph-analysis",level:4},{value:"Index Status",id:"index-status",level:4},{value:"MCP Tools (Programmatic)",id:"mcp-tools-programmatic",level:3},{value:"Tool: code_search",id:"tool-code_search",level:4},{value:"Tool: code_trace_callers",id:"tool-code_trace_callers",level:4},{value:"Tool: code_trace_callees",id:"tool-code_trace_callees",level:4},{value:"Tool: code_graph",id:"tool-code_graph",level:4},{value:"Tool: code_index_status",id:"tool-code_index_status",level:4},{value:"Use Cases",id:"use-cases",level:2},{value:"1. AI Agent Code Understanding",id:"1-ai-agent-code-understanding",level:3},{value:"2. Code Review Assistance",id:"2-code-review-assistance",level:3},{value:"3. Onboarding New Developers",id:"3-onboarding-new-developers",level:3},{value:"4. Bug Investigation",id:"4-bug-investigation",level:3},{value:"5. Refactoring Planning",id:"5-refactoring-planning",level:3},{value:"Backend Configurations",id:"backend-configurations",level:2},{value:"Qdrant (Recommended)",id:"qdrant-recommended",level:3},{value:"PostgreSQL",id:"postgresql",level:3},{value:"GOB (File-based)",id:"gob-file-based",level:3},{value:"Embedder Options",id:"embedder-options",level:2},{value:"Ollama (Default)",id:"ollama-default",level:3},{value:"OpenAI",id:"openai",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Code Search Sidecar Not Starting",id:"code-search-sidecar-not-starting",level:3},{value:"Project Initialization Fails",id:"project-initialization-fails",level:3},{value:"MCP Connection Errors",id:"mcp-connection-errors",level:3},{value:"Slow Semantic Search",id:"slow-semantic-search",level:3},{value:"High Memory Usage",id:"high-memory-usage",level:3},{value:"Performance Tuning",id:"performance-tuning",level:2},{value:"Indexing Performance",id:"indexing-performance",level:3},{value:"Query Performance",id:"query-performance",level:3},{value:"Resource Optimization",id:"resource-optimization",level:3},{value:"Security",id:"security",level:2},{value:"Network Policies",id:"network-policies",level:3},{value:"Secret Management",id:"secret-management",level:3},{value:"Pod Security Context",id:"pod-security-context",level:3},{value:"Monitoring",id:"monitoring",level:2},{value:"Metrics",id:"metrics",level:3},{value:"Logs",id:"logs",level:3},{value:"Health Checks",id:"health-checks",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Start with Ollama",id:"1-start-with-ollama",level:3},{value:"2. Use Qdrant for Production",id:"2-use-qdrant-for-production",level:3},{value:"3. Enable Init Container",id:"3-enable-init-container",level:3},{value:"4. Configure Resource Limits",id:"4-configure-resource-limits",level:3},{value:"5. Use Semantic Cache",id:"5-use-semantic-cache",level:3},{value:"6. Monitor Index Status",id:"6-monitor-index-status",level:3},{value:"Migration Guide",id:"migration-guide",level:2},{value:"From Standalone Code Search",id:"from-standalone-code-search",level:3},{value:"Upgrading Code Search Version",id:"upgrading-code-search-version",level:3},{value:"Central Index Service",id:"central-index-service",level:2},{value:"API Endpoints",id:"api-endpoints",level:3},{value:"POST /api/v1/index/updated",id:"post-apiv1indexupdated",level:4},{value:"POST /api/v1/graph/refresh",id:"post-apiv1graphrefresh",level:4},{value:"GET /api/v1/index/status",id:"get-apiv1indexstatus",level:4},{value:"POST /api/v1/search/cross-repo",id:"post-apiv1searchcross-repo",level:4},{value:"Authentication &amp; Rate Limiting",id:"authentication--rate-limiting",level:3},{value:"GitHub Actions Setup",id:"github-actions-setup",level:2},{value:"Basic Usage",id:"basic-usage",level:3},{value:"Required Secrets",id:"required-secrets",level:3},{value:"Required Variables",id:"required-variables",level:3},{value:"Custom Project Name",id:"custom-project-name",level:3},{value:"What the Workflow Does",id:"what-the-workflow-does",level:3},{value:"Multi-Tenant Workspace Management",id:"multi-tenant-workspace-management",level:2},{value:"Troubleshooting (Central Index)",id:"troubleshooting-central-index",level:2},{value:"Binary Not Found",id:"binary-not-found",level:3},{value:"Embedding Dimension Mismatch",id:"embedding-dimension-mismatch",level:3},{value:"Qdrant Connection Issues",id:"qdrant-connection-issues",level:3},{value:"Rate Limit Exceeded",id:"rate-limit-exceeded",level:3},{value:"Webhook Signature Verification Failed",id:"webhook-signature-verification-failed",level:3},{value:"Support",id:"support",level:2},{value:"Documentation",id:"documentation",level:3},{value:"Community",id:"community",level:3},{value:"Commercial Support",id:"commercial-support",level:3}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"code-search-integration-guide",children:"Code Search Integration Guide"})}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"Code Search integration brings semantic code search and call graph analysis capabilities to Aeterna, enabling AI agents to access both organizational knowledge (Aeterna) and codebase understanding (Code Search) through a unified MCP (Model Context Protocol) interface."}),"\n",(0,i.jsx)(n.h2,{id:"architecture",children:"Architecture"}),"\n",(0,i.jsx)(n.h3,{id:"sidecar-pattern",children:"Sidecar Pattern"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Pod: aeterna                                                 \u2502\n\u2502                                                              \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502  Aeterna         \u2502         \u2502  Code Search Sidecar         \u2502  \u2502\n\u2502  \u2502  Container       \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6\u2502  (MCP Server)           \u2502  \u2502\n\u2502  \u2502                  \u2502 :9090   \u2502                         \u2502  \u2502\n\u2502  \u2502  - Memory API    \u2502         \u2502  - code_search          \u2502  \u2502\n\u2502  \u2502  - Knowledge API \u2502         \u2502  - code_trace_callers   \u2502  \u2502\n\u2502  \u2502  - Sync Bridge   \u2502         \u2502  - code_trace_callees   \u2502  \u2502\n\u2502  \u2502  - Tool Interface\u2502         \u2502  - code_graph           \u2502  \u2502\n\u2502  \u2502                  \u2502         \u2502  - code_index_status    \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2502           \u2502                              \u2502                  \u2502\n\u2502           \u25bc                              \u25bc                  \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n\u2502  \u2502  Shared Backends                                    \u2502    \u2502\n\u2502  \u2502  - Qdrant (vector storage)                         \u2502    \u2502\n\u2502  \u2502  - PostgreSQL (relational storage)                 \u2502    \u2502\n\u2502  \u2502  - Redis/Dragonfly (caching)                       \u2502    \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(n.h3,{id:"components",children:"Components"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"MCP Proxy Tools"})," (",(0,i.jsx)(n.code,{children:"tools/src/codesearch/"}),"):"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Implements MCP client for communication with Code Search"}),"\n",(0,i.jsx)(n.li,{children:"Provides 5 code intelligence tools"}),"\n",(0,i.jsx)(n.li,{children:"Circuit breaker for resilience"}),"\n",(0,i.jsx)(n.li,{children:"Tenant context support"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"CLI Commands"})," (",(0,i.jsx)(n.code,{children:"cli/src/commands/codesearch/"}),"):"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"init"})," - Initialize Code Search for a project"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"search"})," - Semantic code search"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"trace"})," - Call graph analysis (callers, callees, graph)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"status"})," - Index status monitoring"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Helm Chart Sidecar"})," (",(0,i.jsx)(n.code,{children:"charts/aeterna/"}),"):"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Sidecar container in Aeterna pod"}),"\n",(0,i.jsx)(n.li,{children:"Init container for project setup"}),"\n",(0,i.jsx)(n.li,{children:"Shared backend configuration"}),"\n",(0,i.jsx)(n.li,{children:"Health monitoring"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,i.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Kubernetes cluster (1.27+)"}),"\n",(0,i.jsx)(n.li,{children:"Helm 3.10+"}),"\n",(0,i.jsx)(n.li,{children:"Storage class for persistent volumes"}),"\n",(0,i.jsx)(n.li,{children:"Vector database (Qdrant recommended)"}),"\n",(0,i.jsx)(n.li,{children:"PostgreSQL database"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"helm-installation",children:"Helm Installation"}),"\n",(0,i.jsx)(n.h4,{id:"1-basic-installation-default-disabled",children:"1. Basic Installation (Default: Disabled)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# values.yaml\ncodesearch:\n  enabled: true\n  \n  embedder:\n    type: ollama\n    model: nomic-embed-text\n  \n  store:\n    type: qdrant\n"})}),"\n",(0,i.jsx)(n.p,{children:"Install the chart:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"helm install aeterna ./charts/aeterna \\\n  --namespace aeterna \\\n  --create-namespace \\\n  --values values.yaml\n"})}),"\n",(0,i.jsx)(n.h4,{id:"2-with-project-initialization",children:"2. With Project Initialization"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# values.yaml\ncodesearch:\n  enabled: true\n  \n  # Projects to initialize on startup\n  projects:\n    - path: /workspace/aeterna\n      name: aeterna\n    - path: /workspace/my-project\n      name: my-project\n  \n  embedder:\n    type: ollama\n    model: nomic-embed-text\n  \n  store:\n    type: qdrant\n    qdrant:\n      collectionPrefix: codesearch_\n"})}),"\n",(0,i.jsx)(n.h4,{id:"3-with-openai-embeddings",children:"3. With OpenAI Embeddings"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'# values.yaml\ncodesearch:\n  enabled: true\n  \n  embedder:\n    type: openai\n    model: text-embedding-3-small\n  \n  store:\n    type: qdrant\n\nllm:\n  provider: openai\n  openai:\n    apiKey: "sk-..."\n    # Or use existing secret:\n    # existingSecret: my-openai-secret\n'})}),"\n",(0,i.jsx)(n.h4,{id:"4-with-postgresql-storage",children:"4. With PostgreSQL Storage"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# values.yaml\ncodesearch:\n  enabled: true\n  \n  embedder:\n    type: ollama\n    model: nomic-embed-text\n  \n  store:\n    type: postgres\n    postgres:\n      schema: codesearch\n\npostgresql:\n  bundled: true\n  cluster:\n    instances: 3\n    storage:\n      size: 50Gi\n"})}),"\n",(0,i.jsx)(n.h3,{id:"configuration-reference",children:"Configuration Reference"}),"\n",(0,i.jsx)(n.h4,{id:"code-search-values",children:"Code Search Values"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'codesearch:\n  # Enable Code Search sidecar\n  enabled: false\n  \n  # MCP server URL (default: localhost for sidecar)\n  mcpServerUrl: "http://localhost:9090"\n  \n  # Code Search image\n  image:\n    repository: ghcr.io/codesearch/codesearch\n    tag: latest\n    pullPolicy: IfNotPresent\n  \n  # Resource limits\n  resources:\n    limits:\n      cpu: 500m\n      memory: 512Mi\n    requests:\n      cpu: 50m\n      memory: 128Mi\n  \n  # Embedder configuration\n  embedder:\n    type: ollama  # ollama | openai\n    model: nomic-embed-text\n    endpoint: ""  # Optional, defaults to llm.ollama.host\n  \n  # Storage backend\n  store:\n    type: qdrant  # qdrant | postgres | gob\n    \n    qdrant:\n      collectionPrefix: codesearch_\n    \n    postgres:\n      schema: codesearch\n  \n  # Projects to initialize\n  projects: []\n    # - path: /workspace/project1\n    #   name: project1\n  \n  # Init container settings\n  initContainer:\n    enabled: true\n    timeout: 300\n'})}),"\n",(0,i.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,i.jsx)(n.h3,{id:"cli-commands",children:"CLI Commands"}),"\n",(0,i.jsx)(n.h4,{id:"initialize-a-project",children:"Initialize a Project"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Basic initialization\naeterna codesearch init /path/to/project\n\n# With custom embedder\naeterna codesearch init /path/to/project \\\n  --embedder openai \\\n  --store qdrant\n\n# Force re-initialization\naeterna codesearch init /path/to/project --force\n"})}),"\n",(0,i.jsx)(n.h4,{id:"semantic-code-search",children:"Semantic Code Search"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Natural language search\naeterna codesearch search "authentication middleware"\n\n# With filters\naeterna codesearch search "database queries" \\\n  --limit 10 \\\n  --threshold 0.7 \\\n  --pattern "*.go" \\\n  --language go\n\n# JSON output\naeterna codesearch search "error handling" --json\n\n# Files only (no snippets)\naeterna codesearch search "config loader" --files-only\n'})}),"\n",(0,i.jsx)(n.h4,{id:"call-graph-analysis",children:"Call Graph Analysis"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Find all callers of a function\naeterna codesearch trace callers HandleRequest\n\n# Recursive tracing\naeterna codesearch trace callers AuthMiddleware \\\n  --recursive \\\n  --max-depth 3 \\\n  --file src/auth/middleware.go\n\n# Find all callees\naeterna codesearch trace callees ProcessOrder \\\n  --recursive \\\n  --max-depth 2\n\n# Build full call graph\naeterna codesearch trace graph UserService \\\n  --depth 2 \\\n  --include-callers \\\n  --include-callees \\\n  --format dot\n\n# Generate visualization\naeterna codesearch trace graph AuthService \\\n  --depth 2 \\\n  --format dot | dot -Tpng > auth-graph.png\n\n# Mermaid format for docs\naeterna codesearch trace graph OrderService \\\n  --depth 1 \\\n  --format mermaid\n"})}),"\n",(0,i.jsx)(n.h4,{id:"index-status",children:"Index Status"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Check all projects\naeterna codesearch status\n\n# Specific project\naeterna codesearch status --project aeterna\n\n# Watch mode (real-time updates)\naeterna codesearch status --watch\n\n# JSON output\naeterna codesearch status --json\n"})}),"\n",(0,i.jsx)(n.h3,{id:"mcp-tools-programmatic",children:"MCP Tools (Programmatic)"}),"\n",(0,i.jsx)(n.h4,{id:"tool-code_search",children:"Tool: code_search"}),"\n",(0,i.jsx)(n.p,{children:"Search codebase using natural language:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "tool": "code_search",\n  "arguments": {\n    "query": "authentication middleware",\n    "limit": 10,\n    "threshold": 0.7,\n    "tenant_id": "org-123",\n    "file_pattern": "*.go",\n    "language": "go"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Response:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "results": [\n    {\n      "file": "src/auth/middleware.go",\n      "line": 42,\n      "score": 0.92,\n      "snippet": "func AuthMiddleware(next http.Handler) http.Handler {",\n      "context": "..."\n    }\n  ],\n  "total": 5,\n  "query_embedding_cached": true\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"tool-code_trace_callers",children:"Tool: code_trace_callers"}),"\n",(0,i.jsx)(n.p,{children:"Find all functions that call a symbol:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "tool": "code_trace_callers",\n  "arguments": {\n    "symbol": "HandleLogin",\n    "file_hint": "src/handlers/auth.go",\n    "recursive": true,\n    "max_depth": 3,\n    "tenant_id": "org-123"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Response:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "callers": [\n    {\n      "symbol": "AuthRouter",\n      "file": "src/routes/auth.go",\n      "line": 15,\n      "depth": 1\n    },\n    {\n      "symbol": "main",\n      "file": "cmd/server/main.go",\n      "line": 42,\n      "depth": 2\n    }\n  ],\n  "symbol": "HandleLogin",\n  "total_callers": 2,\n  "max_depth_reached": false\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"tool-code_trace_callees",children:"Tool: code_trace_callees"}),"\n",(0,i.jsx)(n.p,{children:"Find all functions called by a symbol:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "tool": "code_trace_callees",\n  "arguments": {\n    "symbol": "ProcessOrder",\n    "recursive": true,\n    "max_depth": 2,\n    "tenant_id": "org-123"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"tool-code_graph",children:"Tool: code_graph"}),"\n",(0,i.jsx)(n.p,{children:"Build a call dependency graph:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "tool": "code_graph",\n  "arguments": {\n    "symbol": "UserService",\n    "depth": 2,\n    "include_callers": true,\n    "include_callees": true,\n    "tenant_id": "org-123"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Response:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "graph": {\n    "nodes": [\n      {"id": "UserService", "type": "root"},\n      {"id": "CreateUser", "type": "callee"},\n      {"id": "ValidateUser", "type": "callee"},\n      {"id": "UserHandler", "type": "caller"}\n    ],\n    "edges": [\n      {"from": "UserService", "to": "CreateUser"},\n      {"from": "UserService", "to": "ValidateUser"},\n      {"from": "UserHandler", "to": "UserService"}\n    ]\n  },\n  "symbol": "UserService",\n  "depth": 2\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"tool-code_index_status",children:"Tool: code_index_status"}),"\n",(0,i.jsx)(n.p,{children:"Get indexing status:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "tool": "code_index_status",\n  "arguments": {\n    "project": "aeterna",\n    "tenant_id": "org-123"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Response:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "projects": [\n    {\n      "name": "aeterna",\n      "path": "/workspace/aeterna",\n      "state": "indexed",\n      "files_indexed": 342,\n      "total_chunks": 5281,\n      "last_indexed": "2026-02-01T19:00:00Z"\n    }\n  ]\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"use-cases",children:"Use Cases"}),"\n",(0,i.jsx)(n.h3,{id:"1-ai-agent-code-understanding",children:"1. AI Agent Code Understanding"}),"\n",(0,i.jsx)(n.p,{children:"Enable AI agents to understand codebase structure:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Agent query: "Find authentication implementation"\nresult = mcp_client.call_tool("code_search", {\n    "query": "user authentication flow",\n    "limit": 5,\n    "tenant_id": session.tenant_id\n})\n\n# Agent analyzes results and traces dependencies\nfor match in result["results"]:\n    callers = mcp_client.call_tool("code_trace_callers", {\n        "symbol": extract_symbol(match["snippet"]),\n        "file_hint": match["file"],\n        "recursive": True,\n        "max_depth": 2,\n        "tenant_id": session.tenant_id\n    })\n'})}),"\n",(0,i.jsx)(n.h3,{id:"2-code-review-assistance",children:"2. Code Review Assistance"}),"\n",(0,i.jsx)(n.p,{children:"Help reviewers understand impact:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# PR introduces changes to PaymentService\naeterna codesearch trace callers PaymentService \\\n  --recursive --max-depth 5 > callers.txt\n\n# Check all affected components\naeterna codesearch trace graph PaymentService \\\n  --depth 3 \\\n  --include-callers \\\n  --format dot | dot -Tpng > impact.png\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3-onboarding-new-developers",children:"3. Onboarding New Developers"}),"\n",(0,i.jsx)(n.p,{children:"Visualize system architecture:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Generate architecture diagram\naeterna codesearch trace graph ApplicationCore \\\n  --depth 2 \\\n  --include-callers \\\n  --include-callees \\\n  --format mermaid > architecture.md\n"})}),"\n",(0,i.jsx)(n.h3,{id:"4-bug-investigation",children:"4. Bug Investigation"}),"\n",(0,i.jsx)(n.p,{children:"Trace execution flow:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Find where error is thrown\naeterna codesearch search "InsufficientFundsError"\n\n# Trace all code paths leading to error\naeterna codesearch trace callers ThrowInsufficientFundsError \\\n  --recursive --max-depth 10\n'})}),"\n",(0,i.jsx)(n.h3,{id:"5-refactoring-planning",children:"5. Refactoring Planning"}),"\n",(0,i.jsx)(n.p,{children:"Understand dependencies before refactoring:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Check all usages of deprecated function\naeterna codesearch trace callers OldFunction --recursive\n\n# Build dependency graph\naeterna codesearch trace graph OldFunction \\\n  --depth 5 --include-callers --format json > dependencies.json\n"})}),"\n",(0,i.jsx)(n.h2,{id:"backend-configurations",children:"Backend Configurations"}),"\n",(0,i.jsx)(n.h3,{id:"qdrant-recommended",children:"Qdrant (Recommended)"}),"\n",(0,i.jsx)(n.p,{children:"Best for production use with semantic search:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"codesearch:\n  store:\n    type: qdrant\n    qdrant:\n      collectionPrefix: codesearch_\n\nvectorBackend:\n  type: qdrant\n  qdrant:\n    bundled: true\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Pros"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Fast semantic search"}),"\n",(0,i.jsx)(n.li,{children:"Efficient similarity scoring"}),"\n",(0,i.jsx)(n.li,{children:"Scales well with large codebases"}),"\n",(0,i.jsx)(n.li,{children:"Native multi-tenancy support"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Cons"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Requires more memory"}),"\n",(0,i.jsx)(n.li,{children:"Separate service to manage"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"postgresql",children:"PostgreSQL"}),"\n",(0,i.jsx)(n.p,{children:"Good for unified storage with Aeterna data:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"codesearch:\n  store:\n    type: postgres\n    postgres:\n      schema: codesearch\n\npostgresql:\n  bundled: true\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Pros"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Single database for all data"}),"\n",(0,i.jsx)(n.li,{children:"Strong consistency"}),"\n",(0,i.jsx)(n.li,{children:"Familiar query language"}),"\n",(0,i.jsx)(n.li,{children:"ACID transactions"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Cons"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Slower semantic search"}),"\n",(0,i.jsx)(n.li,{children:"Requires pgvector extension"}),"\n",(0,i.jsx)(n.li,{children:"Higher query latency"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"gob-file-based",children:"GOB (File-based)"}),"\n",(0,i.jsx)(n.p,{children:"Suitable for development/testing:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"codesearch:\n  store:\n    type: gob\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Pros"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"No external dependencies"}),"\n",(0,i.jsx)(n.li,{children:"Fast for small projects"}),"\n",(0,i.jsx)(n.li,{children:"Simple setup"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Cons"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Not production-ready"}),"\n",(0,i.jsx)(n.li,{children:"No multi-tenancy"}),"\n",(0,i.jsx)(n.li,{children:"Limited scalability"}),"\n",(0,i.jsx)(n.li,{children:"No persistence across restarts"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"embedder-options",children:"Embedder Options"}),"\n",(0,i.jsx)(n.h3,{id:"ollama-default",children:"Ollama (Default)"}),"\n",(0,i.jsx)(n.p,{children:"Local, open-source embeddings:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"codesearch:\n  embedder:\n    type: ollama\n    model: nomic-embed-text\n\nllm:\n  ollama:\n    host: http://ollama:11434\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Recommended Models"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"nomic-embed-text"})," - Best all-around (768 dims)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"mxbai-embed-large"})," - Highest quality (1024 dims)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"all-minilm"})," - Fastest (384 dims)"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Pros"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"No API costs"}),"\n",(0,i.jsx)(n.li,{children:"Data privacy (local)"}),"\n",(0,i.jsx)(n.li,{children:"Consistent embeddings"}),"\n",(0,i.jsx)(n.li,{children:"Offline capable"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Cons"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Slower than cloud APIs"}),"\n",(0,i.jsx)(n.li,{children:"Requires GPU for speed"}),"\n",(0,i.jsx)(n.li,{children:"Limited model selection"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"openai",children:"OpenAI"}),"\n",(0,i.jsx)(n.p,{children:"Cloud-based, high-quality embeddings:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"codesearch:\n  embedder:\n    type: openai\n    model: text-embedding-3-small\n\nllm:\n  provider: openai\n  openai:\n    apiKey: sk-...\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Recommended Models"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"text-embedding-3-small"})," - Best value (1536 dims, $0.02/1M tokens)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"text-embedding-3-large"})," - Highest quality (3072 dims, $0.13/1M tokens)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"text-embedding-ada-002"})," - Legacy (1536 dims)"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Pros"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Highest quality"}),"\n",(0,i.jsx)(n.li,{children:"Very fast"}),"\n",(0,i.jsx)(n.li,{children:"No infrastructure"}),"\n",(0,i.jsx)(n.li,{children:"Latest models"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Cons"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"API costs"}),"\n",(0,i.jsx)(n.li,{children:"Data leaves cluster"}),"\n",(0,i.jsx)(n.li,{children:"Rate limits"}),"\n",(0,i.jsx)(n.li,{children:"Internet dependency"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(n.h3,{id:"code-search-sidecar-not-starting",children:"Code Search Sidecar Not Starting"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Symptoms"}),": Pod stuck in ",(0,i.jsx)(n.code,{children:"Init:0/1"})," or ",(0,i.jsx)(n.code,{children:"CrashLoopBackOff"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Check init container logs:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl logs -n aeterna <pod-name> -c codesearch-init\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Check sidecar logs:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl logs -n aeterna <pod-name> -c codesearch\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"Verify embedder configuration:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# For Ollama\nkubectl get svc -n aeterna ollama\n\n# For OpenAI\nkubectl get secret -n aeterna aeterna-openai\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:"Check storage backend:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# For Qdrant\nkubectl get svc -n aeterna aeterna-qdrant\n\n# For PostgreSQL\nkubectl get cluster -n aeterna aeterna-postgresql\n"})}),"\n",(0,i.jsx)(n.h3,{id:"project-initialization-fails",children:"Project Initialization Fails"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Symptoms"}),": Init container succeeds but no projects indexed"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Check if projects exist in values:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'helm get values aeterna -n aeterna | grep -A 10 "projects:"\n'})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Manually initialize:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl exec -n aeterna <pod-name> -c codesearch -- \\\n  codesearch init /path/to/project \\\n  --embedder ollama \\\n  --store qdrant\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"Check init script execution:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'kubectl logs -n aeterna <pod-name> -c codesearch-init | grep "Initializing project"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"mcp-connection-errors",children:"MCP Connection Errors"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Symptoms"}),": ",(0,i.jsx)(n.code,{children:"code_search"})," returns connection refused"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Verify MCP server is running:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl exec -n aeterna <pod-name> -c codesearch -- \\\n  curl http://localhost:9090/health\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Check port forwarding:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl port-forward -n aeterna <pod-name> 9090:9090\ncurl http://localhost:9090/health\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"Verify MCP server URL in Aeterna config:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl exec -n aeterna <pod-name> -c aeterna -- \\\n  env | grep CODESEARCH\n"})}),"\n",(0,i.jsx)(n.h3,{id:"slow-semantic-search",children:"Slow Semantic Search"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Symptoms"}),": ",(0,i.jsx)(n.code,{children:"code_search"})," takes >5 seconds"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Check embedding cache:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Enable Redis/Dragonfly cache\ncache:\n  type: dragonfly\n  dragonfly:\n    enabled: true\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Increase Code Search resources:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"codesearch:\n  resources:\n    limits:\n      cpu: 2000m\n      memory: 2Gi\n    requests:\n      cpu: 500m\n      memory: 1Gi\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"Use faster embedder:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"codesearch:\n  embedder:\n    type: ollama\n    model: all-minilm  # Faster, smaller model\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:"Reduce index size:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Exclude vendor/node_modules\ncodesearch init /project --exclude vendor --exclude node_modules\n"})}),"\n",(0,i.jsx)(n.h3,{id:"high-memory-usage",children:"High Memory Usage"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Symptoms"}),": OOMKilled or memory limits exceeded"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Increase memory limits:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"codesearch:\n  resources:\n    limits:\n      memory: 2Gi\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Use PostgreSQL instead of Qdrant:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"codesearch:\n  store:\n    type: postgres\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"Reduce batch size for indexing:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Set in ConfigMap\nCODESEARCH_INDEX_BATCH_SIZE: "50"\n'})}),"\n",(0,i.jsx)(n.h2,{id:"performance-tuning",children:"Performance Tuning"}),"\n",(0,i.jsx)(n.h3,{id:"indexing-performance",children:"Indexing Performance"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# Fast indexing\ncodesearch:\n  resources:\n    limits:\n      cpu: 4000m\n      memory: 4Gi\n  embedder:\n    type: openai  # Fastest\n    model: text-embedding-3-small\n"})}),"\n",(0,i.jsx)(n.h3,{id:"query-performance",children:"Query Performance"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# Fast queries\ncodesearch:\n  store:\n    type: qdrant  # Best for semantic search\ncache:\n  type: dragonfly  # Enable embedding cache\n  dragonfly:\n    enabled: true\n"})}),"\n",(0,i.jsx)(n.h3,{id:"resource-optimization",children:"Resource Optimization"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# Balanced configuration\ncodesearch:\n  resources:\n    limits:\n      cpu: 1000m\n      memory: 1Gi\n    requests:\n      cpu: 200m\n      memory: 512Mi\n  embedder:\n    type: ollama\n    model: nomic-embed-text  # Good quality/speed ratio\n"})}),"\n",(0,i.jsx)(n.h2,{id:"security",children:"Security"}),"\n",(0,i.jsx)(n.h3,{id:"network-policies",children:"Network Policies"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"networkPolicy:\n  enabled: true\n\ncodesearch:\n  enabled: true\n  # Sidecar only accessible from Aeterna container\n"})}),"\n",(0,i.jsx)(n.h3,{id:"secret-management",children:"Secret Management"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# Use existing secrets\nllm:\n  openai:\n    existingSecret: my-openai-secret\n\nvectorBackend:\n  qdrant:\n    external:\n      existingSecret: my-qdrant-secret\n\npostgresql:\n  external:\n    existingSecret: my-postgres-secret\n"})}),"\n",(0,i.jsx)(n.h3,{id:"pod-security-context",children:"Pod Security Context"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"codesearch:\n  # Already configured in deployment\n  securityContext:\n    allowPrivilegeEscalation: false\n    readOnlyRootFilesystem: true\n    runAsNonRoot: true\n    runAsUser: 1000\n    capabilities:\n      drop:\n        - ALL\n"})}),"\n",(0,i.jsx)(n.h2,{id:"monitoring",children:"Monitoring"}),"\n",(0,i.jsx)(n.h3,{id:"metrics",children:"Metrics"}),"\n",(0,i.jsxs)(n.p,{children:["Code Search exposes Prometheus metrics on ",(0,i.jsx)(n.code,{children:"/metrics"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# ServiceMonitor\nobservability:\n  serviceMonitor:\n    enabled: true\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Key Metrics"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"codesearch_search_duration_seconds"})," - Search latency"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"codesearch_index_chunks_total"})," - Total indexed chunks"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"codesearch_mcp_requests_total"})," - MCP request count"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"codesearch_embedding_cache_hit_ratio"})," - Cache effectiveness"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"logs",children:"Logs"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# View Code Search logs\nkubectl logs -n aeterna <pod-name> -c codesearch -f\n\n# View init logs\nkubectl logs -n aeterna <pod-name> -c codesearch-init\n\n# Search for errors\nkubectl logs -n aeterna <pod-name> -c codesearch | grep ERROR\n"})}),"\n",(0,i.jsx)(n.h3,{id:"health-checks",children:"Health Checks"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Check health endpoint\nkubectl exec -n aeterna <pod-name> -c codesearch -- \\\n  curl http://localhost:9090/health\n\n# Check index status\nkubectl exec -n aeterna <pod-name> -c aeterna -- \\\n  aeterna codesearch status --json\n"})}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsx)(n.h3,{id:"1-start-with-ollama",children:"1. Start with Ollama"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"codesearch:\n  embedder:\n    type: ollama\n    model: nomic-embed-text\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"No API costs"}),"\n",(0,i.jsx)(n.li,{children:"Test without rate limits"}),"\n",(0,i.jsx)(n.li,{children:"Migrate to OpenAI later if needed"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"2-use-qdrant-for-production",children:"2. Use Qdrant for Production"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"codesearch:\n  store:\n    type: qdrant\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Best semantic search performance"}),"\n",(0,i.jsx)(n.li,{children:"Scales well"}),"\n",(0,i.jsx)(n.li,{children:"Multi-tenancy support"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"3-enable-init-container",children:"3. Enable Init Container"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"codesearch:\n  initContainer:\n    enabled: true\n  projects:\n    - path: /workspace/project\n      name: project\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Automatic setup on deployment"}),"\n",(0,i.jsx)(n.li,{children:"No manual initialization"}),"\n",(0,i.jsx)(n.li,{children:"Consistent across environments"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"4-configure-resource-limits",children:"4. Configure Resource Limits"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"codesearch:\n  resources:\n    limits:\n      cpu: 1000m\n      memory: 1Gi\n    requests:\n      cpu: 200m\n      memory: 512Mi\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Prevents resource starvation"}),"\n",(0,i.jsx)(n.li,{children:"Enables autoscaling"}),"\n",(0,i.jsx)(n.li,{children:"Predictable costs"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"5-use-semantic-cache",children:"5. Use Semantic Cache"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"cache:\n  type: dragonfly\n  dragonfly:\n    enabled: true\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"60-80% cost reduction"}),"\n",(0,i.jsx)(n.li,{children:"Faster responses"}),"\n",(0,i.jsx)(n.li,{children:"Reduced embedder load"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"6-monitor-index-status",children:"6. Monitor Index Status"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Add to monitoring dashboard\naeterna codesearch status --json | \\\n  jq '.projects[] | {name, files_indexed, state}'\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Track indexing progress"}),"\n",(0,i.jsx)(n.li,{children:"Detect stale indexes"}),"\n",(0,i.jsx)(n.li,{children:"Plan re-indexing"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"migration-guide",children:"Migration Guide"}),"\n",(0,i.jsx)(n.h3,{id:"from-standalone-code-search",children:"From Standalone Code Search"}),"\n",(0,i.jsx)(n.p,{children:"If you're using standalone Code Search:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Export existing indexes"}),":"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"codesearch export --output backup.json\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Enable Code Search in Helm"}),":"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"codesearch:\n  enabled: true\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Import indexes"})," (optional):"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl exec -n aeterna <pod-name> -c codesearch -- \\\n  codesearch import --input /data/backup.json\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Update client configuration"}),":"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Before\nmcp_client = MCPClient("http://codesearch:9090")\n\n# After (sidecar)\nmcp_client = MCPClient("http://localhost:9090")\n'})}),"\n",(0,i.jsx)(n.h3,{id:"upgrading-code-search-version",children:"Upgrading Code Search Version"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"codesearch:\n  image:\n    tag: v2.0.0  # Update version\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"helm upgrade aeterna ./charts/aeterna \\\n  --namespace aeterna \\\n  --reuse-values \\\n  --set codesearch.image.tag=v2.0.0\n"})}),"\n",(0,i.jsx)(n.h2,{id:"central-index-service",children:"Central Index Service"}),"\n",(0,i.jsx)(n.p,{children:"The Central Index Service provides a centralised API for managing code search indexes across multiple repositories and tenants. It accepts webhook notifications from CI/CD pipelines, coordinates graph refreshes, reports index status, and enables cross-repository semantic search."}),"\n",(0,i.jsx)(n.h3,{id:"api-endpoints",children:"API Endpoints"}),"\n",(0,i.jsx)(n.h4,{id:"post-apiv1indexupdated",children:"POST /api/v1/index/updated"}),"\n",(0,i.jsx)(n.p,{children:"Notify the central service that a repository has been re-indexed."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Headers:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Authorization: Bearer <AETERNA_API_KEY>"})," (required)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"X-Hub-Signature-256: sha256=<hex>"})," (optional, verified when ",(0,i.jsx)(n.code,{children:"AETERNA_WEBHOOK_SECRET"})," is set)"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Request body:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "repository": "acme/api-server",\n  "tenant_id": "acme",\n  "commit_sha": "abc123def456",\n  "branch": "main",\n  "project": "acme/api-server"\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "queued": true,\n  "job_id": "550e8400-e29b-41d4-a716-446655440000"\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"post-apiv1graphrefresh",children:"POST /api/v1/graph/refresh"}),"\n",(0,i.jsx)(n.p,{children:"Trigger a call-graph refresh for a tenant's project."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Request body:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "tenant_id": "acme",\n  "project": "acme/api-server"\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "status": "accepted",\n  "tenant_id": "acme",\n  "project": "acme/api-server"\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"get-apiv1indexstatus",children:"GET /api/v1/index/status"}),"\n",(0,i.jsxs)(n.p,{children:["Query current indexing status. Accepts optional ",(0,i.jsx)(n.code,{children:"tenant_id"})," and ",(0,i.jsx)(n.code,{children:"project"})," query parameters."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "status": "ok",\n  "filters": { "tenant_id": "acme", "project": null },\n  "projects": []\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"post-apiv1searchcross-repo",children:"POST /api/v1/search/cross-repo"}),"\n",(0,i.jsx)(n.p,{children:"Semantic search across all repositories within a tenant workspace."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Request body:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "query": "authentication middleware",\n  "tenant_id": "acme",\n  "projects": ["api-server", "auth-lib"],\n  "limit": 10\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "results": [],\n  "total": 0\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"authentication--rate-limiting",children:"Authentication & Rate Limiting"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["All endpoints require ",(0,i.jsx)(n.code,{children:"Authorization: Bearer <token>"})," matching the ",(0,i.jsx)(n.code,{children:"AETERNA_API_KEY"})," env var."]}),"\n",(0,i.jsxs)(n.li,{children:["Webhook endpoints optionally verify ",(0,i.jsx)(n.code,{children:"X-Hub-Signature-256"})," against ",(0,i.jsx)(n.code,{children:"AETERNA_WEBHOOK_SECRET"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Rate limiting: 100 requests per minute per API key (sliding window)."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"github-actions-setup",children:"GitHub Actions Setup"}),"\n",(0,i.jsxs)(n.p,{children:["A reusable workflow is provided at ",(0,i.jsx)(n.code,{children:".github/workflows/codesearch-index.yml"})," to automatically index repositories on push to ",(0,i.jsx)(n.code,{children:"main"}),"/",(0,i.jsx)(n.code,{children:"master"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,i.jsx)(n.p,{children:"Add the following to your repository:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# .github/workflows/index.yml\nname: Index Code Search\non:\n  push:\n    branches: [main]\n\njobs:\n  index:\n    uses: kikokikok/aeterna/.github/workflows/codesearch-index.yml@main\n    secrets:\n      AETERNA_API_KEY: ${{ secrets.AETERNA_API_KEY }}\n      QDRANT_URL: ${{ secrets.QDRANT_URL }}\n      OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"required-secrets",children:"Required Secrets"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Secret"}),(0,i.jsx)(n.th,{children:"Required"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"AETERNA_API_KEY"})}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"API key for Central Index Service"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"QDRANT_URL"})}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsxs)(n.td,{children:["Qdrant instance URL (e.g. ",(0,i.jsx)(n.code,{children:"http://qdrant:6333"}),")"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"OPENAI_API_KEY"})}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"If set, uses OpenAI embeddings; otherwise falls back to Ollama"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"required-variables",children:"Required Variables"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Variable"}),(0,i.jsx)(n.th,{children:"Required"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"AETERNA_CENTRAL_URL"})}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Central Index Service URL. When set, the workflow notifies Aeterna after indexing."})]})})]}),"\n",(0,i.jsx)(n.h3,{id:"custom-project-name",children:"Custom Project Name"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"jobs:\n  index:\n    uses: kikokikok/aeterna/.github/workflows/codesearch-index.yml@main\n    with:\n      project_name: my-custom-project\n    secrets:\n      AETERNA_API_KEY: ${{ secrets.AETERNA_API_KEY }}\n      QDRANT_URL: ${{ secrets.QDRANT_URL }}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"what-the-workflow-does",children:"What the Workflow Does"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Checks out the repository with full history"}),"\n",(0,i.jsxs)(n.li,{children:["Downloads the ",(0,i.jsx)(n.code,{children:"codesearch"})," CLI binary"]}),"\n",(0,i.jsx)(n.li,{children:"Auto-detects embedder type (OpenAI if key present, else Ollama)"}),"\n",(0,i.jsx)(n.li,{children:"Initialises and indexes the repository into the tenant's workspace"}),"\n",(0,i.jsxs)(n.li,{children:["Notifies the Central Index Service (if ",(0,i.jsx)(n.code,{children:"AETERNA_CENTRAL_URL"})," is configured)"]}),"\n",(0,i.jsx)(n.li,{children:"Triggers a graph refresh for the project"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"multi-tenant-workspace-management",children:"Multi-Tenant Workspace Management"}),"\n",(0,i.jsx)(n.p,{children:"Each tenant gets an isolated workspace with deterministic naming:"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Concept"}),(0,i.jsx)(n.th,{children:"Convention"}),(0,i.jsx)(n.th,{children:"Example"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Workspace name"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"org-<lowercase-tenant>"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"org-acme-corp"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Collection prefix"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"codesearch_<normalised>_"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"codesearch_acme_corp_"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Project isolation"}),(0,i.jsx)(n.td,{children:"Per-project within workspace"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"codesearch_acme_corp_api_server"})})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["Workspaces are created on first use via the ",(0,i.jsx)(n.code,{children:"WorkspaceManager"}),". Each workspace tracks:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Registered projects"}),"\n",(0,i.jsx)(n.li,{children:"Store type (qdrant, postgres, etc.)"}),"\n",(0,i.jsx)(n.li,{children:"Embedder type (openai, ollama)"}),"\n",(0,i.jsx)(n.li,{children:"Creation and last-active timestamps"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting-central-index",children:"Troubleshooting (Central Index)"}),"\n",(0,i.jsx)(n.h3,{id:"binary-not-found",children:"Binary Not Found"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Symptom:"})," ",(0,i.jsx)(n.code,{children:"codesearch: command not found"})," in CI"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Verify the download URL in the workflow matches the release architecture"}),"\n",(0,i.jsxs)(n.li,{children:["Check that the binary was moved to a directory in ",(0,i.jsx)(n.code,{children:"$PATH"})]}),"\n",(0,i.jsxs)(n.li,{children:["Test locally: ",(0,i.jsx)(n.code,{children:"curl -sSfL <url> -o codesearch && chmod +x codesearch && ./codesearch --version"})]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"embedding-dimension-mismatch",children:"Embedding Dimension Mismatch"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Symptom:"})," ",(0,i.jsx)(n.code,{children:"dimension mismatch"})," error during indexing or search"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Cause:"})," The collection was created with one embedding model but you're now using a different one (e.g. switched from ",(0,i.jsx)(n.code,{children:"nomic-embed-text"})," at 768 dims to ",(0,i.jsx)(n.code,{children:"text-embedding-3-small"})," at 1536 dims)."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Delete and recreate the Qdrant collection: ",(0,i.jsx)(n.code,{children:"curl -X DELETE http://qdrant:6333/collections/<name>"})]}),"\n",(0,i.jsxs)(n.li,{children:["Re-index with ",(0,i.jsx)(n.code,{children:"codesearch index . --force"})]}),"\n",(0,i.jsx)(n.li,{children:"Ensure all repositories in a workspace use the same embedder model"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"qdrant-connection-issues",children:"Qdrant Connection Issues"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Symptom:"})," ",(0,i.jsx)(n.code,{children:"connection refused"})," or ",(0,i.jsx)(n.code,{children:"timeout"})," when indexing"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Verify ",(0,i.jsx)(n.code,{children:"QDRANT_URL"})," is reachable from the CI runner"]}),"\n",(0,i.jsx)(n.li,{children:"For private clusters, use a self-hosted runner or tunnel"}),"\n",(0,i.jsx)(n.li,{children:"Check firewall/network policy allows the runner IP"}),"\n",(0,i.jsxs)(n.li,{children:["Test connectivity: ",(0,i.jsx)(n.code,{children:"curl -s $QDRANT_URL/collections"})]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"rate-limit-exceeded",children:"Rate Limit Exceeded"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Symptom:"})," ",(0,i.jsx)(n.code,{children:"429 Too Many Requests"})," from the Central Index Service"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"The default limit is 100 requests/minute per API key"}),"\n",(0,i.jsx)(n.li,{children:"Add concurrency controls to your workflow to avoid parallel runs"}),"\n",(0,i.jsxs)(n.li,{children:["For bulk re-indexing, space requests with ",(0,i.jsx)(n.code,{children:"sleep"})," between repositories"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"webhook-signature-verification-failed",children:"Webhook Signature Verification Failed"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Symptom:"})," ",(0,i.jsx)(n.code,{children:"Invalid webhook signature"})," error"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Ensure ",(0,i.jsx)(n.code,{children:"AETERNA_WEBHOOK_SECRET"})," matches on both the sender and receiver"]}),"\n",(0,i.jsxs)(n.li,{children:["Verify the signature header format is ",(0,i.jsx)(n.code,{children:"sha256=<hex>"})]}),"\n",(0,i.jsx)(n.li,{children:"Check that the request body was not modified in transit (e.g. by a proxy)"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"support",children:"Support"}),"\n",(0,i.jsx)(n.h3,{id:"documentation",children:"Documentation"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Code Search: ",(0,i.jsx)(n.a,{href:"https://github.com/codesearch/codesearch",children:"https://github.com/codesearch/codesearch"})]}),"\n",(0,i.jsxs)(n.li,{children:["Aeterna: ",(0,i.jsx)(n.a,{href:"https://github.com/kikokikok/aeterna",children:"https://github.com/kikokikok/aeterna"})]}),"\n",(0,i.jsxs)(n.li,{children:["MCP Protocol: ",(0,i.jsx)(n.a,{href:"https://modelcontextprotocol.io",children:"https://modelcontextprotocol.io"})]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"community",children:"Community"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["GitHub Issues: ",(0,i.jsx)(n.a,{href:"https://github.com/kikokikok/aeterna/issues",children:"https://github.com/kikokikok/aeterna/issues"})]}),"\n",(0,i.jsxs)(n.li,{children:["Discussions: ",(0,i.jsx)(n.a,{href:"https://github.com/kikokikok/aeterna/discussions",children:"https://github.com/kikokikok/aeterna/discussions"})]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"commercial-support",children:"Commercial Support"}),"\n",(0,i.jsxs)(n.p,{children:["Contact: ",(0,i.jsx)(n.a,{href:"mailto:support@aeterna.ai",children:"support@aeterna.ai"})]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},8453(e,n,s){s.d(n,{R:()=>a,x:()=>c});var r=s(6540);const i={},l=r.createContext(i);function a(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);