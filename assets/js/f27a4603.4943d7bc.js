"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[7994],{1834(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>m,frontMatter:()=>l,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"helm/sizing-guide","title":"Sizing Guide for Aeterna Deployments","description":"This guide helps you select appropriate resources and infrastructure for Aeterna deployments based on memory volume, user concurrency, and AI agent complexity.","source":"@site/docs/helm/sizing-guide.md","sourceDirName":"helm","slug":"/helm/sizing-guide","permalink":"/aeterna/docs/helm/sizing-guide","draft":false,"unlisted":false,"editUrl":"https://github.com/kikokikok/aeterna/tree/main/website/docs/helm/sizing-guide.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"High Availability Requirements for Aeterna","permalink":"/aeterna/docs/helm/ha-requirements"},"next":{"title":"Production Deployment Checklist","permalink":"/aeterna/docs/helm/production-checklist"}}');var r=s(4848),t=s(8453);const l={},a="Sizing Guide for Aeterna Deployments",c={},o=[{value:"Sizing Tiers Overview",id:"sizing-tiers-overview",level:2},{value:"Small Tier Configuration",id:"small-tier-configuration",level:2},{value:"Minimum Infrastructure",id:"minimum-infrastructure",level:3},{value:"Component Resource Requests and Limits",id:"component-resource-requests-and-limits",level:3},{value:"Storage Sizing",id:"storage-sizing",level:3},{value:"Network Bandwidth",id:"network-bandwidth",level:3},{value:"Use Cases",id:"use-cases",level:3},{value:"Medium Tier Configuration",id:"medium-tier-configuration",level:2},{value:"Minimum Infrastructure",id:"minimum-infrastructure-1",level:3},{value:"Component Resource Requests and Limits",id:"component-resource-requests-and-limits-1",level:3},{value:"Storage Sizing",id:"storage-sizing-1",level:3},{value:"Network Bandwidth",id:"network-bandwidth-1",level:3},{value:"Autoscaling Configuration",id:"autoscaling-configuration",level:3},{value:"Cost Estimates (AWS Example)",id:"cost-estimates-aws-example",level:3},{value:"Large Tier Configuration",id:"large-tier-configuration",level:2},{value:"Minimum Infrastructure",id:"minimum-infrastructure-2",level:3},{value:"Component Resource Requests and Limits",id:"component-resource-requests-and-limits-2",level:3},{value:"Storage Sizing",id:"storage-sizing-2",level:3},{value:"Network Bandwidth",id:"network-bandwidth-2",level:3},{value:"Advanced Autoscaling",id:"advanced-autoscaling",level:3},{value:"Cost Estimates (AWS Example)",id:"cost-estimates-aws-example-1",level:3},{value:"Monitoring Metrics by Tier",id:"monitoring-metrics-by-tier",level:2},{value:"Key Metrics to Watch",id:"key-metrics-to-watch",level:3},{value:"Metrics Queries (Prometheus)",id:"metrics-queries-prometheus",level:3},{value:"When to Scale Up",id:"when-to-scale-up",level:2},{value:"Scale Up Triggers",id:"scale-up-triggers",level:3},{value:"Scaling Process",id:"scaling-process",level:3},{value:"Pre-Sized Values Files",id:"pre-sized-values-files",level:2},{value:"Right-Sizing Checklist",id:"right-sizing-checklist",level:2}];function d(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"sizing-guide-for-aeterna-deployments",children:"Sizing Guide for Aeterna Deployments"})}),"\n",(0,r.jsx)(n.p,{children:"This guide helps you select appropriate resources and infrastructure for Aeterna deployments based on memory volume, user concurrency, and AI agent complexity."}),"\n",(0,r.jsx)(n.h2,{id:"sizing-tiers-overview",children:"Sizing Tiers Overview"}),"\n",(0,r.jsx)(n.p,{children:"Aeterna defines three sizing tiers based on total memory objects stored:"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Tier"}),(0,r.jsx)(n.th,{children:"Memory Count"}),(0,r.jsx)(n.th,{children:"Use Case"}),(0,r.jsx)(n.th,{children:"Deployment Target"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Small"})}),(0,r.jsx)(n.td,{children:"< 1,000"}),(0,r.jsx)(n.td,{children:"Dev, testing, small teams"}),(0,r.jsx)(n.td,{children:"1-2 nodes, minimal resources"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Medium"})}),(0,r.jsx)(n.td,{children:"1,000 - 100,000"}),(0,r.jsx)(n.td,{children:"Production SMB, mid-size teams"}),(0,r.jsx)(n.td,{children:"3-5 nodes, balanced resources"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Large"})}),(0,r.jsx)(n.td,{children:"> 100,000"}),(0,r.jsx)(n.td,{children:"Enterprise, multi-tenant, complex agents"}),(0,r.jsx)(n.td,{children:"5+ nodes, optimized resources"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["Each tier includes pre-configured ",(0,r.jsx)(n.code,{children:"values-small.yaml"}),", ",(0,r.jsx)(n.code,{children:"values-medium.yaml"}),", and ",(0,r.jsx)(n.code,{children:"values-large.yaml"})," sizing files."]}),"\n",(0,r.jsx)(n.h2,{id:"small-tier-configuration",children:"Small Tier Configuration"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Target"}),": Development, testing, proof-of-concept, <1K memories."]}),"\n",(0,r.jsx)(n.h3,{id:"minimum-infrastructure",children:"Minimum Infrastructure"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Kubernetes Cluster"}),": 1-2 nodes (single-node acceptable for dev)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Node Specs"}),": 2 CPU cores, 8GB RAM per node"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Total Cluster"}),": 2-4 CPU cores, 16GB RAM"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"component-resource-requests-and-limits",children:"Component Resource Requests and Limits"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# values-small.yaml\naeterna:\n  replicaCount: 1  # Single replica acceptable\n  resources:\n    requests:\n      cpu: 200m\n      memory: 512Mi\n    limits:\n      cpu: 1000m\n      memory: 1Gi\n\npostgresql:\n  cloudnativepg:\n    instances: 1  # Single instance with WAL backup only\n    resources:\n      requests:\n        cpu: 250m\n        memory: 512Mi\n      limits:\n        cpu: 1000m\n        memory: 2Gi\n    storage:\n      size: 10Gi\n\nqdrant:\n  replicaCount: 1\n  resources:\n    requests:\n      cpu: 250m\n      memory: 512Mi\n    limits:\n      cpu: 1000m\n      memory: 1Gi\n  persistence:\n    size: 20Gi\n\ndragonfly:\n  resources:\n    requests:\n      cpu: 100m\n      memory: 256Mi\n    limits:\n      cpu: 500m\n      memory: 512Mi\n\nopal:\n  opalServer:\n    replicaCount: 1\n    resources:\n      requests:\n        cpu: 100m\n        memory: 256Mi\n      limits:\n        cpu: 500m\n        memory: 512Mi\n"})}),"\n",(0,r.jsx)(n.h3,{id:"storage-sizing",children:"Storage Sizing"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"PostgreSQL"}),": 1KB per memory object minimum \u2192 10GB for 1K memories + WAL overhead"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Qdrant"}),": 2KB per vector minimum \u2192 20GB for 1K memories"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Dragonfly Cache"}),": 256MB to 1GB"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Total"}),": ~30-50GB persistent storage"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"network-bandwidth",children:"Network Bandwidth"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Baseline"}),": 1-10 Mbps for small deployments"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Peak bursts"}),": Agent inference requests (varies by embedding model)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"use-cases",children:"Use Cases"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Laptop/local machine testing"}),"\n",(0,r.jsx)(n.li,{children:"Single-engineer development"}),"\n",(0,r.jsx)(n.li,{children:"Feature demos"}),"\n",(0,r.jsx)(n.li,{children:"Integration testing"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"medium-tier-configuration",children:"Medium Tier Configuration"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Target"}),": Production SMB environments, 1K-100K memories, 10-50 concurrent users."]}),"\n",(0,r.jsx)(n.h3,{id:"minimum-infrastructure-1",children:"Minimum Infrastructure"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Kubernetes Cluster"}),": 3-5 nodes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Availability Zones"}),": 2 AZs minimum (HA-capable)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Node Specs"}),": 4 CPU cores, 16GB RAM per node minimum"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Total Cluster"}),": 12-20 CPU cores, 48-80GB RAM"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"HA Ready"}),": Yes (multi-replica, cross-AZ distribution)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"component-resource-requests-and-limits-1",children:"Component Resource Requests and Limits"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# values-medium.yaml\naeterna:\n  replicaCount: 3  # HA minimum\n  resources:\n    requests:\n      cpu: 500m\n      memory: 1Gi\n    limits:\n      cpu: 2000m\n      memory: 2Gi\n\npostgresql:\n  cloudnativepg:\n    instances: 3  # Primary + 2 standbys\n    resources:\n      requests:\n        cpu: 500m\n        memory: 1Gi\n      limits:\n        cpu: 2000m\n        memory: 3Gi\n    storage:\n      size: 100Gi  # ~1KB per memory + 50% headroom\n\nqdrant:\n  replicaCount: 3\n  resources:\n    requests:\n      cpu: 500m\n      memory: 1Gi\n    limits:\n      cpu: 2000m\n      memory: 2Gi\n  persistence:\n    size: 200Gi  # ~2KB per vector\n\ndragonfly:\n  replicaCount: 2  # Primary + replica\n  resources:\n    requests:\n      cpu: 250m\n      memory: 512Mi\n    limits:\n      cpu: 1000m\n      memory: 2Gi\n\nopal:\n  opalServer:\n    replicaCount: 2\n    resources:\n      requests:\n        cpu: 250m\n        memory: 512Mi\n      limits:\n        cpu: 1000m\n        memory: 1Gi\n"})}),"\n",(0,r.jsx)(n.h3,{id:"storage-sizing-1",children:"Storage Sizing"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"PostgreSQL"}),": ~100KB per memory minimum \u2192 100GB for 100K memories"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Qdrant"}),": ~2KB per vector \u2192 200GB for 100M vectors"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Dragonfly Cache"}),": 2-5GB"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Backup Storage (S3/GCS)"}),": 1.5x PostgreSQL + Qdrant snapshot size = ~450GB"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Total"}),": 300-500GB persistent + 450GB offsite backup"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"network-bandwidth-1",children:"Network Bandwidth"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Baseline"}),": 10-50 Mbps sustained"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Peaks"}),": 100+ Mbps during bulk memory ingestion or batch inference"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cross-AZ Traffic"}),": ~20% of total bandwidth (multi-AZ penalty)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"autoscaling-configuration",children:"Autoscaling Configuration"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"autoscaling:\n  enabled: true\n  minReplicas: 3\n  maxReplicas: 8\n  targetCPUUtilizationPercentage: 70\n  targetMemoryUtilizationPercentage: 80\n"})}),"\n",(0,r.jsx)(n.h3,{id:"cost-estimates-aws-example",children:"Cost Estimates (AWS Example)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"EC2 Nodes"}),": ~$400-600/month (3 m5.xlarge instances)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"EBS Volumes"}),": ~$50/month (500GB provisioned)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Data Transfer"}),": ~$20-50/month"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"RDS/Managed DB"})," (optional): +$100-200/month"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Total"}),": ~$600-1000/month"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"large-tier-configuration",children:"Large Tier Configuration"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Target"}),": Enterprise deployments, >100K memories, 100+ concurrent users, multi-tenant."]}),"\n",(0,r.jsx)(n.h3,{id:"minimum-infrastructure-2",children:"Minimum Infrastructure"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Kubernetes Cluster"}),": 5+ nodes (typically 7-10 for production)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Availability Zones"}),": 3 AZs minimum"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Node Specs"}),": 8+ CPU cores, 32GB RAM per node"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Total Cluster"}),": 40+ CPU cores, 160GB+ RAM"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Dedicated Node Pools"}),": Optional (database, cache, compute-intensive)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"component-resource-requests-and-limits-2",children:"Component Resource Requests and Limits"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# values-large.yaml\naeterna:\n  replicaCount: 5  # Higher for throughput + fault tolerance\n  resources:\n    requests:\n      cpu: 1000m\n      memory: 2Gi\n    limits:\n      cpu: 4000m\n      memory: 4Gi\n  # Use dedicated node pool: nodeSelector: { workload: compute }\n\npostgresql:\n  cloudnativepg:\n    instances: 5  # 1 primary + 4 standbys for read scaling\n    resources:\n      requests:\n        cpu: 1000m\n        memory: 4Gi\n      limits:\n        cpu: 4000m\n        memory: 8Gi\n    storage:\n      size: 500Gi  # 500GB for 500K memories + headroom\n    # Use high-performance storage: io2/gp3 with iops: 5000\n\nqdrant:\n  replicaCount: 5\n  resources:\n    requests:\n      cpu: 2000m\n      memory: 4Gi\n    limits:\n      cpu: 4000m\n      memory: 8Gi\n  persistence:\n    size: 1000Gi  # 1TB for large vector collections\n    # Use fast storage: gp3 or NVMe local volumes\n\ndragonfly:\n  replicaCount: 3  # 1 primary + 2 replicas for write distribution\n  resources:\n    requests:\n      cpu: 500m\n      memory: 2Gi\n    limits:\n      cpu: 2000m\n      memory: 4Gi\n\nopal:\n  opalServer:\n    replicaCount: 3\n    resources:\n      requests:\n        cpu: 500m\n        memory: 512Mi\n      limits:\n        cpu: 1000m\n        memory: 1Gi\n"})}),"\n",(0,r.jsx)(n.h3,{id:"storage-sizing-2",children:"Storage Sizing"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"PostgreSQL"}),": ~1KB per memory minimum \u2192 500GB for 500K memories"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Qdrant"}),": ~2KB per vector \u2192 1TB for large vector space"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Dragonfly Cache"}),": 5-10GB (high cardinality lookups)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Backup Storage"}),": 2x main data (tiered: S3 Standard \u2192 Glacier)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Total Persistent"}),": 1.5-2TB, ",(0,r.jsx)(n.strong,{children:"Offsite Backup"}),": 2TB+"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"network-bandwidth-2",children:"Network Bandwidth"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Baseline"}),": 100-500 Mbps sustained"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Peaks"}),": 1+ Gbps during bulk operations"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cross-AZ Replication"}),": 200+ Mbps for data sync"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Recommendation"}),": Direct peering or private links between AZs"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"advanced-autoscaling",children:"Advanced Autoscaling"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'autoscaling:\n  enabled: true\n  minReplicas: 5\n  maxReplicas: 20\n  \n  # Metrics-driven scaling\n  metrics:\n    - type: Resource\n      resource:\n        name: cpu\n        target:\n          type: Utilization\n          averageUtilization: 65\n    \n    - type: Resource\n      resource:\n        name: memory\n        target:\n          type: Utilization\n          averageUtilization: 75\n    \n    # Custom metrics: queries per second, embedding latency\n    - type: Pods\n      pods:\n        metric:\n          name: queries_per_second\n        target:\n          type: AverageValue\n          averageValue: "1000"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"cost-estimates-aws-example-1",children:"Cost Estimates (AWS Example)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"EC2 Nodes"}),": ~$2,000-3,000/month (7 m5.2xlarge instances)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"EBS Volumes"}),": ~$200/month (2TB provisioned, io2)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"S3 Backup"}),": ~$50/month (2TB)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Data Transfer"}),": ~$200-400/month (inter-AZ)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"RDS/Managed DB"})," (optional): +$500-1000/month"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Total"}),": ~$3,000-5,000/month"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"monitoring-metrics-by-tier",children:"Monitoring Metrics by Tier"}),"\n",(0,r.jsx)(n.h3,{id:"key-metrics-to-watch",children:"Key Metrics to Watch"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Metric"}),(0,r.jsx)(n.th,{children:"Small Alert"}),(0,r.jsx)(n.th,{children:"Medium Alert"}),(0,r.jsx)(n.th,{children:"Large Alert"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"CPU Utilization"})}),(0,r.jsx)(n.td,{children:"> 80%"}),(0,r.jsx)(n.td,{children:"> 70%"}),(0,r.jsx)(n.td,{children:"> 65%"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Memory Utilization"})}),(0,r.jsx)(n.td,{children:"> 85%"}),(0,r.jsx)(n.td,{children:"> 80%"}),(0,r.jsx)(n.td,{children:"> 75%"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Disk I/O (IOPS)"})}),(0,r.jsx)(n.td,{children:"> 500"}),(0,r.jsx)(n.td,{children:"> 2000"}),(0,r.jsx)(n.td,{children:"> 5000"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Storage Used"})}),(0,r.jsx)(n.td,{children:"> 80% capacity"}),(0,r.jsx)(n.td,{children:"> 75% capacity"}),(0,r.jsx)(n.td,{children:"> 70% capacity"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Query Latency (p99)"})}),(0,r.jsx)(n.td,{children:"> 500ms"}),(0,r.jsx)(n.td,{children:"> 200ms"}),(0,r.jsx)(n.td,{children:"> 100ms"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Replication Lag"})}),(0,r.jsx)(n.td,{children:"> 100ms"}),(0,r.jsx)(n.td,{children:"> 50ms"}),(0,r.jsx)(n.td,{children:"> 10ms"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"metrics-queries-prometheus",children:"Metrics Queries (Prometheus)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-promql",children:'# CPU utilization by component\nsum(rate(container_cpu_usage_seconds_total[5m])) by (pod_label_app) / on() group_left sum(kube_pod_container_resource_limits{resource="cpu"})\n\n# Memory pressure\nkube_pod_container_memory_usage_bytes / kube_pod_container_resource_limits{resource="memory"} * 100\n\n# Disk IOPS (CloudWatch/custom exporter)\nrate(container_fs_io_time_seconds_total[1m])\n\n# PostgreSQL replication lag\nmax(cnpg_replication_lag_bytes) by (cluster)\n\n# Qdrant query latency\nhistogram_quantile(0.99, rate(qdrant_query_duration_seconds_bucket[5m]))\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"when-to-scale-up",children:"When to Scale Up"}),"\n",(0,r.jsx)(n.h3,{id:"scale-up-triggers",children:"Scale Up Triggers"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Small \u2192 Medium"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"1,000 memory objects"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"CPU consistently > 75%"}),"\n",(0,r.jsx)(n.li,{children:"Memory > 80% utilization"}),"\n",(0,r.jsx)(n.li,{children:"Need for HA/multi-replica"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Medium \u2192 Large"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"100,000 memory objects"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"100+ concurrent users"}),"\n",(0,r.jsx)(n.li,{children:"Query latency p99 > 200ms"}),"\n",(0,r.jsx)(n.li,{children:"Storage > 70% full"}),"\n",(0,r.jsx)(n.li,{children:"Node CPU/memory capacity exhausted"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"scaling-process",children:"Scaling Process"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# 1. Update values file\nhelm get values aeterna -n aeterna > values-old.yaml\ncp values-large.yaml values.yaml\n\n# 2. Dry-run to preview changes\nhelm upgrade aeterna ./charts/aeterna -n aeterna -f values.yaml --dry-run\n\n# 3. Add nodes to cluster (if needed)\nkubectl scale node-pool production --num-nodes 8\n\n# 4. Perform upgrade\nhelm upgrade aeterna ./charts/aeterna -n aeterna -f values.yaml --wait\n\n# 5. Verify all components running\nkubectl get pods -n aeterna\nkubectl top nodes\nkubectl top pods -n aeterna\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"pre-sized-values-files",children:"Pre-Sized Values Files"}),"\n",(0,r.jsx)(n.p,{children:"All three sizing tiers are provided with optimized defaults:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Deploy small\nhelm install aeterna ./charts/aeterna \\\n  -n aeterna --create-namespace \\\n  -f charts/aeterna/values-small.yaml\n\n# Deploy medium\nhelm install aeterna ./charts/aeterna \\\n  -n aeterna --create-namespace \\\n  -f charts/aeterna/values-medium.yaml\n\n# Deploy large (with optional overrides)\nhelm install aeterna ./charts/aeterna \\\n  -n aeterna --create-namespace \\\n  -f charts/aeterna/values-large.yaml \\\n  --set postgresql.cloudnativepg.instances=6\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"right-sizing-checklist",children:"Right-Sizing Checklist"}),"\n",(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," Estimated memory count falls within tier bounds"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," Node count matches or exceeds minimum recommendation"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," Total cluster CPU >= tier requirement (considering system daemons)"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," Storage size >= 1.5x estimated data volume"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," Network bandwidth provisioned for baseline + 50% headroom"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," HA requirements understood (multi-AZ, replica counts)"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," Backup storage allocated offsite"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," Autoscaling limits set (minReplicas, maxReplicas)"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," Monitoring configured with tier-appropriate thresholds"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," Load testing validates sizing assumptions"]}),"\n"]})]})}function m(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453(e,n,s){s.d(n,{R:()=>l,x:()=>a});var i=s(6540);const r={},t=i.createContext(r);function l(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);