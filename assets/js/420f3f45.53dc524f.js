"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[4109],{9909(e,n,i){i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"guides/cost-optimization","title":"Cost Optimization Guide","description":"Overview","source":"@site/docs/guides/cost-optimization.md","sourceDirName":"guides","slug":"/guides/cost-optimization","permalink":"/aeterna/docs/guides/cost-optimization","draft":false,"unlisted":false,"editUrl":"https://github.com/kikokikok/aeterna/tree/main/website/docs/guides/cost-optimization.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"Managed Observability Platform Integration","permalink":"/aeterna/docs/guides/managed-observability"},"next":{"title":"Strangler Fig Migration with Aeterna","permalink":"/aeterna/docs/examples/strangler-fig-migration"}}');var s=i(4848),r=i(8453);const o={},a="Cost Optimization Guide",l={},d=[{value:"Overview",id:"overview",level:2},{value:"Semantic Caching Tuning",id:"semantic-caching-tuning",level:2},{value:"1. Configure the Similarity Threshold",id:"1-configure-the-similarity-threshold",level:3},{value:"2. Time-To-Live (TTL) Settings",id:"2-time-to-live-ttl-settings",level:3},{value:"Tiered Storage Configuration",id:"tiered-storage-configuration",level:2},{value:"Tier Thresholds",id:"tier-thresholds",level:3},{value:"Budget Management",id:"budget-management",level:2},{value:"1. Set Tenant Limits",id:"1-set-tenant-limits",level:3},{value:"2. Alert Configuration",id:"2-alert-configuration",level:3},{value:"Optimization Best Practices",id:"optimization-best-practices",level:2},{value:"Expected Cost Reductions",id:"expected-cost-reductions",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"cost-optimization-guide",children:"Cost Optimization Guide"})}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"Aeterna provides mechanisms to reduce operational costs by optimizing embedding generation and storage usage. This guide describes semantic caching, tiered storage, and budget management."}),"\n",(0,s.jsx)(n.h2,{id:"semantic-caching-tuning",children:"Semantic Caching Tuning"}),"\n",(0,s.jsx)(n.p,{children:"Semantic caching prevents duplicate embedding generation for identical or highly similar inputs. This can result in 60-80% cost savings for embedding-heavy workloads."}),"\n",(0,s.jsx)(n.h3,{id:"1-configure-the-similarity-threshold",children:"1. Configure the Similarity Threshold"}),"\n",(0,s.jsx)(n.p,{children:'The threshold determines how similar a new request must be to a cached entry to count as a "hit".'}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"0.99+"}),": Very strict, highest quality, lower hit rate."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"0.98"}),": Default, optimal balance of cost and performance."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"0.95"}),": Aggressive, higher hit rate, potential for slight context drift."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Example Configuration Snippet"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[memory.cache]\nprovider = "redis"\nsimilarity_threshold = 0.98\nttl_seconds = 86400  # 24 hours\nmax_entries = 1000000\n'})}),"\n",(0,s.jsx)(n.h3,{id:"2-time-to-live-ttl-settings",children:"2. Time-To-Live (TTL) Settings"}),"\n",(0,s.jsx)(n.p,{children:"Tune TTL based on your workload's temporal locality. For rapidly changing contexts, use shorter TTLs (e.g., 4-8 hours). For stable organizational knowledge, use longer TTLs (e.g., 7-30 days)."}),"\n",(0,s.jsx)(n.h2,{id:"tiered-storage-configuration",children:"Tiered Storage Configuration"}),"\n",(0,s.jsx)(n.p,{children:"Aeterna manages data across three tiers to balance performance and cost."}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Hot Tier (Redis)"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Data"}),": Most recent memories (< 7 days)."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Purpose"}),": Low-latency search and frequent access."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Cost"}),": High (RAM-based)."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Warm Tier (PostgreSQL + pgvector)"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Data"}),": Memories from 7 to 90 days."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Purpose"}),": Reliable long-term storage and occasional retrieval."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Cost"}),": Moderate (SSD-based)."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cold Tier (S3 + Parquet)"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Data"}),": Archived memories (> 90 days)."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Purpose"}),": Disaster recovery and historical analysis."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Cost"}),": Low (Object storage)."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"tier-thresholds",children:"Tier Thresholds"}),"\n",(0,s.jsx)(n.p,{children:"Configure the migration thresholds in your deployment values or service configuration:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'storage:\n  tiering:\n    enabled: true\n    hot_to_warm_days: 7\n    warm_to_cold_days: 90\n    auto_migration_job_schedule: "0 2 * * *"  # Daily at 2 AM\n'})}),"\n",(0,s.jsx)(n.h2,{id:"budget-management",children:"Budget Management"}),"\n",(0,s.jsx)(n.p,{children:"Aeterna allows per-tenant budget limits for embedding and storage costs."}),"\n",(0,s.jsx)(n.h3,{id:"1-set-tenant-limits",children:"1. Set Tenant Limits"}),"\n",(0,s.jsx)(n.p,{children:"Define quotas for each tenant to prevent runaway costs from a single customer."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Example Policy"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "tenant_id": "acme-corp",\n  "quotas": {\n    "monthly_embedding_usd": 500,\n    "storage_gb": 50,\n    "max_qps": 100\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"2-alert-configuration",children:"2. Alert Configuration"}),"\n",(0,s.jsxs)(n.p,{children:["Configure alerts in the ",(0,s.jsx)(n.strong,{children:"Cost Analysis"})," dashboard to notify operators when a tenant reaches 80% and 100% of their budget."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"80% Alert"}),": Send warning to Slack channel."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"100% Alert"}),": Send critical notification to PagerDuty and trigger automatic rate-limiting for the tenant."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"optimization-best-practices",children:"Optimization Best Practices"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Batch Embeddings"}),": Always use the batch embedding tool for multiple memories to reduce API overhead."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"De-duplication"}),": Enable the ",(0,s.jsx)(n.code,{children:"memory_optimize"})," tool to run autonomous background de-duplication jobs."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Compression"}),": Use the ",(0,s.jsx)(n.strong,{children:"Context Architect"})," agent to compress long memory trajectories before storing them in the warm or cold tiers."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Review Costs Regularly"}),": Use the ",(0,s.jsx)(n.strong,{children:"Cost Analysis"})," dashboard to identify high-cost tenants and optimize their cache hit rates."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"expected-cost-reductions",children:"Expected Cost Reductions"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Optimization"}),(0,s.jsx)(n.th,{children:"Target Savings"}),(0,s.jsx)(n.th,{children:"Metrics to Watch"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Semantic Caching"}),(0,s.jsx)(n.td,{children:"60-80%"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"aeterna_cache_hit_ratio"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Tiered Storage"}),(0,s.jsx)(n.td,{children:"40%"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"aeterna_storage_cost_per_gb"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Query Optimization"}),(0,s.jsx)(n.td,{children:"15-25%"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"aeterna_query_execution_time"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"CCA Compression"}),(0,s.jsx)(n.td,{children:"20-30%"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"aeterna_memory_compressed_size"})})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453(e,n,i){i.d(n,{R:()=>o,x:()=>a});var t=i(6540);const s={},r=t.createContext(s);function o(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);