"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[9934],{7965(e,n,r){r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"specs/tool-interface","title":"Tool Interface Specification","description":"This document specifies the standard tool contracts for memory and knowledge operations, designed to be ecosystem-agnostic and compatible with any AI agent framework.","source":"@site/docs/specs/06-tool-interface.md","sourceDirName":"specs","slug":"/specs/tool-interface","permalink":"/aeterna/docs/specs/tool-interface","draft":false,"unlisted":false,"editUrl":"https://github.com/kikokikok/aeterna/tree/main/website/docs/specs/06-tool-interface.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"title":"Tool Interface Specification","status":"draft","version":"0.1.0","created":"2025-01-07T00:00:00.000Z","authors":["AI Systems Architecture Team"],"related":["02-memory-system.md","03-knowledge-repository.md","05-adapter-architecture.md"]},"sidebar":"docs","previous":{"title":"Team Conventions Policies","permalink":"/aeterna/docs/examples/policies/team-conventions"},"next":{"title":"Configuration Specification","permalink":"/aeterna/docs/specs/configuration"}}');var t=r(4848),i=r(8453);const a={title:"Tool Interface Specification",status:"draft",version:"0.1.0",created:new Date("2025-01-07T00:00:00.000Z"),authors:["AI Systems Architecture Team"],related:["02-memory-system.md","03-knowledge-repository.md","05-adapter-architecture.md"]},o="Tool Interface Specification",c={},l=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"Overview",id:"overview",level:2},{value:"Tool Categories",id:"tool-categories",level:3},{value:"Tool Design Principles",id:"tool-design-principles",level:2},{value:"1. Semantic Clarity",id:"1-semantic-clarity",level:3},{value:"2. Minimal Required Parameters",id:"2-minimal-required-parameters",level:3},{value:"3. Rich Optional Parameters",id:"3-rich-optional-parameters",level:3},{value:"4. Structured Responses",id:"4-structured-responses",level:3},{value:"5. Graceful Degradation",id:"5-graceful-degradation",level:3},{value:"Memory Tools",id:"memory-tools",level:2},{value:"memory_add",id:"memory_add",level:3},{value:"Description",id:"description",level:4},{value:"Input Schema",id:"input-schema",level:4},{value:"Output Schema",id:"output-schema",level:4},{value:"Example",id:"example",level:4},{value:"memory_search",id:"memory_search",level:3},{value:"Description",id:"description-1",level:4},{value:"Input Schema",id:"input-schema-1",level:4},{value:"Output Schema",id:"output-schema-1",level:4},{value:"Example",id:"example-1",level:4},{value:"memory_delete",id:"memory_delete",level:3},{value:"Description",id:"description-2",level:4},{value:"Input Schema",id:"input-schema-2",level:4},{value:"Output Schema",id:"output-schema-2",level:4},{value:"Knowledge Tools",id:"knowledge-tools",level:2},{value:"knowledge_query",id:"knowledge_query",level:3},{value:"Description",id:"description-3",level:4},{value:"Input Schema",id:"input-schema-3",level:4},{value:"Output Schema",id:"output-schema-3",level:4},{value:"Example",id:"example-2",level:4},{value:"knowledge_check",id:"knowledge_check",level:3},{value:"Description",id:"description-4",level:4},{value:"Input Schema",id:"input-schema-4",level:4},{value:"Output Schema",id:"output-schema-4",level:4},{value:"Example",id:"example-3",level:4},{value:"knowledge_show",id:"knowledge_show",level:3},{value:"Description",id:"description-5",level:4},{value:"Input Schema",id:"input-schema-5",level:4},{value:"Output Schema",id:"output-schema-5",level:4},{value:"Sync Tools",id:"sync-tools",level:2},{value:"sync_now",id:"sync_now",level:3},{value:"Description",id:"description-6",level:4},{value:"Input Schema",id:"input-schema-6",level:4},{value:"Output Schema",id:"output-schema-6",level:4},{value:"sync_status",id:"sync_status",level:3},{value:"Description",id:"description-7",level:4},{value:"Input Schema",id:"input-schema-7",level:4},{value:"Output Schema",id:"output-schema-7",level:4},{value:"Tool Schemas (JSON Schema)",id:"tool-schemas-json-schema",level:2},{value:"memory_add Schema",id:"memory_add-schema",level:3},{value:"memory_search Schema",id:"memory_search-schema",level:3},{value:"knowledge_query Schema",id:"knowledge_query-schema",level:3},{value:"knowledge_check Schema",id:"knowledge_check-schema",level:3},{value:"Error Responses",id:"error-responses",level:2},{value:"Standard Error Format",id:"standard-error-format",level:3},{value:"Common Error Codes",id:"common-error-codes",level:3},{value:"Error Example",id:"error-example",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"tool-interface-specification",children:"Tool Interface Specification"})}),"\n",(0,t.jsx)(n.p,{children:"This document specifies the standard tool contracts for memory and knowledge operations, designed to be ecosystem-agnostic and compatible with any AI agent framework."}),"\n",(0,t.jsx)(n.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#overview",children:"Overview"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#tool-design-principles",children:"Tool Design Principles"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#memory-tools",children:"Memory Tools"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#knowledge-tools",children:"Knowledge Tools"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#sync-tools",children:"Sync Tools"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#tool-schemas-json-schema",children:"Tool Schemas (JSON Schema)"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#error-responses",children:"Error Responses"})}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(n.p,{children:"Tools are the primary interface for AI agents to interact with the Memory-Knowledge system:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                         AI AGENT                                 \u2502\n\u2502                                                                  \u2502\n\u2502  "I need to remember this for later"                            \u2502\n\u2502  "What policies apply to database selection?"                   \u2502\n\u2502  "Check if adding MySQL violates any constraints"               \u2502\n\u2502                                                                  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                             \u2502\n                             \u2502 Tool Invocation\n                             \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                       TOOL LAYER                                 \u2502\n\u2502                                                                  \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n\u2502  \u2502  memory_add     \u2502 \u2502 knowledge_query \u2502 \u2502    sync_now     \u2502    \u2502\n\u2502  \u2502  memory_search  \u2502 \u2502 knowledge_check \u2502 \u2502  sync_status    \u2502    \u2502\n\u2502  \u2502  memory_delete  \u2502 \u2502 knowledge_show  \u2502 \u2502                 \u2502    \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\n\u2502                                                                  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                             \u2502\n                             \u2502 Unified API\n                             \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                  MEMORY-KNOWLEDGE CORE                           \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n'})}),"\n",(0,t.jsx)(n.h3,{id:"tool-categories",children:"Tool Categories"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Category"}),(0,t.jsx)(n.th,{children:"Tools"}),(0,t.jsx)(n.th,{children:"Purpose"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Memory"})}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"memory_add"}),", ",(0,t.jsx)(n.code,{children:"memory_search"}),", ",(0,t.jsx)(n.code,{children:"memory_delete"})]}),(0,t.jsx)(n.td,{children:"Store and retrieve semantic memories"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Knowledge"})}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"knowledge_query"}),", ",(0,t.jsx)(n.code,{children:"knowledge_check"}),", ",(0,t.jsx)(n.code,{children:"knowledge_show"})]}),(0,t.jsx)(n.td,{children:"Query organizational knowledge and enforce constraints"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Sync"})}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"sync_now"}),", ",(0,t.jsx)(n.code,{children:"sync_status"})]}),(0,t.jsx)(n.td,{children:"Manual sync control and monitoring"})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"tool-design-principles",children:"Tool Design Principles"}),"\n",(0,t.jsx)(n.h3,{id:"1-semantic-clarity",children:"1. Semantic Clarity"}),"\n",(0,t.jsx)(n.p,{children:"Tool names and descriptions must be self-explanatory:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'\u2713 memory_add      - "Store information for future reference"\n\u2713 knowledge_check - "Verify actions comply with organizational policies"\n\n\u2717 mem_w           - Unclear abbreviation\n\u2717 validate        - Too generic\n'})}),"\n",(0,t.jsx)(n.h3,{id:"2-minimal-required-parameters",children:"2. Minimal Required Parameters"}),"\n",(0,t.jsx)(n.p,{children:"Only require what's necessary. Use sensible defaults:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'// Good: layer defaults to \'user\'\nmemory_add({ content: "User prefers TypeScript" })\n\n// Bad: requiring layer for every call\nmemory_add({ content: "...", layer: "user", identifiers: {...} })\n'})}),"\n",(0,t.jsx)(n.h3,{id:"3-rich-optional-parameters",children:"3. Rich Optional Parameters"}),"\n",(0,t.jsx)(n.p,{children:"Allow power users to customize behavior:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'// Basic usage\nmemory_search({ query: "database preferences" })\n\n// Advanced usage\nmemory_search({\n  query: "database preferences",\n  layers: ["project", "org"],\n  limit: 20,\n  threshold: 0.8,\n  filter: { tags: ["infrastructure"] }\n})\n'})}),"\n",(0,t.jsx)(n.h3,{id:"4-structured-responses",children:"4. Structured Responses"}),"\n",(0,t.jsx)(n.p,{children:"Return structured data, not just strings:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'// Good: structured response\n{\n  success: true,\n  results: [...],\n  metadata: { searchedLayers: [...], totalCount: 15 }\n}\n\n// Bad: unstructured string\n"Found 3 results: 1. PostgreSQL is preferred..."\n'})}),"\n",(0,t.jsx)(n.h3,{id:"5-graceful-degradation",children:"5. Graceful Degradation"}),"\n",(0,t.jsx)(n.p,{children:"Tools should handle missing context gracefully:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'// If identifiers not provided, use context from ecosystem adapter\nmemory_search({ query: "..." }) // Uses session context automatically\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"memory-tools",children:"Memory Tools"}),"\n",(0,t.jsx)(n.h3,{id:"memory_add",children:"memory_add"}),"\n",(0,t.jsx)(n.p,{children:"Store information in long-term memory for future retrieval."}),"\n",(0,t.jsx)(n.h4,{id:"description",children:"Description"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Store a piece of information in memory for future reference. \nUse this to remember user preferences, project context, decisions made, \nor any information that should persist across sessions.\n"})}),"\n",(0,t.jsx)(n.h4,{id:"input-schema",children:"Input Schema"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface MemoryAddInput {\n  /**\n   * The content to remember.\n   * Should be a clear, self-contained statement.\n   * @required\n   */\n  content: string;\n  \n  /**\n   * Memory scope/layer.\n   * - agent: This agent instance only\n   * - user: This user across all sessions\n   * - session: This conversation only\n   * - project: This project/repository\n   * - team: This team\n   * - org: This organization\n   * - company: Company-wide\n   * @default \"user\"\n   */\n  layer?: 'agent' | 'user' | 'session' | 'project' | 'team' | 'org' | 'company';\n  \n  /**\n   * Tags for categorization and filtering.\n   */\n  tags?: string[];\n  \n  /**\n   * Additional metadata.\n   */\n  metadata?: Record<string, unknown>;\n}\n"})}),"\n",(0,t.jsx)(n.h4,{id:"output-schema",children:"Output Schema"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface MemoryAddOutput {\n  /** Whether the operation succeeded */\n  success: boolean;\n  \n  /** ID of the created memory */\n  memoryId: string;\n  \n  /** Confirmation message */\n  message: string;\n}\n"})}),"\n",(0,t.jsx)(n.h4,{id:"example",children:"Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'// Input\n{\n  "content": "User prefers functional programming patterns over OOP",\n  "layer": "user",\n  "tags": ["preferences", "coding-style"]\n}\n\n// Output\n{\n  "success": true,\n  "memoryId": "mem_abc123",\n  "message": "Memory stored successfully"\n}\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"memory_search",children:"memory_search"}),"\n",(0,t.jsx)(n.p,{children:"Search memories for relevant information."}),"\n",(0,t.jsx)(n.h4,{id:"description-1",children:"Description"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Search your memory for relevant past information. Use this to recall \nuser preferences, project context, previous decisions, or any stored knowledge.\nResults are ranked by relevance and filtered by layer precedence.\n"})}),"\n",(0,t.jsx)(n.h4,{id:"input-schema-1",children:"Input Schema"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface MemorySearchInput {\n  /**\n   * Search query in natural language.\n   * @required\n   */\n  query: string;\n  \n  /**\n   * Layers to search. If not specified, searches all accessible layers.\n   */\n  layers?: MemoryLayer[];\n  \n  /**\n   * Maximum number of results.\n   * @default 10\n   */\n  limit?: number;\n  \n  /**\n   * Minimum similarity threshold (0.0 - 1.0).\n   * @default 0.7\n   */\n  threshold?: number;\n  \n  /**\n   * Filter by tags.\n   */\n  tags?: string[];\n}\n"})}),"\n",(0,t.jsx)(n.h4,{id:"output-schema-1",children:"Output Schema"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface MemorySearchOutput {\n  /** Whether the operation succeeded */\n  success: boolean;\n  \n  /** Search results */\n  results: Array<{\n    /** Memory content */\n    content: string;\n    \n    /** Layer this memory came from */\n    layer: MemoryLayer;\n    \n    /** Relevance score (0.0 - 1.0) */\n    score: number;\n    \n    /** Memory ID */\n    memoryId: string;\n    \n    /** Tags */\n    tags?: string[];\n  }>;\n  \n  /** Total results found (before limit) */\n  totalCount: number;\n  \n  /** Layers that were searched */\n  searchedLayers: MemoryLayer[];\n}\n"})}),"\n",(0,t.jsx)(n.h4,{id:"example-1",children:"Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'// Input\n{\n  "query": "What are the user\'s coding preferences?",\n  "layers": ["user", "project"],\n  "limit": 5\n}\n\n// Output\n{\n  "success": true,\n  "results": [\n    {\n      "content": "User prefers functional programming patterns over OOP",\n      "layer": "user",\n      "score": 0.92,\n      "memoryId": "mem_abc123",\n      "tags": ["preferences", "coding-style"]\n    },\n    {\n      "content": "Project uses TypeScript with strict mode enabled",\n      "layer": "project",\n      "score": 0.85,\n      "memoryId": "mem_def456",\n      "tags": ["typescript", "configuration"]\n    }\n  ],\n  "totalCount": 2,\n  "searchedLayers": ["user", "project"]\n}\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"memory_delete",children:"memory_delete"}),"\n",(0,t.jsx)(n.p,{children:"Remove a specific memory."}),"\n",(0,t.jsx)(n.h4,{id:"description-2",children:"Description"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Delete a memory that is no longer relevant or was stored incorrectly.\nUse this sparingly - memories usually remain valuable for context.\n"})}),"\n",(0,t.jsx)(n.h4,{id:"input-schema-2",children:"Input Schema"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface MemoryDeleteInput {\n  /**\n   * ID of the memory to delete.\n   * @required\n   */\n  memoryId: string;\n}\n"})}),"\n",(0,t.jsx)(n.h4,{id:"output-schema-2",children:"Output Schema"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface MemoryDeleteOutput {\n  /** Whether the operation succeeded */\n  success: boolean;\n  \n  /** Confirmation message */\n  message: string;\n}\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"knowledge-tools",children:"Knowledge Tools"}),"\n",(0,t.jsx)(n.h3,{id:"knowledge_query",children:"knowledge_query"}),"\n",(0,t.jsx)(n.p,{children:"Search organizational knowledge (ADRs, policies, patterns, specs)."}),"\n",(0,t.jsx)(n.h4,{id:"description-3",children:"Description"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Search organizational knowledge for relevant decisions, policies, patterns, \nor specifications. Use this to find guidance on architectural decisions, \ncoding standards, or established patterns before making changes.\n"})}),"\n",(0,t.jsx)(n.h4,{id:"input-schema-3",children:"Input Schema"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface KnowledgeQueryInput {\n  /**\n   * Search query in natural language.\n   */\n  query?: string;\n  \n  /**\n   * Filter by knowledge type.\n   */\n  type?: 'adr' | 'policy' | 'pattern' | 'spec';\n  \n  /**\n   * Filter by layer.\n   */\n  layer?: 'company' | 'org' | 'team' | 'project';\n  \n  /**\n   * Filter by tags.\n   */\n  tags?: string[];\n  \n  /**\n   * Filter by status.\n   * @default [\"accepted\"]\n   */\n  status?: Array<'draft' | 'proposed' | 'accepted' | 'deprecated' | 'superseded'>;\n  \n  /**\n   * Maximum results.\n   * @default 10\n   */\n  limit?: number;\n}\n"})}),"\n",(0,t.jsx)(n.h4,{id:"output-schema-3",children:"Output Schema"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface KnowledgeQueryOutput {\n  /** Whether the operation succeeded */\n  success: boolean;\n  \n  /** Matching knowledge items (summaries only) */\n  items: Array<{\n    /** Item ID */\n    id: string;\n    \n    /** Item type */\n    type: KnowledgeType;\n    \n    /** Layer */\n    layer: KnowledgeLayer;\n    \n    /** Title */\n    title: string;\n    \n    /** Summary */\n    summary: string;\n    \n    /** Status */\n    status: KnowledgeStatus;\n    \n    /** Tags */\n    tags: string[];\n    \n    /** Whether item has constraints */\n    hasConstraints: boolean;\n  }>;\n  \n  /** Total count */\n  totalCount: number;\n}\n"})}),"\n",(0,t.jsx)(n.h4,{id:"example-2",children:"Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'// Input\n{\n  "query": "database selection",\n  "type": "adr",\n  "status": ["accepted"]\n}\n\n// Output\n{\n  "success": true,\n  "items": [\n    {\n      "id": "adr-042-database-selection",\n      "type": "adr",\n      "layer": "org",\n      "title": "Database Selection for New Services",\n      "summary": "Use PostgreSQL for all new services requiring relational data",\n      "status": "accepted",\n      "tags": ["database", "infrastructure"],\n      "hasConstraints": true\n    }\n  ],\n  "totalCount": 1\n}\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"knowledge_check",children:"knowledge_check"}),"\n",(0,t.jsx)(n.p,{children:"Verify that an action complies with organizational policies."}),"\n",(0,t.jsx)(n.h4,{id:"description-4",children:"Description"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Check if planned changes comply with organizational constraints and policies.\nUse this before adding dependencies, creating files, or making architectural changes\nto ensure compliance with established standards.\n"})}),"\n",(0,t.jsx)(n.h4,{id:"input-schema-4",children:"Input Schema"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface KnowledgeCheckInput {\n  /**\n   * Files to check (path and content).\n   */\n  files?: Array<{\n    path: string;\n    content: string;\n  }>;\n  \n  /**\n   * Dependencies to check.\n   */\n  dependencies?: Array<{\n    name: string;\n    version?: string;\n  }>;\n  \n  /**\n   * Minimum severity to report.\n   * @default \"warn\"\n   */\n  minSeverity?: 'info' | 'warn' | 'block';\n  \n  /**\n   * Specific knowledge items to check against.\n   * If not specified, checks all applicable constraints.\n   */\n  knowledgeItemIds?: string[];\n}\n"})}),"\n",(0,t.jsx)(n.h4,{id:"output-schema-4",children:"Output Schema"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface KnowledgeCheckOutput {\n  /** Whether all blocking constraints pass */\n  passed: boolean;\n  \n  /** Violations found */\n  violations: Array<{\n    /** Knowledge item that defines this constraint */\n    knowledgeItemId: string;\n    \n    /** Knowledge item title */\n    knowledgeItemTitle: string;\n    \n    /** Constraint that was violated */\n    constraint: {\n      operator: string;\n      target: string;\n      pattern: string;\n    };\n    \n    /** Severity */\n    severity: 'info' | 'warn' | 'block';\n    \n    /** Human-readable message */\n    message: string;\n    \n    /** Where the violation occurred */\n    location?: {\n      file: string;\n      line?: number;\n    };\n  }>;\n  \n  /** Summary counts */\n  summary: {\n    info: number;\n    warn: number;\n    block: number;\n  };\n}\n"})}),"\n",(0,t.jsx)(n.h4,{id:"example-3",children:"Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'// Input\n{\n  "dependencies": [\n    { "name": "mysql2", "version": "3.0.0" }\n  ]\n}\n\n// Output\n{\n  "passed": false,\n  "violations": [\n    {\n      "knowledgeItemId": "adr-042-database-selection",\n      "knowledgeItemTitle": "Database Selection for New Services",\n      "constraint": {\n        "operator": "must_not_use",\n        "target": "dependency",\n        "pattern": "mysql|mysql2|mariadb"\n      },\n      "severity": "block",\n      "message": "MySQL not allowed for new services per ADR-042. Use PostgreSQL instead."\n    }\n  ],\n  "summary": {\n    "info": 0,\n    "warn": 0,\n    "block": 1\n  }\n}\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"knowledge_show",children:"knowledge_show"}),"\n",(0,t.jsx)(n.p,{children:"Get full details of a specific knowledge item."}),"\n",(0,t.jsx)(n.h4,{id:"description-5",children:"Description"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Retrieve the complete content of a knowledge item including full text,\nconstraints, and metadata. Use this when you need detailed information\nabout a specific decision, policy, or pattern.\n"})}),"\n",(0,t.jsx)(n.h4,{id:"input-schema-5",children:"Input Schema"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface KnowledgeShowInput {\n  /**\n   * Knowledge item ID.\n   * @required\n   */\n  id: string;\n  \n  /**\n   * Include constraint definitions.\n   * @default true\n   */\n  includeConstraints?: boolean;\n  \n  /**\n   * Include version history.\n   * @default false\n   */\n  includeHistory?: boolean;\n}\n"})}),"\n",(0,t.jsx)(n.h4,{id:"output-schema-5",children:"Output Schema"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface KnowledgeShowOutput {\n  /** Whether the operation succeeded */\n  success: boolean;\n  \n  /** The knowledge item (null if not found) */\n  item: {\n    id: string;\n    type: KnowledgeType;\n    layer: KnowledgeLayer;\n    title: string;\n    summary: string;\n    content: string;  // Full markdown content\n    status: KnowledgeStatus;\n    severity: ConstraintSeverity;\n    tags: string[];\n    constraints?: Constraint[];\n    metadata: Record<string, unknown>;\n    createdAt: string;\n    updatedAt: string;\n    supersedes?: string;\n    supersededBy?: string[];\n  } | null;\n  \n  /** Version history (if requested) */\n  history?: Array<{\n    version: string;\n    timestamp: string;\n    author: string;\n    message: string;\n  }>;\n}\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"sync-tools",children:"Sync Tools"}),"\n",(0,t.jsx)(n.h3,{id:"sync_now",children:"sync_now"}),"\n",(0,t.jsx)(n.p,{children:"Trigger manual synchronization between memory and knowledge."}),"\n",(0,t.jsx)(n.h4,{id:"description-6",children:"Description"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Manually trigger synchronization between memory and knowledge systems.\nUse this after significant knowledge updates or if you suspect memories\nare out of date with the latest organizational policies.\n"})}),"\n",(0,t.jsx)(n.h4,{id:"input-schema-6",children:"Input Schema"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface SyncNowInput {\n  /**\n   * Force full sync (ignore delta detection).\n   * @default false\n   */\n  force?: boolean;\n  \n  /**\n   * Only sync specific knowledge types.\n   */\n  types?: KnowledgeType[];\n  \n  /**\n   * Only sync specific layers.\n   */\n  layers?: KnowledgeLayer[];\n}\n"})}),"\n",(0,t.jsx)(n.h4,{id:"output-schema-6",children:"Output Schema"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface SyncNowOutput {\n  /** Whether sync completed successfully */\n  success: boolean;\n  \n  /** Sync results */\n  result: {\n    added: number;\n    updated: number;\n    deleted: number;\n    unchanged: number;\n    failures: number;\n  };\n  \n  /** Sync duration in milliseconds */\n  durationMs: number;\n  \n  /** Message */\n  message: string;\n}\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"sync_status",children:"sync_status"}),"\n",(0,t.jsx)(n.p,{children:"Check the current sync status."}),"\n",(0,t.jsx)(n.h4,{id:"description-7",children:"Description"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Check the status of memory-knowledge synchronization, including\nlast sync time, pending changes, and any sync failures.\n"})}),"\n",(0,t.jsx)(n.h4,{id:"input-schema-7",children:"Input Schema"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface SyncStatusInput {\n  /** No input required */\n}\n"})}),"\n",(0,t.jsx)(n.h4,{id:"output-schema-7",children:"Output Schema"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface SyncStatusOutput {\n  /** Whether sync is healthy */\n  healthy: boolean;\n  \n  /** Last sync timestamp */\n  lastSyncAt: string | null;\n  \n  /** Time since last sync (human readable) */\n  timeSinceSync: string;\n  \n  /** Number of failed items */\n  failedItems: number;\n  \n  /** Sync statistics */\n  stats: {\n    totalSyncs: number;\n    totalItemsSynced: number;\n    avgSyncDurationMs: number;\n  };\n}\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"tool-schemas-json-schema",children:"Tool Schemas (JSON Schema)"}),"\n",(0,t.jsx)(n.h3,{id:"memory_add-schema",children:"memory_add Schema"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "$schema": "https://json-schema.org/draft/2020-12/schema",\n  "type": "object",\n  "properties": {\n    "content": {\n      "type": "string",\n      "description": "The content to remember"\n    },\n    "layer": {\n      "type": "string",\n      "enum": ["agent", "user", "session", "project", "team", "org", "company"],\n      "default": "user",\n      "description": "Memory scope"\n    },\n    "tags": {\n      "type": "array",\n      "items": { "type": "string" },\n      "description": "Tags for categorization"\n    },\n    "metadata": {\n      "type": "object",\n      "additionalProperties": true,\n      "description": "Additional metadata"\n    }\n  },\n  "required": ["content"]\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"memory_search-schema",children:"memory_search Schema"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "$schema": "https://json-schema.org/draft/2020-12/schema",\n  "type": "object",\n  "properties": {\n    "query": {\n      "type": "string",\n      "description": "Search query"\n    },\n    "layers": {\n      "type": "array",\n      "items": {\n        "type": "string",\n        "enum": ["agent", "user", "session", "project", "team", "org", "company"]\n      },\n      "description": "Layers to search"\n    },\n    "limit": {\n      "type": "integer",\n      "minimum": 1,\n      "maximum": 100,\n      "default": 10,\n      "description": "Maximum results"\n    },\n    "threshold": {\n      "type": "number",\n      "minimum": 0,\n      "maximum": 1,\n      "default": 0.7,\n      "description": "Minimum similarity threshold"\n    },\n    "tags": {\n      "type": "array",\n      "items": { "type": "string" },\n      "description": "Filter by tags"\n    }\n  },\n  "required": ["query"]\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"knowledge_query-schema",children:"knowledge_query Schema"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "$schema": "https://json-schema.org/draft/2020-12/schema",\n  "type": "object",\n  "properties": {\n    "query": {\n      "type": "string",\n      "description": "Search query"\n    },\n    "type": {\n      "type": "string",\n      "enum": ["adr", "policy", "pattern", "spec"],\n      "description": "Filter by type"\n    },\n    "layer": {\n      "type": "string",\n      "enum": ["company", "org", "team", "project"],\n      "description": "Filter by layer"\n    },\n    "tags": {\n      "type": "array",\n      "items": { "type": "string" },\n      "description": "Filter by tags"\n    },\n    "status": {\n      "type": "array",\n      "items": {\n        "type": "string",\n        "enum": ["draft", "proposed", "accepted", "deprecated", "superseded"]\n      },\n      "default": ["accepted"],\n      "description": "Filter by status"\n    },\n    "limit": {\n      "type": "integer",\n      "minimum": 1,\n      "maximum": 100,\n      "default": 10,\n      "description": "Maximum results"\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"knowledge_check-schema",children:"knowledge_check Schema"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "$schema": "https://json-schema.org/draft/2020-12/schema",\n  "type": "object",\n  "properties": {\n    "files": {\n      "type": "array",\n      "items": {\n        "type": "object",\n        "properties": {\n          "path": { "type": "string" },\n          "content": { "type": "string" }\n        },\n        "required": ["path", "content"]\n      },\n      "description": "Files to check"\n    },\n    "dependencies": {\n      "type": "array",\n      "items": {\n        "type": "object",\n        "properties": {\n          "name": { "type": "string" },\n          "version": { "type": "string" }\n        },\n        "required": ["name"]\n      },\n      "description": "Dependencies to check"\n    },\n    "minSeverity": {\n      "type": "string",\n      "enum": ["info", "warn", "block"],\n      "default": "warn",\n      "description": "Minimum severity to report"\n    },\n    "knowledgeItemIds": {\n      "type": "array",\n      "items": { "type": "string" },\n      "description": "Specific items to check"\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"error-responses",children:"Error Responses"}),"\n",(0,t.jsx)(n.h3,{id:"standard-error-format",children:"Standard Error Format"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface ToolError {\n  /** Error indicator */\n  success: false;\n  \n  /** Error code */\n  errorCode: string;\n  \n  /** Human-readable message */\n  message: string;\n  \n  /** Additional details */\n  details?: Record<string, unknown>;\n  \n  /** Whether the operation can be retried */\n  retryable: boolean;\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"common-error-codes",children:"Common Error Codes"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Code"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Retryable"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"INVALID_INPUT"})}),(0,t.jsx)(n.td,{children:"Input validation failed"}),(0,t.jsx)(n.td,{children:"No"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"NOT_FOUND"})}),(0,t.jsx)(n.td,{children:"Resource not found"}),(0,t.jsx)(n.td,{children:"No"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"PROVIDER_ERROR"})}),(0,t.jsx)(n.td,{children:"Storage provider error"}),(0,t.jsx)(n.td,{children:"Yes"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"RATE_LIMITED"})}),(0,t.jsx)(n.td,{children:"Too many requests"}),(0,t.jsx)(n.td,{children:"Yes"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"UNAUTHORIZED"})}),(0,t.jsx)(n.td,{children:"Not authorized"}),(0,t.jsx)(n.td,{children:"No"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"TIMEOUT"})}),(0,t.jsx)(n.td,{children:"Operation timed out"}),(0,t.jsx)(n.td,{children:"Yes"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"CONFLICT"})}),(0,t.jsx)(n.td,{children:"Concurrent modification"}),(0,t.jsx)(n.td,{children:"Yes"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"error-example",children:"Error Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "success": false,\n  "errorCode": "NOT_FOUND",\n  "message": "Knowledge item \'adr-999\' not found",\n  "details": {\n    "requestedId": "adr-999",\n    "searchedLayers": ["company", "org", "project"]\n  },\n  "retryable": false\n}\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Next"}),": ",(0,t.jsx)(n.a,{href:"/aeterna/docs/specs/configuration",children:"07-configuration.md"})," - Configuration Specification"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453(e,n,r){r.d(n,{R:()=>a,x:()=>o});var s=r(6540);const t={},i=s.createContext(t);function a(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);