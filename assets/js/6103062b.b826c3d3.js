"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[8733],{3181(e,n,i){i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"examples/policies/README","title":"Example Policies Library","description":"Production-ready Cedar policies for common enterprise governance scenarios.","source":"@site/docs/examples/policies/README.md","sourceDirName":"examples/policies","slug":"/examples/policies/","permalink":"/aeterna/docs/examples/policies/","draft":false,"unlisted":false,"editUrl":"https://github.com/kikokikok/aeterna/tree/main/website/docs/examples/policies/README.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"Strangler Fig Migration with Aeterna","permalink":"/aeterna/docs/examples/strangler-fig-migration"},"next":{"title":"Security Baseline Policies","permalink":"/aeterna/docs/examples/policies/security-baseline"}}');var r=i(4848),l=i(8453);const c={},t="Example Policies Library",d={},a=[{value:"Categories",id:"categories",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"Using Natural Language (Recommended)",id:"using-natural-language-recommended",level:3},{value:"Using Pre-Built Policies",id:"using-pre-built-policies",level:3},{value:"Policy Structure",id:"policy-structure",level:2},{value:"How Policies Work",id:"how-policies-work",level:2},{value:"Severity Levels",id:"severity-levels",level:3},{value:"Scope Levels",id:"scope-levels",level:3},{value:"Merge Strategies",id:"merge-strategies",level:3},{value:"Creating Custom Policies",id:"creating-custom-policies",level:2},{value:"From Natural Language",id:"from-natural-language",level:3},{value:"From Templates",id:"from-templates",level:3},{value:"Writing Cedar Directly",id:"writing-cedar-directly",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Start with Warnings",id:"1-start-with-warnings",level:3},{value:"2. Use Simulation Before Activation",id:"2-use-simulation-before-activation",level:3},{value:"3. Document Policy Rationale",id:"3-document-policy-rationale",level:3},{value:"4. Plan for Exceptions",id:"4-plan-for-exceptions",level:3},{value:"Index of All Policies",id:"index-of-all-policies",level:2},{value:"Security",id:"security",level:3},{value:"Dependencies",id:"dependencies",level:3},{value:"Architecture",id:"architecture",level:3},{value:"Code Quality",id:"code-quality",level:3},{value:"Team Conventions",id:"team-conventions",level:3}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"example-policies-library",children:"Example Policies Library"})}),"\n",(0,r.jsx)(n.p,{children:"Production-ready Cedar policies for common enterprise governance scenarios."}),"\n",(0,r.jsx)(n.h2,{id:"categories",children:"Categories"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Category"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Policies"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"/aeterna/docs/examples/policies/security-baseline",children:"Security Baseline"})}),(0,r.jsx)(n.td,{children:"Core security policies every organization needs"}),(0,r.jsx)(n.td,{children:"8 policies"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"/aeterna/docs/examples/policies/dependency-management",children:"Dependency Management"})}),(0,r.jsx)(n.td,{children:"Control which libraries and packages can be used"}),(0,r.jsx)(n.td,{children:"10 policies"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"/aeterna/docs/examples/policies/architecture-constraints",children:"Architecture Constraints"})}),(0,r.jsx)(n.td,{children:"Enforce architectural decisions and patterns"}),(0,r.jsx)(n.td,{children:"8 policies"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"/aeterna/docs/examples/policies/code-quality",children:"Code Quality"})}),(0,r.jsx)(n.td,{children:"Maintain code quality standards"}),(0,r.jsx)(n.td,{children:"7 policies"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"/aeterna/docs/examples/policies/team-conventions",children:"Team Conventions"})}),(0,r.jsx)(n.td,{children:"Team-specific coding conventions"}),(0,r.jsx)(n.td,{children:"6 policies"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,r.jsx)(n.h3,{id:"using-natural-language-recommended",children:"Using Natural Language (Recommended)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Aeterna translates natural language to Cedar\n$ aeterna policy create "Block MySQL in this project"\n\nDraft created: draft-no-mysql-1234\nTranslated to Cedar:\n  forbid(principal, action == Action::"UseDependency", resource)\n  when { resource.dependency == "mysql" };\n'})}),"\n",(0,r.jsx)(n.h3,{id:"using-pre-built-policies",children:"Using Pre-Built Policies"}),"\n",(0,r.jsx)(n.p,{children:"Copy any policy from this library:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# View policy\n$ cat docs/examples/policies/security-baseline.cedar\n\n# Import to your project\n$ aeterna policy import docs/examples/policies/security-baseline.cedar --scope project\n"})}),"\n",(0,r.jsx)(n.h2,{id:"policy-structure",children:"Policy Structure"}),"\n",(0,r.jsx)(n.p,{children:"Each policy includes:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Natural Language Description"})," - What the policy does in plain English"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cedar Code"})," - The actual policy implementation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Explanation"})," - How the policy works and why"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use Cases"})," - When to apply this policy"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Customization"})," - How to adapt for your needs"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"how-policies-work",children:"How Policies Work"}),"\n",(0,r.jsx)(n.h3,{id:"severity-levels",children:"Severity Levels"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Severity"}),(0,r.jsx)(n.th,{children:"Effect"}),(0,r.jsx)(n.th,{children:"Use When"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"block"})}),(0,r.jsx)(n.td,{children:"Prevents the action entirely"}),(0,r.jsx)(n.td,{children:"Security violations, compliance requirements"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"error"})}),(0,r.jsx)(n.td,{children:"Flags as error, may prevent deployment"}),(0,r.jsx)(n.td,{children:"Important violations that need fixing"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"warn"})}),(0,r.jsx)(n.td,{children:"Logs warning, allows action"}),(0,r.jsx)(n.td,{children:"Best practices, migrations in progress"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"info"})}),(0,r.jsx)(n.td,{children:"Informational only"}),(0,r.jsx)(n.td,{children:"Guidelines, suggestions"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"scope-levels",children:"Scope Levels"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Company (highest precedence)\n    \u2193 Mandatory policies flow down\nOrganization\n    \u2193 Department standards\nTeam\n    \u2193 Team conventions\nProject (lowest precedence)\n    \u2193 Project-specific rules\n"})}),"\n",(0,r.jsx)(n.h3,{id:"merge-strategies",children:"Merge Strategies"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Strategy"}),(0,r.jsx)(n.th,{children:"Behavior"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"override"})}),(0,r.jsx)(n.td,{children:"Child replaces parent"}),(0,r.jsx)(n.td,{children:"Project uses different DB than team"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"merge"})}),(0,r.jsx)(n.td,{children:"Combines both"}),(0,r.jsx)(n.td,{children:"Add project rules to team rules"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"intersect"})}),(0,r.jsx)(n.td,{children:"Keeps only common"}),(0,r.jsx)(n.td,{children:"Stricter than both parent and child"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"creating-custom-policies",children:"Creating Custom Policies"}),"\n",(0,r.jsx)(n.h3,{id:"from-natural-language",children:"From Natural Language"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'$ aeterna policy create "Require all APIs to have OpenAPI documentation"\n\n# Shows draft, allows review before submission\n'})}),"\n",(0,r.jsx)(n.h3,{id:"from-templates",children:"From Templates"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# List available templates\n$ aeterna policy template list\n\n# Create from template\n$ aeterna policy template use require-file --args file=openapi.yaml,severity=warn\n"})}),"\n",(0,r.jsx)(n.h3,{id:"writing-cedar-directly",children:"Writing Cedar Directly"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cedar",children:'// Policy: require-openapi-spec\n// Scope: team\n// Severity: warn\n\npermit(\n  principal,\n  action == Action::"Deploy",\n  resource\n)\nwhen {\n  resource.files.contains("openapi.yaml") ||\n  resource.files.contains("openapi.json")\n};\n'})}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsx)(n.h3,{id:"1-start-with-warnings",children:"1. Start with Warnings"}),"\n",(0,r.jsx)(n.p,{children:"New policies should start as warnings to identify impact:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# First, deploy as warning\n$ aeterna policy create "Require SECURITY.md" --severity warn\n\n# After team adapts, upgrade to blocking\n$ aeterna policy update require-security-md --severity block\n'})}),"\n",(0,r.jsx)(n.h3,{id:"2-use-simulation-before-activation",children:"2. Use Simulation Before Activation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"$ aeterna policy simulate draft-no-mysql-1234\n\nSimulation Results:\n  Current project: PASS (no MySQL)\n  Team projects: 2 would FAIL\n    - legacy-api (uses mysql2)\n    - data-sync (uses mysql)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"3-document-policy-rationale",children:"3. Document Policy Rationale"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cedar",children:"// Policy: no-moment-js\n// Reason: moment.js is deprecated, use date-fns or dayjs\n// Reference: ADR-015\n// Migration guide: docs/migrations/moment-to-datefns.md\n"})}),"\n",(0,r.jsx)(n.h3,{id:"4-plan-for-exceptions",children:"4. Plan for Exceptions"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cedar",children:'// Allow specific exception with documentation\npermit(\n  principal,\n  action == Action::"UseDependency",\n  resource\n)\nwhen {\n  resource.dependency == "moment" &&\n  resource.exception_approved == true &&\n  resource.exception_expires > context.now\n};\n'})}),"\n",(0,r.jsx)(n.h2,{id:"index-of-all-policies",children:"Index of All Policies"}),"\n",(0,r.jsx)(n.h3,{id:"security",children:"Security"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"no-vulnerable-lodash"})," - Block lodash < 4.17.21 (CVE-2021-23337)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"require-tls-1-3"})," - Enforce TLS 1.3+ for connections"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"no-eval"})," - Prevent eval() usage"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"require-security-md"})," - Require SECURITY.md file"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"no-hardcoded-secrets"})," - Block hardcoded credentials"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"require-input-validation"})," - Mandate input validation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"require-auth-all-endpoints"})," - No anonymous API access"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"no-sql-string-concat"})," - Prevent SQL injection patterns"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"dependencies",children:"Dependencies"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"no-mysql"})," - Use PostgreSQL instead of MySQL"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"no-moment"})," - Use date-fns or dayjs instead"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"no-lodash-full"})," - Use lodash-es or individual functions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"require-opentelemetry"})," - Mandate tracing"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"no-deprecated-deps"})," - Block known deprecated packages"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"require-security-updates"})," - Enforce timely updates"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pin-major-versions"})," - No floating major versions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"no-install-scripts"})," - Block packages with install scripts"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"require-license-check"})," - Only allow approved licenses"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"max-bundle-size"})," - Limit dependency bundle size"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"architecture",children:"Architecture"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"require-strangler-facade"})," - Enforce strangler fig pattern"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"no-direct-db-access"})," - Use repository pattern"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"require-api-versioning"})," - Mandate API versions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"no-circular-dependencies"})," - Prevent circular imports"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"require-interface-segregation"})," - Small, focused interfaces"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"require-error-boundaries"})," - Wrap components in error boundaries"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"max-function-length"})," - Limit function complexity"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"require-typed-errors"})," - Use typed errors, not panics"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"code-quality",children:"Code Quality"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"require-tests"})," - Mandate test coverage"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"no-console-log"})," - Remove debug statements"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"require-jsdoc-public"})," - Document public APIs"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"no-any-type"})," - Avoid TypeScript ",(0,r.jsx)(n.code,{children:"any"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"require-error-handling"})," - No empty catch blocks"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"max-file-length"})," - Limit file size"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"require-code-review"})," - Mandate PR reviews"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"team-conventions",children:"Team Conventions"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"naming-convention-snake"})," - Use snake_case for APIs"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"naming-convention-camel"})," - Use camelCase for variables"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"require-changelog"})," - Mandate CHANGELOG.md"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"require-readme"})," - Require README.md"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"standard-commit-messages"})," - Conventional commits"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"require-pr-template"})," - Use PR templates"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8453(e,n,i){i.d(n,{R:()=>c,x:()=>t});var s=i(6540);const r={},l=s.createContext(r);function c(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);